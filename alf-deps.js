!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.ALF=e():t.ALF=e()}(this,function(){return function(t){function e(i){if(n[i])return n[i].exports;var r=n[i]={exports:{},id:i,loaded:!1};return t[i].call(r.exports,r,r.exports,e),r.loaded=!0,r.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,exports,e){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(exports,"__esModule",{value:!0});var i=e(1),r=n(i),s=e(3),a=n(s),o=e(9),l=n(o),u=e(11),c=n(u),f=e(12),h=n(f),d=e(10),p=e(15),g=n(p),m=e(22),v=n(m),_=e(27),y=n(_),w=e(57),b=n(w),E=e(60),T=n(E),x=e(61),S=n(x),C=e(17),P=n(C);exports.default={dom:a.default,_:r.default,hub:l.default,Base:c.default,View:h.default,Events:d.Events,transition:g.default,layer:v.default,layout:y.default,serialize:b.default,compile:T.default,nav:S.default,util:P.default}},function(t,exports,e){var n;(function(t,i){(function(){function r(t,e){if(t!==e){var n=null===t,i=t===C,r=t===t,s=null===e,a=e===C,o=e===e;if(t>e&&!s||!r||n&&!a&&o||i&&o)return 1;if(t<e&&!n||!o||s&&!i&&r||a&&r)return-1}return 0}function s(t,e,n){for(var i=t.length,r=n?i:-1;n?r--:++r<i;)if(e(t[r],r,t))return r;return-1}function a(t,e,n){if(e!==e)return v(t,n);for(var i=n-1,r=t.length;++i<r;)if(t[i]===e)return i;return-1}function o(t){return"function"==typeof t||!1}function l(t){return null==t?"":t+""}function u(t,e){for(var n=-1,i=t.length;++n<i&&e.indexOf(t.charAt(n))>-1;);return n}function c(t,e){for(var n=t.length;n--&&e.indexOf(t.charAt(n))>-1;);return n}function f(t,e){return r(t.criteria,e.criteria)||t.index-e.index}function h(t,e,n){for(var i=-1,s=t.criteria,a=e.criteria,o=s.length,l=n.length;++i<o;){var u=r(s[i],a[i]);if(u){if(i>=l)return u;var c=n[i];return u*("asc"===c||c===!0?1:-1)}}return t.index-e.index}function d(t){return Yt[t]}function p(t){return Gt[t]}function g(t,e,n){return e?t=Kt[t]:n&&(t=Jt[t]),"\\"+t}function m(t){return"\\"+Jt[t]}function v(t,e,n){for(var i=t.length,r=e+(n?0:-1);n?r--:++r<i;){var s=t[r];if(s!==s)return r}return-1}function _(t){return!!t&&"object"==typeof t}function y(t){return t<=160&&t>=9&&t<=13||32==t||160==t||5760==t||6158==t||t>=8192&&(t<=8202||8232==t||8233==t||8239==t||8287==t||12288==t||65279==t)}function w(t,e){for(var n=-1,i=t.length,r=-1,s=[];++n<i;)t[n]===e&&(t[n]=Y,s[++r]=n);return s}function b(t,e){for(var n,i=-1,r=t.length,s=-1,a=[];++i<r;){var o=t[i],l=e?e(o,i,t):o;i&&n===l||(n=l,a[++s]=o)}return a}function E(t){for(var e=-1,n=t.length;++e<n&&y(t.charCodeAt(e)););return e}function T(t){for(var e=t.length;e--&&y(t.charCodeAt(e)););return e}function x(t){return Vt[t]}function S(t){function e(t){if(_(t)&&!Ao(t)&&!(t instanceof y)){if(t instanceof i)return t;if(ea.call(t,"__chain__")&&ea.call(t,"__wrapped__"))return pi(t)}return new i(t)}function n(){}function i(t,e,n){this.__wrapped__=t,this.__actions__=n||[],this.__chain__=!!e}function y(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Oa,this.__views__=[]}function Q(){var t=new y(this.__wrapped__);return t.__actions__=ee(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=ee(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=ee(this.__views__),t}function it(){if(this.__filtered__){var t=new y(this);t.__dir__=-1,t.__filtered__=!0}else t=this.clone(),t.__dir__*=-1;return t}function st(){var t=this.__wrapped__.value(),e=this.__dir__,n=Ao(t),i=e<0,r=n?t.length:0,s=Gn(0,r,this.__views__),a=s.start,o=s.end,l=o-a,u=i?o:a-1,c=this.__iteratees__,f=c.length,h=0,d=Ta(l,this.__takeCount__);if(!n||r<z||r==l&&d==l)return rn(i&&n?t.reverse():t,this.__actions__);var p=[];t:for(;l--&&h<d;){u+=e;for(var g=-1,m=t[u];++g<f;){var v=c[g],_=v.iteratee,y=v.type,w=_(m);if(y==U)m=w;else if(!w){if(y==W)continue t;break t}}p[h++]=m}return p}function Yt(){this.__data__={}}function Gt(t){return this.has(t)&&delete this.__data__[t]}function Vt(t){return"__proto__"==t?C:this.__data__[t]}function qt(t){return"__proto__"!=t&&ea.call(this.__data__,t)}function Kt(t,e){return"__proto__"!=t&&(this.__data__[t]=e),this}function Jt(t){var e=t?t.length:0;for(this.data={hash:va(null),set:new fa};e--;)this.push(t[e])}function Zt(t,e){var n=t.data,i="string"==typeof e||kr(e)?n.set.has(e):n.hash[e];return i?0:-1}function Qt(t){var e=this.data;"string"==typeof t||kr(t)?e.set.add(t):e.hash[t]=!0}function te(t,e){for(var n=-1,i=t.length,r=-1,s=e.length,a=Bs(i+s);++n<i;)a[n]=t[n];for(;++r<s;)a[n++]=e[r];return a}function ee(t,e){var n=-1,i=t.length;for(e||(e=Bs(i));++n<i;)e[n]=t[n];return e}function ne(t,e){for(var n=-1,i=t.length;++n<i&&e(t[n],n,t)!==!1;);return t}function se(t,e){for(var n=t.length;n--&&e(t[n],n,t)!==!1;);return t}function ae(t,e){for(var n=-1,i=t.length;++n<i;)if(!e(t[n],n,t))return!1;return!0}function oe(t,e,n,i){for(var r=-1,s=t.length,a=i,o=a;++r<s;){var l=t[r],u=+e(l);n(u,a)&&(a=u,o=l)}return o}function le(t,e){for(var n=-1,i=t.length,r=-1,s=[];++n<i;){var a=t[n];e(a,n,t)&&(s[++r]=a)}return s}function ue(t,e){for(var n=-1,i=t.length,r=Bs(i);++n<i;)r[n]=e(t[n],n,t);return r}function ce(t,e){for(var n=-1,i=e.length,r=t.length;++n<i;)t[r+n]=e[n];return t}function fe(t,e,n,i){var r=-1,s=t.length;for(i&&s&&(n=t[++r]);++r<s;)n=e(n,t[r],r,t);return n}function he(t,e,n,i){var r=t.length;for(i&&r&&(n=t[--r]);r--;)n=e(n,t[r],r,t);return n}function de(t,e){for(var n=-1,i=t.length;++n<i;)if(e(t[n],n,t))return!0;return!1}function pe(t,e){for(var n=t.length,i=0;n--;)i+=+e(t[n])||0;return i}function ge(t,e){return t===C?e:t}function me(t,e,n,i){return t!==C&&ea.call(i,n)?t:e}function ve(t,e,n){for(var i=-1,r=Bo(e),s=r.length;++i<s;){var a=r[i],o=t[a],l=n(o,e[a],a,t,e);(l===l?l===o:o!==o)&&(o!==C||a in t)||(t[a]=l)}return t}function _e(t,e){return null==e?t:we(e,Bo(e),t)}function ye(t,e){for(var n=-1,i=null==t,r=!i&&Zn(t),s=r?t.length:0,a=e.length,o=Bs(a);++n<a;){var l=e[n];r?o[n]=Qn(l,s)?t[l]:C:o[n]=i?C:t[l]}return o}function we(t,e,n){n||(n={});for(var i=-1,r=e.length;++i<r;){var s=e[i];n[s]=t[s]}return n}function be(t,e,n){var i=typeof t;return"function"==i?e===C?t:on(t,e,n):null==t?Os:"object"==i?He(t):e===C?Ls(t):Be(t,e)}function Ee(t,e,n,i,r,s,a){var o;if(n&&(o=r?n(t,i,r):n(t)),o!==C)return o;if(!kr(t))return t;var l=Ao(t);if(l){if(o=Vn(t),!e)return ee(t,o)}else{var u=ia.call(t),c=u==Z;if(u!=et&&u!=G&&(!c||r))return Xt[u]?Kn(t,u,e):r?t:{};if(o=qn(c?{}:t),!e)return _e(o,t)}s||(s=[]),a||(a=[]);for(var f=s.length;f--;)if(s[f]==t)return a[f];return s.push(t),a.push(o),(l?ne:Ie)(t,function(i,r){o[r]=Ee(i,e,n,r,t,s,a)}),o}function Te(t,e,n){if("function"!=typeof t)throw new Ks(X);return ha(function(){t.apply(C,n)},e)}function xe(t,e){var n=t?t.length:0,i=[];if(!n)return i;var r=-1,s=Un(),o=s==a,l=o&&e.length>=z?mn(e):null,u=e.length;l&&(s=Zt,o=!1,e=l);t:for(;++r<n;){var c=t[r];if(o&&c===c){for(var f=u;f--;)if(e[f]===c)continue t;i.push(c)}else s(e,c,0)<0&&i.push(c)}return i}function Se(t,e){var n=!0;return Fa(t,function(t,i,r){return n=!!e(t,i,r)}),n}function Ce(t,e,n,i){var r=i,s=r;return Fa(t,function(t,a,o){var l=+e(t,a,o);(n(l,r)||l===i&&l===s)&&(r=l,s=t)}),s}function Pe(t,e,n,i){var r=t.length;for(n=null==n?0:+n||0,n<0&&(n=-n>r?0:r+n),i=i===C||i>r?r:+i||0,i<0&&(i+=r),r=n>i?0:i>>>0,n>>>=0;n<r;)t[n++]=e;return t}function Oe(t,e){var n=[];return Fa(t,function(t,i,r){e(t,i,r)&&n.push(t)}),n}function Me(t,e,n,i){var r;return n(t,function(t,n,s){if(e(t,n,s))return r=i?n:t,!1}),r}function Ae(t,e,n,i){i||(i=[]);for(var r=-1,s=t.length;++r<s;){var a=t[r];_(a)&&Zn(a)&&(n||Ao(a)||Cr(a))?e?Ae(a,e,n,i):ce(i,a):n||(i[i.length]=a)}return i}function Ne(t,e){return $a(t,e,es)}function Ie(t,e){return $a(t,e,Bo)}function Re(t,e){return Da(t,e,Bo)}function Le(t,e){for(var n=-1,i=e.length,r=-1,s=[];++n<i;){var a=e[n];Lr(t[a])&&(s[++r]=a)}return s}function ke(t,e,n){if(null!=t){n!==C&&n in hi(t)&&(e=[n]);for(var i=0,r=e.length;null!=t&&i<r;)t=t[e[i++]];return i&&i==r?t:C}}function Fe(t,e,n,i,r,s){return t===e||(null==t||null==e||!kr(t)&&!_(e)?t!==t&&e!==e:je(t,e,Fe,n,i,r,s))}function je(t,e,n,i,r,s,a){var o=Ao(t),l=Ao(e),u=V,c=V;o||(u=ia.call(t),u==G?u=et:u!=et&&(o=Ur(t))),l||(c=ia.call(e),c==G?c=et:c!=et&&(l=Ur(e)));var f=u==et,h=c==et,d=u==c;if(d&&!o&&!f)return Hn(t,e,u);if(!r){var p=f&&ea.call(t,"__wrapped__"),g=h&&ea.call(e,"__wrapped__");if(p||g)return n(p?t.value():t,g?e.value():e,i,r,s,a)}if(!d)return!1;s||(s=[]),a||(a=[]);for(var m=s.length;m--;)if(s[m]==t)return a[m]==e;s.push(t),a.push(e);var v=(o?Dn:Bn)(t,e,n,i,r,s,a);return s.pop(),a.pop(),v}function $e(t,e,n){var i=e.length,r=i,s=!n;if(null==t)return!r;for(t=hi(t);i--;){var a=e[i];if(s&&a[2]?a[1]!==t[a[0]]:!(a[0]in t))return!1}for(;++i<r;){a=e[i];var o=a[0],l=t[o],u=a[1];if(s&&a[2]){if(l===C&&!(o in t))return!1}else{var c=n?n(l,u,o):C;if(!(c===C?Fe(u,l,n,!0):c))return!1}}return!0}function De(t,e){var n=-1,i=Zn(t)?Bs(t.length):[];return Fa(t,function(t,r,s){i[++n]=e(t,r,s)}),i}function He(t){var e=Xn(t);if(1==e.length&&e[0][2]){var n=e[0][0],i=e[0][1];return function(t){return null!=t&&(t[n]===i&&(i!==C||n in hi(t)))}}return function(t){return $e(t,e)}}function Be(t,e){var n=Ao(t),i=ei(t)&&ri(e),r=t+"";return t=di(t),function(s){if(null==s)return!1;var a=r;if(s=hi(s),(n||!i)&&!(a in s)){if(s=1==t.length?s:ke(s,qe(t,0,-1)),null==s)return!1;a=Pi(t),s=hi(s)}return s[a]===e?e!==C||a in s:Fe(e,s[a],C,!0)}}function ze(t,e,n,i,r){if(!kr(t))return t;var s=Zn(e)&&(Ao(e)||Ur(e)),a=s?C:Bo(e);return ne(a||e,function(o,l){if(a&&(l=o,o=e[l]),_(o))i||(i=[]),r||(r=[]),We(t,e,l,ze,n,i,r);else{var u=t[l],c=n?n(u,o,l,t,e):C,f=c===C;f&&(c=o),c===C&&(!s||l in t)||!f&&(c===c?c===u:u!==u)||(t[l]=c)}}),t}function We(t,e,n,i,r,s,a){for(var o=s.length,l=e[n];o--;)if(s[o]==l)return void(t[n]=a[o]);var u=t[n],c=r?r(u,l,n,t,e):C,f=c===C;f&&(c=l,Zn(l)&&(Ao(l)||Ur(l))?c=Ao(u)?u:Zn(u)?ee(u):[]:Br(l)||Cr(l)?c=Cr(u)?qr(u):Br(u)?u:{}:f=!1),s.push(l),a.push(c),f?t[n]=i(c,l,r,s,a):(c===c?c!==u:u===u)&&(t[n]=c)}function Ue(t){return function(e){return null==e?C:e[t]}}function Xe(t){var e=t+"";return t=di(t),function(n){return ke(n,t,e)}}function Ye(t,e){for(var n=t?e.length:0;n--;){var i=e[n];if(i!=r&&Qn(i)){var r=i;da.call(t,i,1)}}return t}function Ge(t,e){return t+_a(Ca()*(e-t+1))}function Ve(t,e,n,i,r){return r(t,function(t,r,s){n=i?(i=!1,t):e(n,t,r,s)}),n}function qe(t,e,n){var i=-1,r=t.length;e=null==e?0:+e||0,e<0&&(e=-e>r?0:r+e),n=n===C||n>r?r:+n||0,n<0&&(n+=r),r=e>n?0:n-e>>>0,e>>>=0;for(var s=Bs(r);++i<r;)s[i]=t[i+e];return s}function Ke(t,e){var n;return Fa(t,function(t,i,r){return n=e(t,i,r),!n}),!!n}function Je(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}function Ze(t,e,n){var i=zn(),r=-1;e=ue(e,function(t){return i(t)});var s=De(t,function(t){var n=ue(e,function(e){return e(t)});return{criteria:n,index:++r,value:t}});return Je(s,function(t,e){return h(t,e,n)})}function Qe(t,e){var n=0;return Fa(t,function(t,i,r){n+=+e(t,i,r)||0}),n}function tn(t,e){var n=-1,i=Un(),r=t.length,s=i==a,o=s&&r>=z,l=o?mn():null,u=[];l?(i=Zt,s=!1):(o=!1,l=e?[]:u);t:for(;++n<r;){var c=t[n],f=e?e(c,n,t):c;if(s&&c===c){for(var h=l.length;h--;)if(l[h]===f)continue t;e&&l.push(f),u.push(c)}else i(l,f,0)<0&&((e||o)&&l.push(f),u.push(c))}return u}function en(t,e){for(var n=-1,i=e.length,r=Bs(i);++n<i;)r[n]=t[e[n]];return r}function nn(t,e,n,i){for(var r=t.length,s=i?r:-1;(i?s--:++s<r)&&e(t[s],s,t););return n?qe(t,i?0:s,i?s+1:r):qe(t,i?s+1:0,i?r:s)}function rn(t,e){var n=t;n instanceof y&&(n=n.value());for(var i=-1,r=e.length;++i<r;){var s=e[i];n=s.func.apply(s.thisArg,ce([n],s.args))}return n}function sn(t,e,n){var i=0,r=t?t.length:i;if("number"==typeof e&&e===e&&r<=Na){for(;i<r;){var s=i+r>>>1,a=t[s];(n?a<=e:a<e)&&null!==a?i=s+1:r=s}return r}return an(t,e,Os,n)}function an(t,e,n,i){e=n(e);for(var r=0,s=t?t.length:0,a=e!==e,o=null===e,l=e===C;r<s;){var u=_a((r+s)/2),c=n(t[u]),f=c!==C,h=c===c;if(a)var d=h||i;else d=o?h&&f&&(i||null!=c):l?h&&(i||f):null!=c&&(i?c<=e:c<e);d?r=u+1:s=u}return Ta(s,Aa)}function on(t,e,n){if("function"!=typeof t)return Os;if(e===C)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 3:return function(n,i,r){return t.call(e,n,i,r)};case 4:return function(n,i,r,s){return t.call(e,n,i,r,s)};case 5:return function(n,i,r,s,a){return t.call(e,n,i,r,s,a)}}return function(){return t.apply(e,arguments)}}function ln(t){var e=new aa(t.byteLength),n=new pa(e);return n.set(new pa(t)),e}function un(t,e,n){for(var i=n.length,r=-1,s=Ea(t.length-i,0),a=-1,o=e.length,l=Bs(o+s);++a<o;)l[a]=e[a];for(;++r<i;)l[n[r]]=t[r];for(;s--;)l[a++]=t[r++];return l}function cn(t,e,n){for(var i=-1,r=n.length,s=-1,a=Ea(t.length-r,0),o=-1,l=e.length,u=Bs(a+l);++s<a;)u[s]=t[s];for(var c=s;++o<l;)u[c+o]=e[o];for(;++i<r;)u[c+n[i]]=t[s++];return u}function fn(t,e){return function(n,i,r){var s=e?e():{};if(i=zn(i,r,3),Ao(n))for(var a=-1,o=n.length;++a<o;){var l=n[a];t(s,l,i(l,a,n),n)}else Fa(n,function(e,n,r){t(s,e,i(e,n,r),r)});return s}}function hn(t){return _r(function(e,n){var i=-1,r=null==e?0:n.length,s=r>2?n[r-2]:C,a=r>2?n[2]:C,o=r>1?n[r-1]:C;for("function"==typeof s?(s=on(s,o,5),r-=2):(s="function"==typeof o?o:C,r-=s?1:0),a&&ti(n[0],n[1],a)&&(s=r<3?C:s,r=1);++i<r;){var l=n[i];l&&t(e,l,s)}return e})}function dn(t,e){return function(n,i){var r=n?za(n):0;if(!ii(r))return t(n,i);for(var s=e?r:-1,a=hi(n);(e?s--:++s<r)&&i(a[s],s,a)!==!1;);return n}}function pn(t){return function(e,n,i){for(var r=hi(e),s=i(e),a=s.length,o=t?a:-1;t?o--:++o<a;){var l=s[o];if(n(r[l],l,r)===!1)break}return e}}function gn(t,e){function n(){var r=this&&this!==ie&&this instanceof n?i:t;return r.apply(e,arguments)}var i=_n(t);return n}function mn(t){return va&&fa?new Jt(t):null}function vn(t){return function(e){for(var n=-1,i=Ss(fs(e)),r=i.length,s="";++n<r;)s=t(s,i[n],n);return s}}function _n(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var n=ka(t.prototype),i=t.apply(n,e);return kr(i)?i:n}}function yn(t){function e(n,i,r){r&&ti(n,i,r)&&(i=C);var s=$n(n,t,C,C,C,C,C,i);return s.placeholder=e.placeholder,s}return e}function wn(t,e){return _r(function(n){var i=n[0];return null==i?i:(n.push(e),t.apply(C,n))})}function bn(t,e){return function(n,i,r){if(r&&ti(n,i,r)&&(i=C),i=zn(i,r,3),1==i.length){n=Ao(n)?n:fi(n);var s=oe(n,i,t,e);if(!n.length||s!==e)return s}return Ce(n,i,t,e)}}function En(t,e){return function(n,i,r){if(i=zn(i,r,3),Ao(n)){var a=s(n,i,e);return a>-1?n[a]:C}return Me(n,i,t)}}function Tn(t){return function(e,n,i){return e&&e.length?(n=zn(n,i,3),s(e,n,t)):-1}}function xn(t){return function(e,n,i){return n=zn(n,i,3),Me(e,n,t,!0)}}function Sn(t){return function(){for(var e,n=arguments.length,r=t?n:-1,s=0,a=Bs(n);t?r--:++r<n;){var o=a[s++]=arguments[r];if("function"!=typeof o)throw new Ks(X);!e&&i.prototype.thru&&"wrapper"==Wn(o)&&(e=new i([],!0))}for(r=e?-1:n;++r<n;){o=a[r];var l=Wn(o),u="wrapper"==l?Ba(o):C;e=u&&ni(u[0])&&u[1]==(k|N|R|F)&&!u[4].length&&1==u[9]?e[Wn(u[0])].apply(e,u[3]):1==o.length&&ni(o)?e[l]():e.thru(o)}return function(){var t=arguments,i=t[0];if(e&&1==t.length&&Ao(i)&&i.length>=z)return e.plant(i).value();for(var r=0,s=n?a[r].apply(this,t):i;++r<n;)s=a[r].call(this,s);return s}}}function Cn(t,e){return function(n,i,r){return"function"==typeof i&&r===C&&Ao(n)?t(n,i):e(n,on(i,r,3))}}function Pn(t){return function(e,n,i){return"function"==typeof n&&i===C||(n=on(n,i,3)),t(e,n,es)}}function On(t){return function(e,n,i){return"function"==typeof n&&i===C||(n=on(n,i,3)),t(e,n)}}function Mn(t){return function(e,n,i){var r={};return n=zn(n,i,3),Ie(e,function(e,i,s){var a=n(e,i,s);i=t?a:i,e=t?e:a,r[i]=e}),r}}function An(t){return function(e,n,i){return e=l(e),(t?e:"")+Ln(e,n,i)+(t?"":e)}}function Nn(t){var e=_r(function(n,i){var r=w(i,e.placeholder);return $n(n,t,C,i,r)});return e}function In(t,e){return function(n,i,r,s){var a=arguments.length<3;return"function"==typeof i&&s===C&&Ao(n)?t(n,i,r,a):Ve(n,zn(i,s,4),r,a,e)}}function Rn(t,e,n,i,r,s,a,o,l,u){function c(){for(var _=arguments.length,y=_,b=Bs(_);y--;)b[y]=arguments[y];if(i&&(b=un(b,i,r)),s&&(b=cn(b,s,a)),p||m){var E=c.placeholder,T=w(b,E);if(_-=T.length,_<u){var x=o?ee(o):C,S=Ea(u-_,0),P=p?T:C,A=p?C:T,N=p?b:C,I=p?C:b;e|=p?R:L,e&=~(p?L:R),g||(e&=~(O|M));var k=[t,e,n,N,P,I,A,x,l,S],F=Rn.apply(C,k);return ni(t)&&Wa(F,k),F.placeholder=E,F}}var j=h?n:this,D=d?j[t]:t;return o&&(b=ui(b,o)),f&&l<b.length&&(b.length=l),this&&this!==ie&&this instanceof c&&(D=v||_n(t)),D.apply(j,b)}var f=e&k,h=e&O,d=e&M,p=e&N,g=e&A,m=e&I,v=d?C:_n(t);return c}function Ln(t,e,n){var i=t.length;if(e=+e,i>=e||!wa(e))return"";var r=e-i;return n=null==n?" ":n+"",vs(n,ma(r/n.length)).slice(0,r)}function kn(t,e,n,i){function r(){for(var e=-1,o=arguments.length,l=-1,u=i.length,c=Bs(u+o);++l<u;)c[l]=i[l];for(;o--;)c[l++]=arguments[++e];var f=this&&this!==ie&&this instanceof r?a:t;return f.apply(s?n:this,c)}var s=e&O,a=_n(t);return r}function Fn(t){var e=Xs[t];return function(t,n){return n=n===C?0:+n||0,n?(n=ua(10,n),e(t*n)/n):e(t)}}function jn(t){return function(e,n,i,r){var s=zn(i);return null==i&&s===be?sn(e,n,t):an(e,n,s(i,r,1),t)}}function $n(t,e,n,i,r,s,a,o){var l=e&M;if(!l&&"function"!=typeof t)throw new Ks(X);var u=i?i.length:0;if(u||(e&=~(R|L),i=r=C),u-=r?r.length:0,e&L){var c=i,f=r;i=r=C}var h=l?C:Ba(t),d=[t,e,n,i,r,c,f,s,a,o];if(h&&(si(d,h),e=d[1],o=d[9]),d[9]=null==o?l?0:t.length:Ea(o-u,0)||0,e==O)var p=gn(d[0],d[2]);else p=e!=R&&e!=(O|R)||d[4].length?Rn.apply(C,d):kn.apply(C,d);var g=h?Ha:Wa;return g(p,d)}function Dn(t,e,n,i,r,s,a){var o=-1,l=t.length,u=e.length;if(l!=u&&!(r&&u>l))return!1;for(;++o<l;){var c=t[o],f=e[o],h=i?i(r?f:c,r?c:f,o):C;if(h!==C){if(h)continue;return!1}if(r){if(!de(e,function(t){return c===t||n(c,t,i,r,s,a)}))return!1}else if(c!==f&&!n(c,f,i,r,s,a))return!1}return!0}function Hn(t,e,n){switch(n){case q:case K:return+t==+e;case J:return t.name==e.name&&t.message==e.message;case tt:return t!=+t?e!=+e:t==+e;case nt:case rt:return t==e+""}return!1}function Bn(t,e,n,i,r,s,a){var o=Bo(t),l=o.length,u=Bo(e),c=u.length;if(l!=c&&!r)return!1;for(var f=l;f--;){var h=o[f];if(!(r?h in e:ea.call(e,h)))return!1}for(var d=r;++f<l;){h=o[f];var p=t[h],g=e[h],m=i?i(r?g:p,r?p:g,h):C;if(!(m===C?n(p,g,i,r,s,a):m))return!1;d||(d="constructor"==h)}if(!d){var v=t.constructor,_=e.constructor;if(v!=_&&"constructor"in t&&"constructor"in e&&!("function"==typeof v&&v instanceof v&&"function"==typeof _&&_ instanceof _))return!1}return!0}function zn(t,n,i){var r=e.callback||Cs;return r=r===Cs?be:r,i?r(t,n,i):r}function Wn(t){for(var e=t.name,n=La[e],i=n?n.length:0;i--;){var r=n[i],s=r.func;if(null==s||s==t)return r.name}return e}function Un(t,n,i){var r=e.indexOf||Si;return r=r===Si?a:r,t?r(t,n,i):r}function Xn(t){for(var e=ns(t),n=e.length;n--;)e[n][2]=ri(e[n][1]);return e}function Yn(t,e){var n=null==t?C:t[e];return $r(n)?n:C}function Gn(t,e,n){for(var i=-1,r=n.length;++i<r;){var s=n[i],a=s.size;switch(s.type){case"drop":t+=a;break;case"dropRight":e-=a;break;case"take":e=Ta(e,t+a);break;case"takeRight":t=Ea(t,e-a)}}return{start:t,end:e}}function Vn(t){var e=t.length,n=new t.constructor(e);return e&&"string"==typeof t[0]&&ea.call(t,"index")&&(n.index=t.index,n.input=t.input),n}function qn(t){var e=t.constructor;return"function"==typeof e&&e instanceof e||(e=Gs),new e}function Kn(t,e,n){var i=t.constructor;switch(e){case at:return ln(t);case q:case K:return new i(+t);case ot:case lt:case ut:case ct:case ft:case ht:case dt:case pt:case gt:var r=t.buffer;return new i(n?ln(r):r,t.byteOffset,t.length);case tt:case rt:return new i(t);case nt:var s=new i(t.source,Lt.exec(t));s.lastIndex=t.lastIndex}return s}function Jn(t,e,n){null==t||ei(e,t)||(e=di(e),t=1==e.length?t:ke(t,qe(e,0,-1)),e=Pi(e));var i=null==t?t:t[e];return null==i?C:i.apply(t,n)}function Zn(t){return null!=t&&ii(za(t))}function Qn(t,e){return t="number"==typeof t||jt.test(t)?+t:-1,e=null==e?Ia:e,t>-1&&t%1==0&&t<e}function ti(t,e,n){if(!kr(n))return!1;var i=typeof e;if("number"==i?Zn(n)&&Qn(e,n.length):"string"==i&&e in n){var r=n[e];return t===t?t===r:r!==r}return!1}function ei(t,e){var n=typeof t;if("string"==n&&Pt.test(t)||"number"==n)return!0;if(Ao(t))return!1;var i=!Ct.test(t);return i||null!=e&&t in hi(e)}function ni(t){var n=Wn(t);if(!(n in y.prototype))return!1;var i=e[n];if(t===i)return!0;var r=Ba(i);return!!r&&t===r[0]}function ii(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=Ia}function ri(t){return t===t&&!kr(t)}function si(t,e){var n=t[1],i=e[1],r=n|i,s=r<k,a=i==k&&n==N||i==k&&n==F&&t[7].length<=e[8]||i==(k|F)&&n==N;if(!s&&!a)return t;i&O&&(t[2]=e[2],r|=n&O?0:A);var o=e[3];if(o){var l=t[3];t[3]=l?un(l,o,e[4]):ee(o),t[4]=l?w(t[3],Y):ee(e[4])}return o=e[5],o&&(l=t[5],t[5]=l?cn(l,o,e[6]):ee(o),t[6]=l?w(t[5],Y):ee(e[6])),o=e[7],o&&(t[7]=ee(o)),i&k&&(t[8]=null==t[8]?e[8]:Ta(t[8],e[8])),null==t[9]&&(t[9]=e[9]),t[0]=e[0],t[1]=r,t}function ai(t,e){return t===C?e:No(t,e,ai)}function oi(t,e){t=hi(t);for(var n=-1,i=e.length,r={};++n<i;){var s=e[n];s in t&&(r[s]=t[s])}return r}function li(t,e){var n={};return Ne(t,function(t,i,r){e(t,i,r)&&(n[i]=t)}),n}function ui(t,e){for(var n=t.length,i=Ta(e.length,n),r=ee(t);i--;){var s=e[i];t[i]=Qn(s,n)?r[s]:C}return t}function ci(t){for(var e=es(t),n=e.length,i=n&&t.length,r=!!i&&ii(i)&&(Ao(t)||Cr(t)),s=-1,a=[];++s<n;){var o=e[s];(r&&Qn(o,i)||ea.call(t,o))&&a.push(o)}return a}function fi(t){return null==t?[]:Zn(t)?kr(t)?t:Gs(t):as(t)}function hi(t){return kr(t)?t:Gs(t)}function di(t){if(Ao(t))return t;var e=[];return l(t).replace(Ot,function(t,n,i,r){e.push(i?r.replace(It,"$1"):n||t)}),e}function pi(t){return t instanceof y?t.clone():new i(t.__wrapped__,t.__chain__,ee(t.__actions__))}function gi(t,e,n){e=(n?ti(t,e,n):null==e)?1:Ea(_a(e)||1,1);for(var i=0,r=t?t.length:0,s=-1,a=Bs(ma(r/e));i<r;)a[++s]=qe(t,i,i+=e);return a}function mi(t){for(var e=-1,n=t?t.length:0,i=-1,r=[];++e<n;){var s=t[e];s&&(r[++i]=s)}return r}function vi(t,e,n){var i=t?t.length:0;return i?((n?ti(t,e,n):null==e)&&(e=1),qe(t,e<0?0:e)):[]}function _i(t,e,n){var i=t?t.length:0;return i?((n?ti(t,e,n):null==e)&&(e=1),e=i-(+e||0),qe(t,0,e<0?0:e)):[]}function yi(t,e,n){return t&&t.length?nn(t,zn(e,n,3),!0,!0):[]}function wi(t,e,n){return t&&t.length?nn(t,zn(e,n,3),!0):[]}function bi(t,e,n,i){var r=t?t.length:0;return r?(n&&"number"!=typeof n&&ti(t,e,n)&&(n=0,i=r),Pe(t,e,n,i)):[]}function Ei(t){return t?t[0]:C}function Ti(t,e,n){var i=t?t.length:0;return n&&ti(t,e,n)&&(e=!1),i?Ae(t,e):[]}function xi(t){var e=t?t.length:0;return e?Ae(t,!0):[]}function Si(t,e,n){var i=t?t.length:0;if(!i)return-1;if("number"==typeof n)n=n<0?Ea(i+n,0):n;else if(n){var r=sn(t,e);return r<i&&(e===e?e===t[r]:t[r]!==t[r])?r:-1}return a(t,e,n||0)}function Ci(t){return _i(t,1)}function Pi(t){var e=t?t.length:0;return e?t[e-1]:C}function Oi(t,e,n){var i=t?t.length:0;if(!i)return-1;var r=i;if("number"==typeof n)r=(n<0?Ea(i+n,0):Ta(n||0,i-1))+1;else if(n){r=sn(t,e,!0)-1;var s=t[r];return(e===e?e===s:s!==s)?r:-1}if(e!==e)return v(t,r,!0);for(;r--;)if(t[r]===e)return r;return-1}function Mi(){var t=arguments,e=t[0];if(!e||!e.length)return e;for(var n=0,i=Un(),r=t.length;++n<r;)for(var s=0,a=t[n];(s=i(e,a,s))>-1;)da.call(e,s,1);return e}function Ai(t,e,n){var i=[];if(!t||!t.length)return i;var r=-1,s=[],a=t.length;for(e=zn(e,n,3);++r<a;){var o=t[r];e(o,r,t)&&(i.push(o),s.push(r))}return Ye(t,s),i}function Ni(t){return vi(t,1)}function Ii(t,e,n){var i=t?t.length:0;return i?(n&&"number"!=typeof n&&ti(t,e,n)&&(e=0,n=i),qe(t,e,n)):[]}function Ri(t,e,n){var i=t?t.length:0;return i?((n?ti(t,e,n):null==e)&&(e=1),qe(t,0,e<0?0:e)):[]}function Li(t,e,n){var i=t?t.length:0;return i?((n?ti(t,e,n):null==e)&&(e=1),e=i-(+e||0),qe(t,e<0?0:e)):[]}function ki(t,e,n){return t&&t.length?nn(t,zn(e,n,3),!1,!0):[]}function Fi(t,e,n){return t&&t.length?nn(t,zn(e,n,3)):[]}function ji(t,e,n,i){var r=t?t.length:0;if(!r)return[];null!=e&&"boolean"!=typeof e&&(i=n,n=ti(t,e,i)?C:e,e=!1);var s=zn();return null==n&&s===be||(n=s(n,i,3)),e&&Un()==a?b(t,n):tn(t,n)}function $i(t){if(!t||!t.length)return[];var e=-1,n=0;t=le(t,function(t){if(Zn(t))return n=Ea(t.length,n),!0});for(var i=Bs(n);++e<n;)i[e]=ue(t,Ue(e));return i}function Di(t,e,n){var i=t?t.length:0;if(!i)return[];var r=$i(t);return null==e?r:(e=on(e,n,4),ue(r,function(t){return fe(t,e,C,!0)}))}function Hi(){for(var t=-1,e=arguments.length;++t<e;){var n=arguments[t];if(Zn(n))var i=i?ce(xe(i,n),xe(n,i)):n}return i?tn(i):[]}function Bi(t,e){var n=-1,i=t?t.length:0,r={};for(!i||e||Ao(t[0])||(e=[]);++n<i;){var s=t[n];e?r[s]=e[n]:s&&(r[s[0]]=s[1])}return r}function zi(t){var n=e(t);return n.__chain__=!0,n}function Wi(t,e,n){return e.call(n,t),t}function Ui(t,e,n){return e.call(n,t)}function Xi(){return zi(this)}function Yi(){return new i(this.value(),this.__chain__)}function Gi(t){for(var e,i=this;i instanceof n;){var r=pi(i);e?s.__wrapped__=r:e=r;var s=r;i=i.__wrapped__}return s.__wrapped__=t,e}function Vi(){var t=this.__wrapped__,e=function(t){return n&&n.__dir__<0?t:t.reverse()};if(t instanceof y){var n=t;return this.__actions__.length&&(n=new y(this)),n=n.reverse(),n.__actions__.push({func:Ui,args:[e],thisArg:C}),new i(n,this.__chain__)}return this.thru(e)}function qi(){return this.value()+""}function Ki(){return rn(this.__wrapped__,this.__actions__)}function Ji(t,e,n){var i=Ao(t)?ae:Se;return n&&ti(t,e,n)&&(e=C),"function"==typeof e&&n===C||(e=zn(e,n,3)),i(t,e)}function Zi(t,e,n){var i=Ao(t)?le:Oe;return e=zn(e,n,3),i(t,e)}function Qi(t,e){return ro(t,He(e))}function tr(t,e,n,i){var r=t?za(t):0;return ii(r)||(t=as(t),r=t.length),n="number"!=typeof n||i&&ti(e,n,i)?0:n<0?Ea(r+n,0):n||0,"string"==typeof t||!Ao(t)&&Wr(t)?n<=r&&t.indexOf(e,n)>-1:!!r&&Un(t,e,n)>-1}function er(t,e,n){var i=Ao(t)?ue:De;return e=zn(e,n,3),i(t,e)}function nr(t,e){return er(t,Ls(e))}function ir(t,e,n){var i=Ao(t)?le:Oe;return e=zn(e,n,3),i(t,function(t,n,i){return!e(t,n,i)})}function rr(t,e,n){if(n?ti(t,e,n):null==e){t=fi(t);var i=t.length;return i>0?t[Ge(0,i-1)]:C}var r=-1,s=Vr(t),i=s.length,a=i-1;for(e=Ta(e<0?0:+e||0,i);++r<e;){var o=Ge(r,a),l=s[o];s[o]=s[r],s[r]=l}return s.length=e,s}function sr(t){return rr(t,Oa)}function ar(t){var e=t?za(t):0;return ii(e)?e:Bo(t).length}function or(t,e,n){var i=Ao(t)?de:Ke;return n&&ti(t,e,n)&&(e=C),"function"==typeof e&&n===C||(e=zn(e,n,3)),i(t,e)}function lr(t,e,n){if(null==t)return[];n&&ti(t,e,n)&&(e=C);var i=-1;e=zn(e,n,3);var r=De(t,function(t,n,r){return{criteria:e(t,n,r),index:++i,value:t}});return Je(r,f)}function ur(t,e,n,i){return null==t?[]:(i&&ti(e,n,i)&&(n=C),Ao(e)||(e=null==e?[]:[e]),Ao(n)||(n=null==n?[]:[n]),Ze(t,e,n))}function cr(t,e){return Zi(t,He(e))}function fr(t,e){if("function"!=typeof e){if("function"!=typeof t)throw new Ks(X);var n=t;t=e,e=n}return t=wa(t=+t)?t:0,function(){if(--t<1)return e.apply(this,arguments)}}function hr(t,e,n){return n&&ti(t,e,n)&&(e=C),e=t&&null==e?t.length:Ea(+e||0,0),$n(t,k,C,C,C,C,e)}function dr(t,e){var n;if("function"!=typeof e){if("function"!=typeof t)throw new Ks(X);var i=t;t=e,e=i}return function(){return--t>0&&(n=e.apply(this,arguments)),t<=1&&(e=C),n}}function pr(t,e,n){function i(){d&&oa(d),u&&oa(u),g=0,u=d=p=C}function r(e,n){n&&oa(n),u=d=p=C,e&&(g=mo(),c=t.apply(h,l),d||u||(l=h=C))}function s(){var t=e-(mo()-f);t<=0||t>e?r(p,u):d=ha(s,t)}function a(){r(v,d)}function o(){if(l=arguments,f=mo(),h=this,p=v&&(d||!_),m===!1)var n=_&&!d;else{u||_||(g=f);var i=m-(f-g),r=i<=0||i>m;r?(u&&(u=oa(u)),g=f,c=t.apply(h,l)):u||(u=ha(a,i))}return r&&d?d=oa(d):d||e===m||(d=ha(s,e)),n&&(r=!0,c=t.apply(h,l)),!r||d||u||(l=h=C),c}var l,u,c,f,h,d,p,g=0,m=!1,v=!0;if("function"!=typeof t)throw new Ks(X);if(e=e<0?0:+e||0,n===!0){var _=!0;v=!1}else kr(n)&&(_=!!n.leading,m="maxWait"in n&&Ea(+n.maxWait||0,e),v="trailing"in n?!!n.trailing:v);return o.cancel=i,o}function gr(t,e){if("function"!=typeof t||e&&"function"!=typeof e)throw new Ks(X);var n=function(){var i=arguments,r=e?e.apply(this,i):i[0],s=n.cache;if(s.has(r))return s.get(r);var a=t.apply(this,i);return n.cache=s.set(r,a),a};return n.cache=new gr.Cache,n}function mr(t){if("function"!=typeof t)throw new Ks(X);return function(){return!t.apply(this,arguments)}}function vr(t){return dr(2,t)}function _r(t,e){if("function"!=typeof t)throw new Ks(X);return e=Ea(e===C?t.length-1:+e||0,0),function(){for(var n=arguments,i=-1,r=Ea(n.length-e,0),s=Bs(r);++i<r;)s[i]=n[e+i];switch(e){case 0:return t.call(this,s);case 1:return t.call(this,n[0],s);case 2:return t.call(this,n[0],n[1],s)}var a=Bs(e+1);for(i=-1;++i<e;)a[i]=n[i];return a[e]=s,t.apply(this,a)}}function yr(t){if("function"!=typeof t)throw new Ks(X);return function(e){return t.apply(this,e)}}function wr(t,e,n){var i=!0,r=!0;if("function"!=typeof t)throw new Ks(X);return n===!1?i=!1:kr(n)&&(i="leading"in n?!!n.leading:i,r="trailing"in n?!!n.trailing:r),pr(t,e,{leading:i,maxWait:+e,trailing:r})}function br(t,e){return e=null==e?Os:e,$n(e,R,C,[t],[])}function Er(t,e,n,i){return e&&"boolean"!=typeof e&&ti(t,e,n)?e=!1:"function"==typeof e&&(i=n,n=e,e=!1),"function"==typeof n?Ee(t,e,on(n,i,1)):Ee(t,e)}function Tr(t,e,n){return"function"==typeof e?Ee(t,!0,on(e,n,1)):Ee(t,!0)}function xr(t,e){return t>e}function Sr(t,e){return t>=e}function Cr(t){return _(t)&&Zn(t)&&ea.call(t,"callee")&&!ca.call(t,"callee")}function Pr(t){return t===!0||t===!1||_(t)&&ia.call(t)==q}function Or(t){return _(t)&&ia.call(t)==K}function Mr(t){return!!t&&1===t.nodeType&&_(t)&&!Br(t)}function Ar(t){return null==t||(Zn(t)&&(Ao(t)||Wr(t)||Cr(t)||_(t)&&Lr(t.splice))?!t.length:!Bo(t).length)}function Nr(t,e,n,i){n="function"==typeof n?on(n,i,3):C;var r=n?n(t,e):C;return r===C?Fe(t,e,n):!!r}function Ir(t){return _(t)&&"string"==typeof t.message&&ia.call(t)==J}function Rr(t){return"number"==typeof t&&wa(t)}function Lr(t){return kr(t)&&ia.call(t)==Z}function kr(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function Fr(t,e,n,i){return n="function"==typeof n?on(n,i,3):C,$e(t,Xn(e),n)}function jr(t){return Hr(t)&&t!=+t}function $r(t){return null!=t&&(Lr(t)?sa.test(ta.call(t)):_(t)&&Ft.test(t))}function Dr(t){return null===t}function Hr(t){return"number"==typeof t||_(t)&&ia.call(t)==tt}function Br(t){var e;if(!_(t)||ia.call(t)!=et||Cr(t)||!ea.call(t,"constructor")&&(e=t.constructor,"function"==typeof e&&!(e instanceof e)))return!1;var n;return Ne(t,function(t,e){n=e}),n===C||ea.call(t,n)}function zr(t){return kr(t)&&ia.call(t)==nt}function Wr(t){return"string"==typeof t||_(t)&&ia.call(t)==rt}function Ur(t){return _(t)&&ii(t.length)&&!!Ut[ia.call(t)]}function Xr(t){return t===C}function Yr(t,e){return t<e}function Gr(t,e){return t<=e}function Vr(t){var e=t?za(t):0;return ii(e)?e?ee(t):[]:as(t)}function qr(t){return we(t,es(t))}function Kr(t,e,n){var i=ka(t);return n&&ti(t,e,n)&&(e=C),e?_e(i,e):i}function Jr(t){return Le(t,es(t))}function Zr(t,e,n){var i=null==t?C:ke(t,di(e),e+"");return i===C?n:i}function Qr(t,e){if(null==t)return!1;var n=ea.call(t,e);if(!n&&!ei(e)){if(e=di(e),t=1==e.length?t:ke(t,qe(e,0,-1)),null==t)return!1;e=Pi(e),n=ea.call(t,e)}return n||ii(t.length)&&Qn(e,t.length)&&(Ao(t)||Cr(t))}function ts(t,e,n){n&&ti(t,e,n)&&(e=C);for(var i=-1,r=Bo(t),s=r.length,a={};++i<s;){var o=r[i],l=t[o];e?ea.call(a,l)?a[l].push(o):a[l]=[o]:a[l]=o}return a}function es(t){if(null==t)return[];kr(t)||(t=Gs(t));var e=t.length;e=e&&ii(e)&&(Ao(t)||Cr(t))&&e||0;for(var n=t.constructor,i=-1,r="function"==typeof n&&n.prototype===t,s=Bs(e),a=e>0;++i<e;)s[i]=i+"";for(var o in t)a&&Qn(o,e)||"constructor"==o&&(r||!ea.call(t,o))||s.push(o);return s}function ns(t){t=hi(t);for(var e=-1,n=Bo(t),i=n.length,r=Bs(i);++e<i;){var s=n[e];r[e]=[s,t[s]]}return r}function is(t,e,n){var i=null==t?C:t[e];return i===C&&(null==t||ei(e,t)||(e=di(e),t=1==e.length?t:ke(t,qe(e,0,-1)),i=null==t?C:t[Pi(e)]),
i=i===C?n:i),Lr(i)?i.call(t):i}function rs(t,e,n){if(null==t)return t;var i=e+"";e=null!=t[i]||ei(e,t)?[i]:di(e);for(var r=-1,s=e.length,a=s-1,o=t;null!=o&&++r<s;){var l=e[r];kr(o)&&(r==a?o[l]=n:null==o[l]&&(o[l]=Qn(e[r+1])?[]:{})),o=o[l]}return t}function ss(t,e,n,i){var r=Ao(t)||Ur(t);if(e=zn(e,i,4),null==n)if(r||kr(t)){var s=t.constructor;n=r?Ao(t)?new s:[]:ka(Lr(s)?s.prototype:C)}else n={};return(r?ne:Ie)(t,function(t,i,r){return e(n,t,i,r)}),n}function as(t){return en(t,Bo(t))}function os(t){return en(t,es(t))}function ls(t,e,n){return e=+e||0,n===C?(n=e,e=0):n=+n||0,t>=Ta(e,n)&&t<Ea(e,n)}function us(t,e,n){n&&ti(t,e,n)&&(e=n=C);var i=null==t,r=null==e;if(null==n&&(r&&"boolean"==typeof t?(n=t,t=1):"boolean"==typeof e&&(n=e,r=!0)),i&&r&&(e=1,r=!1),t=+t||0,r?(e=t,t=0):e=+e||0,n||t%1||e%1){var s=Ca();return Ta(t+s*(e-t+la("1e-"+((s+"").length-1))),e)}return Ge(t,e)}function cs(t){return t=l(t),t&&t.charAt(0).toUpperCase()+t.slice(1)}function fs(t){return t=l(t),t&&t.replace($t,d).replace(Nt,"")}function hs(t,e,n){t=l(t),e+="";var i=t.length;return n=n===C?i:Ta(n<0?0:+n||0,i),n-=e.length,n>=0&&t.indexOf(e,n)==n}function ds(t){return t=l(t),t&&Et.test(t)?t.replace(wt,p):t}function ps(t){return t=l(t),t&&At.test(t)?t.replace(Mt,g):t||"(?:)"}function gs(t,e,n){t=l(t),e=+e;var i=t.length;if(i>=e||!wa(e))return t;var r=(e-i)/2,s=_a(r),a=ma(r);return n=Ln("",a,n),n.slice(0,s)+t+n}function ms(t,e,n){return(n?ti(t,e,n):null==e)?e=0:e&&(e=+e),t=ws(t),Sa(t,e||(kt.test(t)?16:10))}function vs(t,e){var n="";if(t=l(t),e=+e,e<1||!t||!wa(e))return n;do e%2&&(n+=t),e=_a(e/2),t+=t;while(e);return n}function _s(t,e,n){return t=l(t),n=null==n?0:Ta(n<0?0:+n||0,t.length),t.lastIndexOf(e,n)==n}function ys(t,n,i){var r=e.templateSettings;i&&ti(t,n,i)&&(n=i=C),t=l(t),n=ve(_e({},i||n),r,me);var s,a,o=ve(_e({},n.imports),r.imports,me),u=Bo(o),c=en(o,u),f=0,h=n.interpolate||Dt,d="__p += '",p=Vs((n.escape||Dt).source+"|"+h.source+"|"+(h===St?Rt:Dt).source+"|"+(n.evaluate||Dt).source+"|$","g"),g="//# sourceURL="+("sourceURL"in n?n.sourceURL:"lodash.templateSources["+ ++Wt+"]")+"\n";t.replace(p,function(e,n,i,r,o,l){return i||(i=r),d+=t.slice(f,l).replace(Ht,m),n&&(s=!0,d+="' +\n__e("+n+") +\n'"),o&&(a=!0,d+="';\n"+o+";\n__p += '"),i&&(d+="' +\n((__t = ("+i+")) == null ? '' : __t) +\n'"),f=l+e.length,e}),d+="';\n";var v=n.variable;v||(d="with (obj) {\n"+d+"\n}\n"),d=(a?d.replace(mt,""):d).replace(vt,"$1").replace(_t,"$1;"),d="function("+(v||"obj")+") {\n"+(v?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(s?", __e = _.escape":"")+(a?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+d+"return __p\n}";var _=Zo(function(){return Us(u,g+"return "+d).apply(C,c)});if(_.source=d,Ir(_))throw _;return _}function ws(t,e,n){var i=t;return(t=l(t))?(n?ti(i,e,n):null==e)?t.slice(E(t),T(t)+1):(e+="",t.slice(u(t,e),c(t,e)+1)):t}function bs(t,e,n){var i=t;return t=l(t),t?(n?ti(i,e,n):null==e)?t.slice(E(t)):t.slice(u(t,e+"")):t}function Es(t,e,n){var i=t;return t=l(t),t?(n?ti(i,e,n):null==e)?t.slice(0,T(t)+1):t.slice(0,c(t,e+"")+1):t}function Ts(t,e,n){n&&ti(t,e,n)&&(e=C);var i=j,r=D;if(null!=e)if(kr(e)){var s="separator"in e?e.separator:s;i="length"in e?+e.length||0:i,r="omission"in e?l(e.omission):r}else i=+e||0;if(t=l(t),i>=t.length)return t;var a=i-r.length;if(a<1)return r;var o=t.slice(0,a);if(null==s)return o+r;if(zr(s)){if(t.slice(a).search(s)){var u,c,f=t.slice(0,a);for(s.global||(s=Vs(s.source,(Lt.exec(s)||"")+"g")),s.lastIndex=0;u=s.exec(f);)c=u.index;o=o.slice(0,null==c?a:c)}}else if(t.indexOf(s,a)!=a){var h=o.lastIndexOf(s);h>-1&&(o=o.slice(0,h))}return o+r}function xs(t){return t=l(t),t&&bt.test(t)?t.replace(yt,x):t}function Ss(t,e,n){return n&&ti(t,e,n)&&(e=C),t=l(t),t.match(e||Bt)||[]}function Cs(t,e,n){return n&&ti(t,e,n)&&(e=C),_(t)?Ms(t):be(t,e)}function Ps(t){return function(){return t}}function Os(t){return t}function Ms(t){return He(Ee(t,!0))}function As(t,e){return Be(t,Ee(e,!0))}function Ns(t,e,n){if(null==n){var i=kr(e),r=i?Bo(e):C,s=r&&r.length?Le(e,r):C;(s?s.length:i)||(s=!1,n=e,e=t,t=this)}s||(s=Le(e,Bo(e)));var a=!0,o=-1,l=Lr(t),u=s.length;n===!1?a=!1:kr(n)&&"chain"in n&&(a=n.chain);for(;++o<u;){var c=s[o],f=e[c];t[c]=f,l&&(t.prototype[c]=function(e){return function(){var n=this.__chain__;if(a||n){var i=t(this.__wrapped__),r=i.__actions__=ee(this.__actions__);return r.push({func:e,args:arguments,thisArg:t}),i.__chain__=n,i}return e.apply(t,ce([this.value()],arguments))}}(f))}return t}function Is(){return ie._=ra,this}function Rs(){}function Ls(t){return ei(t)?Ue(t):Xe(t)}function ks(t){return function(e){return ke(t,di(e),e+"")}}function Fs(t,e,n){n&&ti(t,e,n)&&(e=n=C),t=+t||0,n=null==n?1:+n||0,null==e?(e=t,t=0):e=+e||0;for(var i=-1,r=Ea(ma((e-t)/(n||1)),0),s=Bs(r);++i<r;)s[i]=t,t+=n;return s}function js(t,e,n){if(t=_a(t),t<1||!wa(t))return[];var i=-1,r=Bs(Ta(t,Ma));for(e=on(e,n,1);++i<t;)i<Ma?r[i]=e(i):e(i);return r}function $s(t){var e=++na;return l(t)+e}function Ds(t,e){return(+t||0)+(+e||0)}function Hs(t,e,n){return n&&ti(t,e,n)&&(e=C),e=zn(e,n,3),1==e.length?pe(Ao(t)?t:fi(t),e):Qe(t,e)}t=t?re.defaults(ie.Object(),t,re.pick(ie,zt)):ie;var Bs=t.Array,zs=t.Date,Ws=t.Error,Us=t.Function,Xs=t.Math,Ys=t.Number,Gs=t.Object,Vs=t.RegExp,qs=t.String,Ks=t.TypeError,Js=Bs.prototype,Zs=Gs.prototype,Qs=qs.prototype,ta=Us.prototype.toString,ea=Zs.hasOwnProperty,na=0,ia=Zs.toString,ra=ie._,sa=Vs("^"+ta.call(ea).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),aa=t.ArrayBuffer,oa=t.clearTimeout,la=t.parseFloat,ua=Xs.pow,ca=Zs.propertyIsEnumerable,fa=Yn(t,"Set"),ha=t.setTimeout,da=Js.splice,pa=t.Uint8Array,ga=Yn(t,"WeakMap"),ma=Xs.ceil,va=Yn(Gs,"create"),_a=Xs.floor,ya=Yn(Bs,"isArray"),wa=t.isFinite,ba=Yn(Gs,"keys"),Ea=Xs.max,Ta=Xs.min,xa=Yn(zs,"now"),Sa=t.parseInt,Ca=Xs.random,Pa=Ys.NEGATIVE_INFINITY,Oa=Ys.POSITIVE_INFINITY,Ma=4294967295,Aa=Ma-1,Na=Ma>>>1,Ia=9007199254740991,Ra=ga&&new ga,La={};e.support={};e.templateSettings={escape:Tt,evaluate:xt,interpolate:St,variable:"",imports:{_:e}};var ka=function(){function t(){}return function(e){if(kr(e)){t.prototype=e;var n=new t;t.prototype=C}return n||{}}}(),Fa=dn(Ie),ja=dn(Re,!0),$a=pn(),Da=pn(!0),Ha=Ra?function(t,e){return Ra.set(t,e),t}:Os,Ba=Ra?function(t){return Ra.get(t)}:Rs,za=Ue("length"),Wa=function(){var t=0,e=0;return function(n,i){var r=mo(),s=B-(r-e);if(e=r,s>0){if(++t>=H)return n}else t=0;return Ha(n,i)}}(),Ua=_r(function(t,e){return _(t)&&Zn(t)?xe(t,Ae(e,!1,!0)):[]}),Xa=Tn(),Ya=Tn(!0),Ga=_r(function(t){for(var e=t.length,n=e,i=Bs(f),r=Un(),s=r==a,o=[];n--;){var l=t[n]=Zn(l=t[n])?l:[];i[n]=s&&l.length>=120?mn(n&&l):null}var u=t[0],c=-1,f=u?u.length:0,h=i[0];t:for(;++c<f;)if(l=u[c],(h?Zt(h,l):r(o,l,0))<0){for(var n=e;--n;){var d=i[n];if((d?Zt(d,l):r(t[n],l,0))<0)continue t}h&&h.push(l),o.push(l)}return o}),Va=_r(function(t,e){e=Ae(e);var n=ye(t,e);return Ye(t,e.sort(r)),n}),qa=jn(),Ka=jn(!0),Ja=_r(function(t){return tn(Ae(t,!1,!0))}),Za=_r(function(t,e){return Zn(t)?xe(t,e):[]}),Qa=_r($i),to=_r(function(t){var e=t.length,n=e>2?t[e-2]:C,i=e>1?t[e-1]:C;return e>2&&"function"==typeof n?e-=2:(n=e>1&&"function"==typeof i?(--e,i):C,i=C),t.length=e,Di(t,n,i)}),eo=_r(function(t){return t=Ae(t),this.thru(function(e){return te(Ao(e)?e:[hi(e)],t)})}),no=_r(function(t,e){return ye(t,Ae(e))}),io=fn(function(t,e,n){ea.call(t,n)?++t[n]:t[n]=1}),ro=En(Fa),so=En(ja,!0),ao=Cn(ne,Fa),oo=Cn(se,ja),lo=fn(function(t,e,n){ea.call(t,n)?t[n].push(e):t[n]=[e]}),uo=fn(function(t,e,n){t[n]=e}),co=_r(function(t,e,n){var i=-1,r="function"==typeof e,s=ei(e),a=Zn(t)?Bs(t.length):[];return Fa(t,function(t){var o=r?e:s&&null!=t?t[e]:C;a[++i]=o?o.apply(t,n):Jn(t,e,n)}),a}),fo=fn(function(t,e,n){t[n?0:1].push(e)},function(){return[[],[]]}),ho=In(fe,Fa),po=In(he,ja),go=_r(function(t,e){if(null==t)return[];var n=e[2];return n&&ti(e[0],e[1],n)&&(e.length=1),Ze(t,Ae(e),[])}),mo=xa||function(){return(new zs).getTime()},vo=_r(function(t,e,n){var i=O;if(n.length){var r=w(n,vo.placeholder);i|=R}return $n(t,i,e,n,r)}),_o=_r(function(t,e){e=e.length?Ae(e):Jr(t);for(var n=-1,i=e.length;++n<i;){var r=e[n];t[r]=$n(t[r],O,t)}return t}),yo=_r(function(t,e,n){var i=O|M;if(n.length){var r=w(n,yo.placeholder);i|=R}return $n(e,i,t,n,r)}),wo=yn(N),bo=yn(I),Eo=_r(function(t,e){return Te(t,1,e)}),To=_r(function(t,e,n){return Te(t,e,n)}),xo=Sn(),So=Sn(!0),Co=_r(function(t,e){if(e=Ae(e),"function"!=typeof t||!ae(e,o))throw new Ks(X);var n=e.length;return _r(function(i){for(var r=Ta(i.length,n);r--;)i[r]=e[r](i[r]);return t.apply(this,i)})}),Po=Nn(R),Oo=Nn(L),Mo=_r(function(t,e){return $n(t,F,C,C,C,Ae(e))}),Ao=ya||function(t){return _(t)&&ii(t.length)&&ia.call(t)==V},No=hn(ze),Io=hn(function(t,e,n){return n?ve(t,e,n):_e(t,e)}),Ro=wn(Io,ge),Lo=wn(No,ai),ko=xn(Ie),Fo=xn(Re),jo=Pn($a),$o=Pn(Da),Do=On(Ie),Ho=On(Re),Bo=ba?function(t){var e=null==t?C:t.constructor;return"function"==typeof e&&e.prototype===t||"function"!=typeof t&&Zn(t)?ci(t):kr(t)?ba(t):[]}:ci,zo=Mn(!0),Wo=Mn(),Uo=_r(function(t,e){if(null==t)return{};if("function"!=typeof e[0]){var e=ue(Ae(e),qs);return oi(t,xe(es(t),e))}var n=on(e[0],e[1],3);return li(t,function(t,e,i){return!n(t,e,i)})}),Xo=_r(function(t,e){return null==t?{}:"function"==typeof e[0]?li(t,on(e[0],e[1],3)):oi(t,Ae(e))}),Yo=vn(function(t,e,n){return e=e.toLowerCase(),t+(n?e.charAt(0).toUpperCase()+e.slice(1):e)}),Go=vn(function(t,e,n){return t+(n?"-":"")+e.toLowerCase()}),Vo=An(),qo=An(!0),Ko=vn(function(t,e,n){return t+(n?"_":"")+e.toLowerCase()}),Jo=vn(function(t,e,n){return t+(n?" ":"")+(e.charAt(0).toUpperCase()+e.slice(1))}),Zo=_r(function(t,e){try{return t.apply(C,e)}catch(t){return Ir(t)?t:new Ws(t)}}),Qo=_r(function(t,e){return function(n){return Jn(n,t,e)}}),tl=_r(function(t,e){return function(n){return Jn(t,n,e)}}),el=Fn("ceil"),nl=Fn("floor"),il=bn(xr,Pa),rl=bn(Yr,Oa),sl=Fn("round");return e.prototype=n.prototype,i.prototype=ka(n.prototype),i.prototype.constructor=i,y.prototype=ka(n.prototype),y.prototype.constructor=y,Yt.prototype.delete=Gt,Yt.prototype.get=Vt,Yt.prototype.has=qt,Yt.prototype.set=Kt,Jt.prototype.push=Qt,gr.Cache=Yt,e.after=fr,e.ary=hr,e.assign=Io,e.at=no,e.before=dr,e.bind=vo,e.bindAll=_o,e.bindKey=yo,e.callback=Cs,e.chain=zi,e.chunk=gi,e.compact=mi,e.constant=Ps,e.countBy=io,e.create=Kr,e.curry=wo,e.curryRight=bo,e.debounce=pr,e.defaults=Ro,e.defaultsDeep=Lo,e.defer=Eo,e.delay=To,e.difference=Ua,e.drop=vi,e.dropRight=_i,e.dropRightWhile=yi,e.dropWhile=wi,e.fill=bi,e.filter=Zi,e.flatten=Ti,e.flattenDeep=xi,e.flow=xo,e.flowRight=So,e.forEach=ao,e.forEachRight=oo,e.forIn=jo,e.forInRight=$o,e.forOwn=Do,e.forOwnRight=Ho,e.functions=Jr,e.groupBy=lo,e.indexBy=uo,e.initial=Ci,e.intersection=Ga,e.invert=ts,e.invoke=co,e.keys=Bo,e.keysIn=es,e.map=er,e.mapKeys=zo,e.mapValues=Wo,e.matches=Ms,e.matchesProperty=As,e.memoize=gr,e.merge=No,e.method=Qo,e.methodOf=tl,e.mixin=Ns,e.modArgs=Co,e.negate=mr,e.omit=Uo,e.once=vr,e.pairs=ns,e.partial=Po,e.partialRight=Oo,e.partition=fo,e.pick=Xo,e.pluck=nr,e.property=Ls,e.propertyOf=ks,e.pull=Mi,e.pullAt=Va,e.range=Fs,e.rearg=Mo,e.reject=ir,e.remove=Ai,e.rest=Ni,e.restParam=_r,e.set=rs,e.shuffle=sr,e.slice=Ii,e.sortBy=lr,e.sortByAll=go,e.sortByOrder=ur,e.spread=yr,e.take=Ri,e.takeRight=Li,e.takeRightWhile=ki,e.takeWhile=Fi,e.tap=Wi,e.throttle=wr,e.thru=Ui,e.times=js,e.toArray=Vr,e.toPlainObject=qr,e.transform=ss,e.union=Ja,e.uniq=ji,e.unzip=$i,e.unzipWith=Di,e.values=as,e.valuesIn=os,e.where=cr,e.without=Za,e.wrap=br,e.xor=Hi,e.zip=Qa,e.zipObject=Bi,e.zipWith=to,e.backflow=So,e.collect=er,e.compose=So,e.each=ao,e.eachRight=oo,e.extend=Io,e.iteratee=Cs,e.methods=Jr,e.object=Bi,e.select=Zi,e.tail=Ni,e.unique=ji,Ns(e,e),e.add=Ds,e.attempt=Zo,e.camelCase=Yo,e.capitalize=cs,e.ceil=el,e.clone=Er,e.cloneDeep=Tr,e.deburr=fs,e.endsWith=hs,e.escape=ds,e.escapeRegExp=ps,e.every=Ji,e.find=ro,e.findIndex=Xa,e.findKey=ko,e.findLast=so,e.findLastIndex=Ya,e.findLastKey=Fo,e.findWhere=Qi,e.first=Ei,e.floor=nl,e.get=Zr,e.gt=xr,e.gte=Sr,e.has=Qr,e.identity=Os,e.includes=tr,e.indexOf=Si,e.inRange=ls,e.isArguments=Cr,e.isArray=Ao,e.isBoolean=Pr,e.isDate=Or,e.isElement=Mr,e.isEmpty=Ar,e.isEqual=Nr,e.isError=Ir,e.isFinite=Rr,e.isFunction=Lr,e.isMatch=Fr,e.isNaN=jr,e.isNative=$r,e.isNull=Dr,e.isNumber=Hr,e.isObject=kr,e.isPlainObject=Br,e.isRegExp=zr,e.isString=Wr,e.isTypedArray=Ur,e.isUndefined=Xr,e.kebabCase=Go,e.last=Pi,e.lastIndexOf=Oi,e.lt=Yr,e.lte=Gr,e.max=il,e.min=rl,e.noConflict=Is,e.noop=Rs,e.now=mo,e.pad=gs,e.padLeft=Vo,e.padRight=qo,e.parseInt=ms,e.random=us,e.reduce=ho,e.reduceRight=po,e.repeat=vs,e.result=is,e.round=sl,e.runInContext=S,e.size=ar,e.snakeCase=Ko,e.some=or,e.sortedIndex=qa,e.sortedLastIndex=Ka,e.startCase=Jo,e.startsWith=_s,e.sum=Hs,e.template=ys,e.trim=ws,e.trimLeft=bs,e.trimRight=Es,e.trunc=Ts,e.unescape=xs,e.uniqueId=$s,e.words=Ss,e.all=Ji,e.any=or,e.contains=tr,e.eq=Nr,e.detect=ro,e.foldl=ho,e.foldr=po,e.head=Ei,e.include=tr,e.inject=ho,Ns(e,function(){var t={};return Ie(e,function(n,i){e.prototype[i]||(t[i]=n)}),t}(),!1),e.sample=rr,e.prototype.sample=function(t){return this.__chain__||null!=t?this.thru(function(e){return rr(e,t)}):rr(this.value())},e.VERSION=P,ne(["bind","bindKey","curry","curryRight","partial","partialRight"],function(t){e[t].placeholder=e}),ne(["drop","take"],function(t,e){y.prototype[t]=function(n){var i=this.__filtered__;if(i&&!e)return new y(this);n=null==n?1:Ea(_a(n)||0,0);var r=this.clone();return i?r.__takeCount__=Ta(r.__takeCount__,n):r.__views__.push({size:n,type:t+(r.__dir__<0?"Right":"")}),r},y.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()}}),ne(["filter","map","takeWhile"],function(t,e){var n=e+1,i=n!=U;y.prototype[t]=function(t,e){var r=this.clone();return r.__iteratees__.push({iteratee:zn(t,e,1),type:n}),r.__filtered__=r.__filtered__||i,r}}),ne(["first","last"],function(t,e){var n="take"+(e?"Right":"");y.prototype[t]=function(){return this[n](1).value()[0]}}),ne(["initial","rest"],function(t,e){var n="drop"+(e?"":"Right");y.prototype[t]=function(){return this.__filtered__?new y(this):this[n](1)}}),ne(["pluck","where"],function(t,e){var n=e?"filter":"map",i=e?He:Ls;y.prototype[t]=function(t){return this[n](i(t))}}),y.prototype.compact=function(){return this.filter(Os)},y.prototype.reject=function(t,e){return t=zn(t,e,1),this.filter(function(e){return!t(e)})},y.prototype.slice=function(t,e){t=null==t?0:+t||0;var n=this;return n.__filtered__&&(t>0||e<0)?new y(n):(t<0?n=n.takeRight(-t):t&&(n=n.drop(t)),e!==C&&(e=+e||0,n=e<0?n.dropRight(-e):n.take(e-t)),n)},y.prototype.takeRightWhile=function(t,e){return this.reverse().takeWhile(t,e).reverse()},y.prototype.toArray=function(){return this.take(Oa)},Ie(y.prototype,function(t,n){var r=/^(?:filter|map|reject)|While$/.test(n),s=/^(?:first|last)$/.test(n),a=e[s?"take"+("last"==n?"Right":""):n];a&&(e.prototype[n]=function(){var e=s?[1]:arguments,n=this.__chain__,o=this.__wrapped__,l=!!this.__actions__.length,u=o instanceof y,c=e[0],f=u||Ao(o);f&&r&&"function"==typeof c&&1!=c.length&&(u=f=!1);var h=function(t){return s&&n?a(t,1)[0]:a.apply(C,ce([t],e))},d={func:Ui,args:[h],thisArg:C},p=u&&!l;if(s&&!n)return p?(o=o.clone(),o.__actions__.push(d),t.call(o)):a.call(C,this.value())[0];if(!s&&f){o=p?o:new y(this);var g=t.apply(o,e);return g.__actions__.push(d),new i(g,n)}return this.thru(h)})}),ne(["join","pop","push","replace","shift","sort","splice","split","unshift"],function(t){var n=(/^(?:replace|split)$/.test(t)?Qs:Js)[t],i=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",r=/^(?:join|pop|replace|shift)$/.test(t);e.prototype[t]=function(){var t=arguments;return r&&!this.__chain__?n.apply(this.value(),t):this[i](function(e){return n.apply(e,t)})}}),Ie(y.prototype,function(t,n){var i=e[n];if(i){var r=i.name,s=La[r]||(La[r]=[]);s.push({name:n,func:i})}}),La[Rn(C,M).name]=[{name:"wrapper",func:C}],y.prototype.clone=Q,y.prototype.reverse=it,y.prototype.value=st,e.prototype.chain=Xi,e.prototype.commit=Yi,e.prototype.concat=eo,e.prototype.plant=Gi,e.prototype.reverse=Vi,e.prototype.toString=qi,e.prototype.run=e.prototype.toJSON=e.prototype.valueOf=e.prototype.value=Ki,e.prototype.collect=e.prototype.map,e.prototype.head=e.prototype.first,e.prototype.select=e.prototype.filter,e.prototype.tail=e.prototype.rest,e}var C,P="3.10.1",O=1,M=2,A=4,N=8,I=16,R=32,L=64,k=128,F=256,j=30,D="...",H=150,B=16,z=200,W=1,U=2,X="Expected a function",Y="__lodash_placeholder__",G="[object Arguments]",V="[object Array]",q="[object Boolean]",K="[object Date]",J="[object Error]",Z="[object Function]",Q="[object Map]",tt="[object Number]",et="[object Object]",nt="[object RegExp]",it="[object Set]",rt="[object String]",st="[object WeakMap]",at="[object ArrayBuffer]",ot="[object Float32Array]",lt="[object Float64Array]",ut="[object Int8Array]",ct="[object Int16Array]",ft="[object Int32Array]",ht="[object Uint8Array]",dt="[object Uint8ClampedArray]",pt="[object Uint16Array]",gt="[object Uint32Array]",mt=/\b__p \+= '';/g,vt=/\b(__p \+=) '' \+/g,_t=/(__e\(.*?\)|\b__t\)) \+\n'';/g,yt=/&(?:amp|lt|gt|quot|#39|#96);/g,wt=/[&<>"'`]/g,bt=RegExp(yt.source),Et=RegExp(wt.source),Tt=/<%-([\s\S]+?)%>/g,xt=/<%([\s\S]+?)%>/g,St=/<%=([\s\S]+?)%>/g,Ct=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\n\\]|\\.)*?\1)\]/,Pt=/^\w*$/,Ot=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\n\\]|\\.)*?)\2)\]/g,Mt=/^[:!,]|[\\^$.*+?()[\]{}|\/]|(^[0-9a-fA-Fnrtuvx])|([\n\r\u2028\u2029])/g,At=RegExp(Mt.source),Nt=/[\u0300-\u036f\ufe20-\ufe23]/g,It=/\\(\\)?/g,Rt=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Lt=/\w*$/,kt=/^0[xX]/,Ft=/^\[object .+?Constructor\]$/,jt=/^\d+$/,$t=/[\xc0-\xd6\xd8-\xde\xdf-\xf6\xf8-\xff]/g,Dt=/($^)/,Ht=/['\n\r\u2028\u2029\\]/g,Bt=function(){var t="[A-Z\\xc0-\\xd6\\xd8-\\xde]",e="[a-z\\xdf-\\xf6\\xf8-\\xff]+";return RegExp(t+"+(?="+t+e+")|"+t+"?"+e+"|"+t+"+|[0-9]+","g")}(),zt=["Array","ArrayBuffer","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Math","Number","Object","RegExp","Set","String","_","clearTimeout","isFinite","parseFloat","parseInt","setTimeout","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap"],Wt=-1,Ut={};Ut[ot]=Ut[lt]=Ut[ut]=Ut[ct]=Ut[ft]=Ut[ht]=Ut[dt]=Ut[pt]=Ut[gt]=!0,Ut[G]=Ut[V]=Ut[at]=Ut[q]=Ut[K]=Ut[J]=Ut[Z]=Ut[Q]=Ut[tt]=Ut[et]=Ut[nt]=Ut[it]=Ut[rt]=Ut[st]=!1;var Xt={};Xt[G]=Xt[V]=Xt[at]=Xt[q]=Xt[K]=Xt[ot]=Xt[lt]=Xt[ut]=Xt[ct]=Xt[ft]=Xt[tt]=Xt[et]=Xt[nt]=Xt[rt]=Xt[ht]=Xt[dt]=Xt[pt]=Xt[gt]=!0,Xt[J]=Xt[Z]=Xt[Q]=Xt[it]=Xt[st]=!1;var Yt={"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss"},Gt={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#96;"},Vt={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'","&#96;":"`"},qt={function:!0,object:!0},Kt={0:"x30",1:"x31",2:"x32",3:"x33",4:"x34",5:"x35",6:"x36",7:"x37",8:"x38",9:"x39",A:"x41",B:"x42",C:"x43",D:"x44",E:"x45",F:"x46",a:"x61",b:"x62",c:"x63",d:"x64",e:"x65",f:"x66",n:"x6e",r:"x72",t:"x74",u:"x75",v:"x76",x:"x78"},Jt={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Zt=qt[typeof exports]&&exports&&!exports.nodeType&&exports,Qt=qt[typeof t]&&t&&!t.nodeType&&t,te=Zt&&Qt&&"object"==typeof i&&i&&i.Object&&i,ee=qt[typeof self]&&self&&self.Object&&self,ne=qt[typeof window]&&window&&window.Object&&window,ie=(Qt&&Qt.exports===Zt&&Zt,te||ne!==(this&&this.window)&&ne||ee||this),re=S();ie._=re,n=function(){return re}.call(exports,e,exports,t),!(n!==C&&(t.exports=n))}).call(this)}).call(exports,e(2)(t),function(){return this}())},function(t,exports){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children=[],t.webpackPolyfill=1),t}},function(t,exports,e){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(exports,"__esModule",{value:!0}),e(4),e(7),e(8);var i=e(5),r=n(i);exports.default=r.default},function(t,exports,e){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t){return"tagName"in t?t:t.parentNode}function r(t,e,n,i){var r=Math.abs(t-e),s=Math.abs(n-i);return r>=s?t-e>0?"Left":"Right":n-i>0?"Up":"Down"}function s(t){t=m[t],t.timeout&&clearTimeout(t.timeout),t.timeout=null}function a(){m.longTap.timeout=null,g.last&&(g.el.trigger("longTap"),g={})}function o(){m.active.timeout=null,g.last&&g.el.trigger("active")}function l(){s("longTap")}function u(){s("active")}function c(){var t,e,n,s,c,d=!1,v="ontouchstart"in window,_="touchstart",y="touchmove",w="touchend";v||(_="mousedown",y="mousemove",w="mouseup"),(0,p.default)(document.body).bind(_,function(n){n=n.originalEvent||n,d=!0,c=v?n.touches[0]:n,t=Date.now(),e=t-(g.last||t),g.el=(0,p.default)(i(c.target)),f&&clearTimeout(f),g.x1=c.pageX,g.y1=c.pageY,g.x2=c.pageX,g.y2=c.pageY,e>0&&e<=250&&(g.isDoubleTap=!0),g.last=t,m.longTap.timeout=setTimeout(a,m.longTap.delay),m.active.timeout=setTimeout(o,m.active.delay)}).bind(y,function(t){d&&(t=t.originalEvent||t,u(),l(),c=v?t.touches[0]:t,g.x2=c.pageX,g.y2=c.pageY,document.webkitPointerLockElement&&(d=!1))}).bind(w,function(t){d&&(d=!1,l(),u(),n=Math.abs(g.x1-g.x2),s=Math.abs(g.y1-g.y2),g.isDoubleTap?(g.el.trigger("doubleTap",g.el),g={}):n>30||s>30?(g.el.trigger("swipe")&&g.el.trigger("swipe"+r(g.x1,g.x2,g.y1,g.y2)),g={}):"last"in g&&n<7&&s<7&&(g.el.trigger("tap"),f=setTimeout(function(){f=null,g.el.trigger("singleTap"),g={}},250)))}).bind("touchcancel",function(){f&&clearTimeout(f),h&&clearTimeout(h),h=f=null,g={}})}var f,h,d=e(5),p=n(d),g={},m={longTap:{delay:750},active:{delay:0}};"undefined"!=typeof window&&(0,p.default)(document).ready(c)},function(t,exports,e){"use strict";var $=e(6);t.exports=$},function(t,exports,e){var n=function(){function t(t){return null==t?String(t):Y[G.call(t)]||"object"}function e(e){return"function"==t(e)}function n(t){return null!=t&&t==t.window}function i(t){return null!=t&&t.nodeType==t.DOCUMENT_NODE}function r(e){return"object"==t(e)}function s(t){return r(t)&&!n(t)&&Object.getPrototypeOf(t)==Object.prototype}function a(t){return"number"==typeof t.length}function o(t){return O.call(t,function(t){return null!=t})}function l(t){return t.length>0?$.fn.concat.apply([],t):t}function u(t){return t.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/_/g,"-").toLowerCase()}function c(t){return t in N?N[t]:N[t]=new RegExp("(^|\\s)"+t+"(\\s|$)")}function f(t,e){return"number"!=typeof e||I[u(t)]?e:e+"px"}function h(t){var e,n;return A[t]||(e=M.createElement(t),M.body.appendChild(e),n=getComputedStyle(e,"").getPropertyValue("display"),e.parentNode.removeChild(e),"none"==n&&(n="block"),A[t]=n),A[t]}function d(t){return"children"in t?P.call(t.children):$.map(t.childNodes,function(t){if(1==t.nodeType)return t})}function p(t,e,n){for(E in e)n&&(s(e[E])||J(e[E]))?(s(e[E])&&!s(t[E])&&(t[E]={}),J(e[E])&&!J(t[E])&&(t[E]=[]),p(t[E],e[E],n)):e[E]!==b&&(t[E]=e[E])}function g(t,e){return null==e?$(t):$(t).filter(e)}function m(t,n,i,r){return e(n)?n.call(t,i,r):n}function v(t,e,n){null==n?t.removeAttribute(e):t.setAttribute(e,n)}function _(t,e){var n=t.className||"",i=n&&n.baseVal!==b;return e===b?i?n.baseVal:n:void(i?n.baseVal=e:t.className=e)}function y(t){try{return t?"true"==t||"false"!=t&&("null"==t?null:+t+""==t?+t:/^[\[\{]/.test(t)?$.parseJSON(t):t):t}catch(e){return t}}function w(t,e){e(t);for(var n=0,i=t.childNodes.length;n<i;n++)w(t.childNodes[n],e)}var b,E,$,T,x,S,C=[],P=C.slice,O=C.filter,M=window.document,A={},N={},I={"column-count":1,columns:1,"font-weight":1,"line-height":1,opacity:1,"z-index":1,zoom:1},R=/^\s*<(\w+|!)[^>]*>/,L=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,k=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,F=/^(?:body|html)$/i,j=/([A-Z])/g,D=["val","css","html","text","data","width","height","offset"],H=["after","prepend","before","append"],B=M.createElement("table"),z=M.createElement("tr"),W={tr:M.createElement("tbody"),tbody:B,thead:B,tfoot:B,td:z,th:z,"*":M.createElement("div")},U=/complete|loaded|interactive/,X=/^[\w-]*$/,Y={},G=Y.toString,V={},q=M.createElement("div"),K={tabindex:"tabIndex",readonly:"readOnly",for:"htmlFor",class:"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},J=Array.isArray||function(t){return t instanceof Array};return V.matches=function(t,e){if(!e||!t||1!==t.nodeType)return!1;var n=t.webkitMatchesSelector||t.mozMatchesSelector||t.oMatchesSelector||t.matchesSelector;if(n)return n.call(t,e);var i,r=t.parentNode,s=!r;return s&&(r=q).appendChild(t),i=~V.qsa(r,e).indexOf(t),s&&q.removeChild(t),i},x=function(t){return t.replace(/-+(.)?/g,function(t,e){return e?e.toUpperCase():""})},S=function(t){return O.call(t,function(e,n){return t.indexOf(e)==n})},V.fragment=function(t,e,n){var i,r,a;return L.test(t)&&(i=$(M.createElement(RegExp.$1))),i||(t.replace&&(t=t.replace(k,"<$1></$2>")),e===b&&(e=R.test(t)&&RegExp.$1),e in W||(e="*"),a=W[e],a.innerHTML=""+t,i=$.each(P.call(a.childNodes),function(){a.removeChild(this)})),s(n)&&(r=$(i),$.each(n,function(t,e){D.indexOf(t)>-1?r[t](e):r.attr(t,e)})),i},V.Z=function(t,e){return t=t||[],t.__proto__=$.fn,t.selector=e||"",t},V.isZ=function(t){return t instanceof V.Z},V.init=function(t,n){var i;if(!t)return V.Z();if("string"==typeof t)if(t=t.trim(),"<"==t[0]&&R.test(t))i=V.fragment(t,RegExp.$1,n),t=null;else{if(n!==b)return $(n).find(t);i=V.qsa(M,t)}else{if(e(t))return $(M).ready(t);if(V.isZ(t))return t;if(J(t))i=o(t);else if(r(t))i=[t],t=null;else if(R.test(t))i=V.fragment(t.trim(),RegExp.$1,n),t=null;else{if(n!==b)return $(n).find(t);i=V.qsa(M,t)}}return V.Z(i,t)},$=function(t,e){return V.init(t,e)},$.extend=function(t){var e,n=P.call(arguments,1);return"boolean"==typeof t&&(e=t,t=n.shift()),n.forEach(function(n){p(t,n,e)}),t},V.qsa=function(t,e){var n,r="#"==e[0],s=!r&&"."==e[0],a=r||s?e.slice(1):e,o=X.test(a);return i(t)&&o&&r?(n=t.getElementById(a))?[n]:[]:1!==t.nodeType&&9!==t.nodeType?[]:P.call(o&&!r?s?t.getElementsByClassName(a):t.getElementsByTagName(e):t.querySelectorAll(e))},$.contains=M.documentElement.contains?function(t,e){return t!==e&&t.contains(e)}:function(t,e){for(;e&&(e=e.parentNode);)if(e===t)return!0;return!1},$.type=t,$.isFunction=e,$.isWindow=n,$.isArray=J,$.isPlainObject=s,$.isEmptyObject=function(t){var e;for(e in t)return!1;return!0},$.inArray=function(t,e,n){return C.indexOf.call(e,t,n)},$.camelCase=x,$.trim=function(t){return null==t?"":String.prototype.trim.call(t)},$.uuid=0,$.support={},$.expr={},$.map=function(t,e){var n,i,r,s=[];if(a(t))for(i=0;i<t.length;i++)n=e(t[i],i),null!=n&&s.push(n);else for(r in t)n=e(t[r],r),null!=n&&s.push(n);return l(s)},$.each=function(t,e){var n,i;if(a(t)){for(n=0;n<t.length;n++)if(e.call(t[n],n,t[n])===!1)return t}else for(i in t)if(e.call(t[i],i,t[i])===!1)return t;return t},$.grep=function(t,e){return O.call(t,e)},window.JSON&&($.parseJSON=JSON.parse),$.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(t,e){Y["[object "+e+"]"]=e.toLowerCase()}),$.fn={forEach:C.forEach,reduce:C.reduce,push:C.push,sort:C.sort,indexOf:C.indexOf,concat:C.concat,map:function(t){return $($.map(this,function(e,n){return t.call(e,n,e)}))},slice:function(){return $(P.apply(this,arguments))},ready:function(t){return U.test(M.readyState)&&M.body?t($):M.addEventListener("DOMContentLoaded",function(){t($)},!1),this},get:function(t){return t===b?P.call(this):this[t>=0?t:t+this.length]},toArray:function(){return this.get()},size:function(){return this.length},remove:function(){return this.each(function(){null!=this.parentNode&&this.parentNode.removeChild(this)})},each:function(t){return C.every.call(this,function(e,n){return t.call(e,n,e)!==!1}),this},filter:function(t){return e(t)?this.not(this.not(t)):$(O.call(this,function(e){return V.matches(e,t)}))},add:function(t,e){return $(S(this.concat($(t,e))))},is:function(t){return this.length>0&&V.matches(this[0],t)},not:function(t){var n=[];if(e(t)&&t.call!==b)this.each(function(e){t.call(this,e)||n.push(this)});else{var i="string"==typeof t?this.filter(t):a(t)&&e(t.item)?P.call(t):$(t);this.forEach(function(t){i.indexOf(t)<0&&n.push(t)})}return $(n)},has:function(t){return this.filter(function(){return r(t)?$.contains(this,t):$(this).find(t).size()})},eq:function(t){return t===-1?this.slice(t):this.slice(t,+t+1)},first:function(){var t=this[0];return t&&!r(t)?t:$(t)},last:function(){var t=this[this.length-1];return t&&!r(t)?t:$(t)},find:function(t){var e,n=this;return e=t?"object"==typeof t?$(t).filter(function(){var t=this;return C.some.call(n,function(e){return $.contains(e,t)})}):1==this.length?$(V.qsa(this[0],t)):this.map(function(){return V.qsa(this,t)}):$()},closest:function(t,e){var n=this[0],r=!1;for("object"==typeof t&&(r=$(t));n&&!(r?r.indexOf(n)>=0:V.matches(n,t));)n=n!==e&&!i(n)&&n.parentNode;return $(n)},parents:function(t){for(var e=[],n=this;n.length>0;)n=$.map(n,function(t){if((t=t.parentNode)&&!i(t)&&e.indexOf(t)<0)return e.push(t),t});return g(e,t)},parent:function(t){return g(S(this.pluck("parentNode")),t)},children:function(t){return g(this.map(function(){return d(this)}),t)},contents:function(){return this.map(function(){return P.call(this.childNodes)})},siblings:function(t){return g(this.map(function(t,e){return O.call(d(e.parentNode),function(t){return t!==e})}),t)},empty:function(){return this.each(function(){this.innerHTML=""})},pluck:function(t){return $.map(this,function(e){return e[t]})},show:function(){return this.each(function(){"none"==this.style.display&&(this.style.display=""),"none"==getComputedStyle(this,"").getPropertyValue("display")&&(this.style.display=h(this.nodeName))})},replaceWith:function(t){return this.before(t).remove()},wrap:function(t){var n=e(t);if(this[0]&&!n)var i=$(t).get(0),r=i.parentNode||this.length>1;return this.each(function(e){$(this).wrapAll(n?t.call(this,e):r?i.cloneNode(!0):i)})},wrapAll:function(t){if(this[0]){$(this[0]).before(t=$(t));for(var e;(e=t.children()).length;)t=e.first();$(t).append(this)}return this},wrapInner:function(t){var n=e(t);return this.each(function(e){var i=$(this),r=i.contents(),s=n?t.call(this,e):t;r.length?r.wrapAll(s):i.append(s)})},unwrap:function(){return this.parent().each(function(){$(this).replaceWith($(this).children())}),this},clone:function(){return this.map(function(){return this.cloneNode(!0)})},hide:function(){return this.css("display","none")},toggle:function(t){return this.each(function(){var e=$(this);(t===b?"none"==e.css("display"):t)?e.show():e.hide()})},prev:function(t){return $(this.pluck("previousElementSibling")).filter(t||"*")},next:function(t){return $(this.pluck("nextElementSibling")).filter(t||"*")},html:function(t){return 0 in arguments?this.each(function(e){var n=this.innerHTML;$(this).empty().append(m(this,t,e,n))}):0 in this?this[0].innerHTML:null},text:function(t){return 0 in arguments?this.each(function(e){var n=m(this,t,e,this.textContent);this.textContent=null==n?"":""+n}):0 in this?this[0].textContent:null},attr:function(t,e){var n;return"string"!=typeof t||1 in arguments?this.each(function(n){if(1===this.nodeType)if(r(t))for(E in t)v(this,E,t[E]);else v(this,t,m(this,e,n,this.getAttribute(t)))}):this.length&&1===this[0].nodeType?!(n=this[0].getAttribute(t))&&t in this[0]?this[0][t]:n:b},removeAttr:function(t){return this.each(function(){1===this.nodeType&&t.split(" ").forEach(function(t){v(this,t)},this)})},prop:function(t,e){return t=K[t]||t,1 in arguments?this.each(function(n){this[t]=m(this,e,n,this[t])}):this[0]&&this[0][t]},data:function(t,e){
var n="data-"+t.replace(j,"-$1").toLowerCase(),i=1 in arguments?this.attr(n,e):this.attr(n);return null!==i?y(i):b},val:function(t){return 0 in arguments?this.each(function(e){this.value=m(this,t,e,this.value)}):this[0]&&(this[0].multiple?$(this[0]).find("option").filter(function(){return this.selected}).pluck("value"):this[0].value)},offset:function(t){if(t)return this.each(function(e){var n=$(this),i=m(this,t,e,n.offset()),r=n.offsetParent().offset(),s={top:i.top-r.top,left:i.left-r.left};"static"==n.css("position")&&(s.position="relative"),n.css(s)});if(!this.length)return null;var e=this[0].getBoundingClientRect();return{left:e.left+window.pageXOffset,top:e.top+window.pageYOffset,width:Math.round(e.width),height:Math.round(e.height)}},css:function(e,n){if(arguments.length<2){var i,r=this[0];if(!r)return;if(i=getComputedStyle(r,""),"string"==typeof e)return r.style[x(e)]||i.getPropertyValue(e);if(J(e)){var s={};return $.each(e,function(t,e){s[e]=r.style[x(e)]||i.getPropertyValue(e)}),s}}var a="";if("string"==t(e))n||0===n?a=u(e)+":"+f(e,n):this.each(function(){this.style.removeProperty(u(e))});else for(E in e)e[E]||0===e[E]?a+=u(E)+":"+f(E,e[E])+";":this.each(function(){this.style.removeProperty(u(E))});return this.each(function(){this.style.cssText+=";"+a})},index:function(t){return t?this.indexOf($(t)[0]):this.parent().children().indexOf(this[0])},hasClass:function(t){return!!t&&C.some.call(this,function(t){return this.test(_(t))},c(t))},addClass:function(t){return t?this.each(function(e){if("className"in this){T=[];var n=_(this),i=m(this,t,e,n);i.split(/\s+/g).forEach(function(t){$(this).hasClass(t)||T.push(t)},this),T.length&&_(this,n+(n?" ":"")+T.join(" "))}}):this},removeClass:function(t){return this.each(function(e){if("className"in this){if(t===b)return _(this,"");T=_(this),m(this,t,e,T).split(/\s+/g).forEach(function(t){T=T.replace(c(t)," ")}),_(this,T.trim())}})},toggleClass:function(t,e){return t?this.each(function(n){var i=$(this),r=m(this,t,n,_(this));r.split(/\s+/g).forEach(function(t){(e===b?!i.hasClass(t):e)?i.addClass(t):i.removeClass(t)})}):this},scrollTop:function(t){if(this.length){var e="scrollTop"in this[0];return t===b?e?this[0].scrollTop:this[0].pageYOffset:this.each(e?function(){this.scrollTop=t}:function(){this.scrollTo(this.scrollX,t)})}},scrollLeft:function(t){if(this.length){var e="scrollLeft"in this[0];return t===b?e?this[0].scrollLeft:this[0].pageXOffset:this.each(e?function(){this.scrollLeft=t}:function(){this.scrollTo(t,this.scrollY)})}},position:function(){if(this.length){var t=this[0],e=this.offsetParent(),n=this.offset(),i=F.test(e[0].nodeName)?{top:0,left:0}:e.offset();return n.top-=parseFloat($(t).css("margin-top"))||0,n.left-=parseFloat($(t).css("margin-left"))||0,i.top+=parseFloat($(e[0]).css("border-top-width"))||0,i.left+=parseFloat($(e[0]).css("border-left-width"))||0,{top:n.top-i.top,left:n.left-i.left}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent||M.body;t&&!F.test(t.nodeName)&&"static"==$(t).css("position");)t=t.offsetParent;return t})}},$.fn.detach=$.fn.remove,["width","height"].forEach(function(t){var e=t.replace(/./,function(t){return t[0].toUpperCase()});$.fn[t]=function(r){var s,a=this[0];return r===b?n(a)?a["inner"+e]:i(a)?a.documentElement["scroll"+e]:(s=this.offset())&&s[t]:this.each(function(e){a=$(this),a.css(t,m(this,r,e,a[t]()))})}}),H.forEach(function(e,n){var i=n%2;$.fn[e]=function(){var e,r,s=$.map(arguments,function(n){return e=t(n),"object"==e||"array"==e||null==n?n:V.fragment(n)}),a=this.length>1;return s.length<1?this:this.each(function(t,e){r=i?e:e.parentNode,e=0==n?e.nextSibling:1==n?e.firstChild:2==n?e:null;var o=$.contains(M.documentElement,r);s.forEach(function(t){if(a)t=t.cloneNode(!0);else if(!r)return $(t).remove();r.insertBefore(t,e),o&&w(t,function(t){null==t.nodeName||"SCRIPT"!==t.nodeName.toUpperCase()||t.type&&"text/javascript"!==t.type||t.src||window.eval.call(window,t.innerHTML)})})})},$.fn[i?e+"To":"insert"+(n?"Before":"After")]=function(t){return $(t)[e](this),this}}),V.Z.prototype=$.fn,V.uniq=S,V.deserializeValue=y,$.zepto=V,$}();window.Zepto=n,void 0===window.$&&(window.$=n),function($){function t(t){return t._zid||(t._zid=f++)}function e(e,r,s,a){if(r=n(r),r.ns)var o=i(r.ns);return(g[t(e)]||[]).filter(function(e){return e&&(!r.e||e.e==r.e)&&(!r.ns||o.test(e.ns))&&(!s||t(e.fn)===t(s))&&(!a||e.sel==a)})}function n(t){var e=(""+t).split(".");return{e:e[0],ns:e.slice(1).sort().join(" ")}}function i(t){return new RegExp("(?:^| )"+t.replace(" "," .* ?")+"(?: |$)")}function r(t,e){return t.del&&!v&&t.e in _||!!e}function s(t){return y[t]||v&&_[t]||t}function a(e,i,a,o,u,f,h){var d=t(e),p=g[d]||(g[d]=[]);i.split(/\s/).forEach(function(t){if("ready"==t)return $(document).ready(a);var i=n(t);i.fn=a,i.sel=u,i.e in y&&(a=function(t){var e=t.relatedTarget;if(!e||e!==this&&!$.contains(this,e))return i.fn.apply(this,arguments)}),i.del=f;var d=f||a;i.proxy=function(t){if(t=l(t),!t.isImmediatePropagationStopped()){t.data=o;var n=d.apply(e,t._args==c?[t]:[t].concat(t._args));return n===!1&&(t.preventDefault(),t.stopPropagation()),n}},i.i=p.length,p.push(i),"addEventListener"in e&&e.addEventListener(s(i.e),i.proxy,r(i,h))})}function o(n,i,a,o,l){var u=t(n);(i||"").split(/\s/).forEach(function(t){e(n,t,a,o).forEach(function(t){delete g[u][t.i],"removeEventListener"in n&&n.removeEventListener(s(t.e),t.proxy,r(t,l))})})}function l(t,e){return!e&&t.isDefaultPrevented||(e||(e=t),$.each(T,function(n,i){var r=e[n];t[n]=function(){return this[i]=w,r&&r.apply(e,arguments)},t[i]=b}),(e.defaultPrevented!==c?e.defaultPrevented:"returnValue"in e?e.returnValue===!1:e.getPreventDefault&&e.getPreventDefault())&&(t.isDefaultPrevented=w)),t}function u(t){var e,n={originalEvent:t};for(e in t)E.test(e)||t[e]===c||(n[e]=t[e]);return l(n,t)}var c,f=1,h=Array.prototype.slice,d=$.isFunction,p=function(t){return"string"==typeof t},g={},m={},v="onfocusin"in window,_={focus:"focusin",blur:"focusout"},y={mouseenter:"mouseover",mouseleave:"mouseout"};m.click=m.mousedown=m.mouseup=m.mousemove="MouseEvents",$.event={add:a,remove:o},$.proxy=function(e,n){var i=2 in arguments&&h.call(arguments,2);if(d(e)){var r=function(){return e.apply(n,i?i.concat(h.call(arguments)):arguments)};return r._zid=t(e),r}if(p(n))return i?(i.unshift(e[n],e),$.proxy.apply(null,i)):$.proxy(e[n],e);throw new TypeError("expected function")},$.fn.bind=function(t,e,n){return this.on(t,e,n)},$.fn.unbind=function(t,e){return this.off(t,e)},$.fn.one=function(t,e,n,i){return this.on(t,e,n,i,1)};var w=function(){return!0},b=function(){return!1},E=/^([A-Z]|returnValue$|layer[XY]$)/,T={preventDefault:"isDefaultPrevented",stopImmediatePropagation:"isImmediatePropagationStopped",stopPropagation:"isPropagationStopped"};$.fn.delegate=function(t,e,n){return this.on(e,t,n)},$.fn.undelegate=function(t,e,n){return this.off(e,t,n)},$.fn.live=function(t,e){return $(document.body).delegate(this.selector,t,e),this},$.fn.die=function(t,e){return $(document.body).undelegate(this.selector,t,e),this},$.fn.on=function(t,e,n,i,r){var s,l,f=this;return t&&!p(t)?($.each(t,function(t,i){f.on(t,e,n,i,r)}),f):(p(e)||d(i)||i===!1||(i=n,n=e,e=c),(d(n)||n===!1)&&(i=n,n=c),i===!1&&(i=b),f.each(function(c,f){r&&(s=function(t){return o(f,t.type,i),i.apply(this,arguments)}),e&&(l=function(t){var n,r=$(t.target).closest(e,f).get(0);if(r&&r!==f)return n=$.extend(u(t),{currentTarget:r,liveFired:f}),(s||i).apply(r,[n].concat(h.call(arguments,1)))}),a(f,t,i,n,e,l||s)}))},$.fn.off=function(t,e,n){var i=this;return t&&!p(t)?($.each(t,function(t,n){i.off(t,e,n)}),i):(p(e)||d(n)||n===!1||(n=e,e=c),n===!1&&(n=b),i.each(function(){o(this,t,n,e)}))},$.fn.trigger=function(t,e){return t=p(t)||$.isPlainObject(t)?$.Event(t):l(t),t._args=e,this.each(function(){t.type in _&&"function"==typeof this[t.type]?this[t.type]():"dispatchEvent"in this?this.dispatchEvent(t):$(this).triggerHandler(t,e)})},$.fn.triggerHandler=function(t,n){var i,r;return this.each(function(s,a){i=u(p(t)?$.Event(t):t),i._args=n,i.target=a,$.each(e(a,t.type||t),function(t,e){if(r=e.proxy(i),i.isImmediatePropagationStopped())return!1})}),r},"focusin focusout focus blur load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select keydown keypress keyup error".split(" ").forEach(function(t){$.fn[t]=function(e){return 0 in arguments?this.bind(t,e):this.trigger(t)}}),$.Event=function(t,e){p(t)||(e=t,t=e.type);var n=document.createEvent(m[t]||"Events"),i=!0;if(e)for(var r in e)"bubbles"==r?i=!!e[r]:n[r]=e[r];return n.initEvent(t,i,!0),l(n)}}(n),function($){function t(t,e,n){var i=$.Event(e);return $(t).trigger(i,n),!i.isDefaultPrevented()}function e(e,n,i,r){if(e.global)return t(n||v,i,r)}function n(t){t.global&&0===$.active++&&e(t,null,"ajaxStart")}function i(t){t.global&&!--$.active&&e(t,null,"ajaxStop")}function r(t,n){var i=n.context;return n.beforeSend.call(i,t,n)!==!1&&e(n,i,"ajaxBeforeSend",[t,n])!==!1&&void e(n,i,"ajaxSend",[t,n])}function s(t,n,i,r){var s=i.context,a="success";i.success.call(s,t,a,n),r&&r.resolveWith(s,[t,a,n]),e(i,s,"ajaxSuccess",[n,i,t]),o(a,n,i)}function a(t,n,i,r,s){var a=r.context;r.error.call(a,i,n,t),s&&s.rejectWith(a,[i,n,t]),e(r,a,"ajaxError",[i,r,t||n]),o(n,i,r)}function o(t,n,r){var s=r.context;r.complete.call(s,n,t),e(r,s,"ajaxComplete",[n,r]),i(r)}function l(){}function u(t){return t&&(t=t.split(";",2)[0]),t&&(t==E?"html":t==b?"json":y.test(t)?"script":w.test(t)&&"xml")||"text"}function c(t,e){return""==e?t:(t+"&"+e).replace(/[&?]{1,2}/,"?")}function f(t){t.processData&&t.data&&"string"!=$.type(t.data)&&(t.data=$.param(t.data,t.traditional)),!t.data||t.type&&"GET"!=t.type.toUpperCase()||(t.url=c(t.url,t.data),t.data=void 0)}function h(t,e,n,i){return $.isFunction(e)&&(i=n,n=e,e=void 0),$.isFunction(n)||(i=n,n=void 0),{url:t,data:e,success:n,dataType:i}}function d(t,e,n,i){var r,s=$.isArray(e),a=$.isPlainObject(e);$.each(e,function(e,o){r=$.type(o),i&&(e=n?i:i+"["+(a||"object"==r||"array"==r?e:"")+"]"),!i&&s?t.add(o.name,o.value):"array"==r||!n&&"object"==r?d(t,o,n,e):t.add(e,o)})}var p,g,m=0,v=window.document,_=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,y=/^(?:text|application)\/javascript/i,w=/^(?:text|application)\/xml/i,b="application/json",E="text/html",T=/^\s*$/,x=v.createElement("a");x.href=window.location.href,$.active=0,$.ajaxJSONP=function(t,e){if(!("type"in t))return $.ajax(t);var n,i,o=t.jsonpCallback,l=($.isFunction(o)?o():o)||"jsonp"+ ++m,u=v.createElement("script"),c=window[l],f=function(t){$(u).triggerHandler("error",t||"abort")},h={abort:f};return e&&e.promise(h),$(u).on("load error",function(r,o){clearTimeout(i),$(u).off().remove(),"error"!=r.type&&n?s(n[0],h,t,e):a(null,o||"error",h,t,e),window[l]=c,n&&$.isFunction(c)&&c(n[0]),c=n=void 0}),r(h,t)===!1?(f("abort"),h):(window[l]=function(){n=arguments},u.src=t.url.replace(/\?(.+)=\?/,"?$1="+l),v.head.appendChild(u),t.timeout>0&&(i=setTimeout(function(){f("timeout")},t.timeout)),h)},$.ajaxSettings={type:"GET",beforeSend:l,success:l,error:l,complete:l,context:null,global:!0,xhr:function(){return new window.XMLHttpRequest},accepts:{script:"text/javascript, application/javascript, application/x-javascript",json:b,xml:"application/xml, text/xml",html:E,text:"text/plain"},crossDomain:!1,timeout:0,processData:!0,cache:!0},$.ajax=function(t){var e,i=$.extend({},t||{}),o=$.Deferred&&$.Deferred();for(p in $.ajaxSettings)void 0===i[p]&&(i[p]=$.ajaxSettings[p]);n(i),i.crossDomain||(e=v.createElement("a"),e.href=i.url,e.href=e.href,i.crossDomain=x.protocol+"//"+x.host!=e.protocol+"//"+e.host),i.url||(i.url=window.location.toString()),f(i);var h=i.dataType,d=/\?.+=\?/.test(i.url);if(d&&(h="jsonp"),i.cache!==!1&&(t&&t.cache===!0||"script"!=h&&"jsonp"!=h)||(i.url=c(i.url,"_="+Date.now())),"jsonp"==h)return d||(i.url=c(i.url,i.jsonp?i.jsonp+"=?":i.jsonp===!1?"":"callback=?")),$.ajaxJSONP(i,o);var m,_=i.accepts[h],y={},w=function(t,e){y[t.toLowerCase()]=[t,e]},b=/^([\w-]+:)\/\//.test(i.url)?RegExp.$1:window.location.protocol,E=i.xhr(),S=E.setRequestHeader;if(o&&o.promise(E),i.crossDomain||w("X-Requested-With","XMLHttpRequest"),w("Accept",_||"*/*"),(_=i.mimeType||_)&&(_.indexOf(",")>-1&&(_=_.split(",",2)[0]),E.overrideMimeType&&E.overrideMimeType(_)),(i.contentType||i.contentType!==!1&&i.data&&"GET"!=i.type.toUpperCase())&&w("Content-Type",i.contentType||"application/x-www-form-urlencoded"),i.headers)for(g in i.headers)w(g,i.headers[g]);if(E.setRequestHeader=w,E.onreadystatechange=function(){if(4==E.readyState){E.onreadystatechange=l,clearTimeout(m);var t,e=!1;if(E.status>=200&&E.status<300||304==E.status||0==E.status&&"file:"==b){h=h||u(i.mimeType||E.getResponseHeader("content-type")),t=E.responseText;try{"script"==h?(0,eval)(t):"xml"==h?t=E.responseXML:"json"==h&&(t=T.test(t)?null:$.parseJSON(t))}catch(t){e=t}e?a(e,"parsererror",E,i,o):s(t,E,i,o)}else a(E.statusText||null,E.status?"error":"abort",E,i,o)}},r(E,i)===!1)return E.abort(),a(null,"abort",E,i,o),E;if(i.xhrFields)for(g in i.xhrFields)E[g]=i.xhrFields[g];var C=!("async"in i)||i.async;E.open(i.type,i.url,C,i.username,i.password);for(g in y)S.apply(E,y[g]);return i.timeout>0&&(m=setTimeout(function(){E.onreadystatechange=l,E.abort(),a(null,"timeout",E,i,o)},i.timeout)),E.send(i.data?i.data:null),E},$.get=function(){return $.ajax(h.apply(null,arguments))},$.post=function(){var t=h.apply(null,arguments);return t.type="POST",$.ajax(t)},$.getJSON=function(){var t=h.apply(null,arguments);return t.dataType="json",$.ajax(t)},$.fn.load=function(t,e,n){if(!this.length)return this;var i,r=this,s=t.split(/\s/),a=h(t,e,n),o=a.success;return s.length>1&&(a.url=s[0],i=s[1]),a.success=function(t){r.html(i?$("<div>").html(t.replace(_,"")).find(i):t),o&&o.apply(r,arguments)},$.ajax(a),this};var S=encodeURIComponent;$.param=function(t,e){var n=[];return n.add=function(t,e){$.isFunction(e)&&(e=e()),null==e&&(e=""),this.push(S(t)+"="+S(e))},d(n,t,e),n.join("&").replace(/%20/g,"+")}}(n),function($){$.fn.serializeArray=function(){var t,e,n=[],i=function(e){return e.forEach?e.forEach(i):void n.push({name:t,value:e})};return this[0]&&$.each(this[0].elements,function(n,r){e=r.type,t=r.name,t&&"fieldset"!=r.nodeName.toLowerCase()&&!r.disabled&&"submit"!=e&&"reset"!=e&&"button"!=e&&"file"!=e&&("radio"!=e&&"checkbox"!=e||r.checked)&&i($(r).val())}),n},$.fn.serialize=function(){var t=[];return this.serializeArray().forEach(function(e){t.push(encodeURIComponent(e.name)+"="+encodeURIComponent(e.value))}),t.join("&")},$.fn.submit=function(t){if(0 in arguments)this.bind("submit",t);else if(this.length){var e=$.Event("submit");this.eq(0).trigger(e),e.isDefaultPrevented()||this.get(0).submit()}return this}}(n),function($){"__proto__"in{}||$.extend($.zepto,{Z:function(t,e){return t=t||[],$.extend(t,$.fn),t.selector=e||"",t.__Z=!0,t},isZ:function(t){return"array"===$.type(t)&&"__Z"in t}});try{getComputedStyle(void 0)}catch(e){var t=getComputedStyle;window.getComputedStyle=function(e){try{return t(e)}catch(t){return null}}}}(n),t.exports=n},function(t,exports,e){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(){var t=this[0],e=r.call(this);return t.offsetHeight+e}function r(){var t=s.call(this);return t.top+t.bottom}function s(){var t,e=this[0],n=window.getComputedStyle(e,null);return t={top:l(n,"margin-top"),right:l(n,"margin-right"),bottom:l(n,"margin-bottom"),left:l(n,"margin-left")},t.height=t.top+t.bottom,t.width=t.left+t.right,t}function a(){var t=this[0],e=window.getComputedStyle(t,null);return{top:l(e,"padding-top"),right:l(e,"padding-right"),bottom:l(e,"padding-bottom"),left:l(e,"padding-left")}}function o(){var t=this[0],e=t.getBoundingClientRect(),n=s.call(this),i=a.call(this);return{height:t.clientHeight,width:t.clientWidth,top:e.top,right:e.right,bottom:e.bottom,left:e.left,outerHeight:e.height+n.height,outerWidth:e.width+n.width,marginTop:n.top,marginRight:n.right,marginBottom:n.bottom,marginLeft:n.left,marginHeight:n.height,marginWidth:n.width,paddingTop:i.top,paddingRight:i.right,paddingBottom:i.bottom,paddingLeft:i.left,lineHeight:parseInt(c.default.fn.css.call(this,"line-height"),10)}}function l(t,e){return parseInt(t.getPropertyValue(e),10)}var u=e(5),c=n(u);"undefined"!=typeof window&&(c.default.fn.outerHeight=i,c.default.fn.marginHeight=r,c.default.fn.margin=s,c.default.fn.padding=a,c.default.fn.metrics=o)},function(t,exports,e){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}/*!
	   * textFit.js
	   *
	   * Copyright 2011, Peter Rudolfsen
	   */
function i(t){return this.each(function(){var t=(0,s.default)(this),e=e||1,n=(0,s.default)('<span style="display:inline-block;margin:0;padding:0;"></span>').html(t.text()),i=parseInt(window.getComputedStyle(this).getPropertyValue("font-size"),10),r=t.width(),a=0;if(0!==r){for(t.empty().append(n),a=n.width(),a>=r&&(i=8,t.css("font-size",i+"px"),a=n.width());a<r;)i+=1,t.css("font-size",i+"px"),a=n.width(),r=t.width();a>=r&&(i-=1),t.css("font-size",i/e+"px")}})}var r=e(5),s=n(r);"undefined"!=typeof window&&(s.default.fn.textFit=i)},function(t,exports,e){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(exports,"__esModule",{value:!0});var i=e(1),r=n(i),s=e(10),a=n(s);exports.default=r.default.extend({},a.default.Events)},function(t,exports,e){var n,i;(function(r){!function(s){var a="object"==typeof self&&self.self===self&&self||"object"==typeof r&&r.global===r&&r;n=[e(1),e(6),exports],i=function(t,$,exports){a.Backbone=s(a,exports,t,$)}.apply(exports,n),!(void 0!==i&&(t.exports=i))}(function(t,e,n,$){var i=t.Backbone,r=Array.prototype.slice;e.VERSION="1.3.3",e.$=$,e.noConflict=function(){return t.Backbone=i,this},e.emulateHTTP=!1,e.emulateJSON=!1;var s=function(t,e,i){switch(t){case 1:return function(){return n[e](this[i])};case 2:return function(t){return n[e](this[i],t)};case 3:return function(t,r){return n[e](this[i],o(t,this),r)};case 4:return function(t,r,s){return n[e](this[i],o(t,this),r,s)};default:return function(){var t=r.call(arguments);return t.unshift(this[i]),n[e].apply(n,t)}}},a=function(t,e,i){n.each(e,function(e,r){n[r]&&(t.prototype[r]=s(e,r,i))})},o=function(t,e){return n.isFunction(t)?t:n.isObject(t)&&!e._isModel(t)?l(t):n.isString(t)?function(e){return e.get(t)}:t},l=function(t){var e=n.matches(t);return function(t){return e(t.attributes)}},u=e.Events={},c=/\s+/,f=function(t,e,i,r,s){var a,o=0;if(i&&"object"==typeof i){void 0!==r&&"context"in s&&void 0===s.context&&(s.context=r);for(a=n.keys(i);o<a.length;o++)e=f(t,e,a[o],i[a[o]],s)}else if(i&&c.test(i))for(a=i.split(c);o<a.length;o++)e=t(e,a[o],r,s);else e=t(e,i,r,s);return e};u.on=function(t,e,n){return h(this,t,e,n)};var h=function(t,e,n,i,r){if(t._events=f(d,t._events||{},e,n,{context:i,ctx:t,listening:r}),r){var s=t._listeners||(t._listeners={});s[r.id]=r}return t};u.listenTo=function(t,e,i){if(!t)return this;var r=t._listenId||(t._listenId=n.uniqueId("l")),s=this._listeningTo||(this._listeningTo={}),a=s[r];if(!a){var o=this._listenId||(this._listenId=n.uniqueId("l"));a=s[r]={obj:t,objId:r,id:o,listeningTo:s,count:0}}return h(t,e,i,this,a),this};var d=function(t,e,n,i){if(n){var r=t[e]||(t[e]=[]),s=i.context,a=i.ctx,o=i.listening;o&&o.count++,r.push({callback:n,context:s,ctx:s||a,listening:o})}return t};u.off=function(t,e,n){return this._events?(this._events=f(p,this._events,t,e,{context:n,listeners:this._listeners}),this):this},u.stopListening=function(t,e,i){var r=this._listeningTo;if(!r)return this;for(var s=t?[t._listenId]:n.keys(r),a=0;a<s.length;a++){var o=r[s[a]];if(!o)break;o.obj.off(e,i,this)}return this};var p=function(t,e,i,r){if(t){var s,a=0,o=r.context,l=r.listeners;if(e||i||o){for(var u=e?[e]:n.keys(t);a<u.length;a++){e=u[a];var c=t[e];if(!c)break;for(var f=[],h=0;h<c.length;h++){var d=c[h];i&&i!==d.callback&&i!==d.callback._callback||o&&o!==d.context?f.push(d):(s=d.listening,s&&0===--s.count&&(delete l[s.id],delete s.listeningTo[s.objId]))}f.length?t[e]=f:delete t[e]}return t}for(var p=n.keys(l);a<p.length;a++)s=l[p[a]],delete l[s.id],delete s.listeningTo[s.objId]}};u.once=function(t,e,i){var r=f(g,{},t,e,n.bind(this.off,this));return"string"==typeof t&&null==i&&(e=void 0),this.on(r,e,i)},u.listenToOnce=function(t,e,i){var r=f(g,{},e,i,n.bind(this.stopListening,this,t));return this.listenTo(t,r)};var g=function(t,e,i,r){if(i){var s=t[e]=n.once(function(){r(e,s),i.apply(this,arguments)});s._callback=i}return t};u.trigger=function(t){if(!this._events)return this;for(var e=Math.max(0,arguments.length-1),n=Array(e),i=0;i<e;i++)n[i]=arguments[i+1];return f(m,this._events,t,void 0,n),this};var m=function(t,e,n,i){if(t){var r=t[e],s=t.all;r&&s&&(s=s.slice()),r&&v(r,i),s&&v(s,[e].concat(i))}return t},v=function(t,e){var n,i=-1,r=t.length,s=e[0],a=e[1],o=e[2];switch(e.length){case 0:for(;++i<r;)(n=t[i]).callback.call(n.ctx);return;case 1:for(;++i<r;)(n=t[i]).callback.call(n.ctx,s);return;case 2:for(;++i<r;)(n=t[i]).callback.call(n.ctx,s,a);return;case 3:for(;++i<r;)(n=t[i]).callback.call(n.ctx,s,a,o);return;default:for(;++i<r;)(n=t[i]).callback.apply(n.ctx,e);return}};u.bind=u.on,u.unbind=u.off,n.extend(e,u);var _=e.Model=function(t,e){var i=t||{};e||(e={}),this.cid=n.uniqueId(this.cidPrefix),this.attributes={},e.collection&&(this.collection=e.collection),e.parse&&(i=this.parse(i,e)||{});var r=n.result(this,"defaults");i=n.defaults(n.extend({},r,i),r),this.set(i,e),this.changed={},this.initialize.apply(this,arguments)};n.extend(_.prototype,u,{changed:null,validationError:null,idAttribute:"id",cidPrefix:"c",initialize:function(){},toJSON:function(t){return n.clone(this.attributes)},sync:function(){return e.sync.apply(this,arguments)},get:function(t){return this.attributes[t]},escape:function(t){return n.escape(this.get(t))},has:function(t){return null!=this.get(t)},matches:function(t){return!!n.iteratee(t,this)(this.attributes)},set:function(t,e,i){if(null==t)return this;var r;if("object"==typeof t?(r=t,i=e):(r={})[t]=e,i||(i={}),!this._validate(r,i))return!1;var s=i.unset,a=i.silent,o=[],l=this._changing;this._changing=!0,l||(this._previousAttributes=n.clone(this.attributes),this.changed={});var u=this.attributes,c=this.changed,f=this._previousAttributes;for(var h in r)e=r[h],n.isEqual(u[h],e)||o.push(h),n.isEqual(f[h],e)?delete c[h]:c[h]=e,s?delete u[h]:u[h]=e;if(this.idAttribute in r&&(this.id=this.get(this.idAttribute)),!a){o.length&&(this._pending=i);for(var d=0;d<o.length;d++)this.trigger("change:"+o[d],this,u[o[d]],i)}if(l)return this;if(!a)for(;this._pending;)i=this._pending,this._pending=!1,this.trigger("change",this,i);return this._pending=!1,this._changing=!1,this},unset:function(t,e){return this.set(t,void 0,n.extend({},e,{unset:!0}))},clear:function(t){var e={};for(var i in this.attributes)e[i]=void 0;return this.set(e,n.extend({},t,{unset:!0}))},hasChanged:function(t){return null==t?!n.isEmpty(this.changed):n.has(this.changed,t)},changedAttributes:function(t){if(!t)return!!this.hasChanged()&&n.clone(this.changed);var e=this._changing?this._previousAttributes:this.attributes,i={};for(var r in t){var s=t[r];n.isEqual(e[r],s)||(i[r]=s)}return!!n.size(i)&&i},previous:function(t){return null!=t&&this._previousAttributes?this._previousAttributes[t]:null},previousAttributes:function(){return n.clone(this._previousAttributes)},fetch:function(t){t=n.extend({parse:!0},t);var e=this,i=t.success;return t.success=function(n){var r=t.parse?e.parse(n,t):n;return!!e.set(r,t)&&(i&&i.call(t.context,e,n,t),void e.trigger("sync",e,n,t))},B(this,t),this.sync("read",this,t)},save:function(t,e,i){var r;null==t||"object"==typeof t?(r=t,i=e):(r={})[t]=e,i=n.extend({validate:!0,parse:!0},i);var s=i.wait;if(r&&!s){if(!this.set(r,i))return!1}else if(!this._validate(r,i))return!1;var a=this,o=i.success,l=this.attributes;i.success=function(t){a.attributes=l;var e=i.parse?a.parse(t,i):t;return s&&(e=n.extend({},r,e)),!(e&&!a.set(e,i))&&(o&&o.call(i.context,a,t,i),void a.trigger("sync",a,t,i))},B(this,i),r&&s&&(this.attributes=n.extend({},l,r));var u=this.isNew()?"create":i.patch?"patch":"update";"patch"!==u||i.attrs||(i.attrs=r);var c=this.sync(u,this,i);return this.attributes=l,c},destroy:function(t){t=t?n.clone(t):{};var e=this,i=t.success,r=t.wait,s=function(){e.stopListening(),e.trigger("destroy",e,e.collection,t)};t.success=function(n){r&&s(),i&&i.call(t.context,e,n,t),e.isNew()||e.trigger("sync",e,n,t)};var a=!1;return this.isNew()?n.defer(t.success):(B(this,t),a=this.sync("delete",this,t)),r||s(),a},url:function(){var t=n.result(this,"urlRoot")||n.result(this.collection,"url")||H();if(this.isNew())return t;var e=this.get(this.idAttribute);return t.replace(/[^\/]$/,"$&/")+encodeURIComponent(e)},parse:function(t,e){return t},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(t){return this._validate({},n.extend({},t,{validate:!0}))},_validate:function(t,e){if(!e.validate||!this.validate)return!0;t=n.extend({},this.attributes,t);var i=this.validationError=this.validate(t,e)||null;return!i||(this.trigger("invalid",this,i,n.extend(e,{validationError:i})),!1)}});var y={keys:1,values:1,pairs:1,invert:1,pick:0,omit:0,chain:1,isEmpty:1};a(_,y,"attributes");var w=e.Collection=function(t,e){e||(e={}),e.model&&(this.model=e.model),void 0!==e.comparator&&(this.comparator=e.comparator),this._reset(),this.initialize.apply(this,arguments),t&&this.reset(t,n.extend({silent:!0},e))},b={add:!0,remove:!0,merge:!0},E={add:!0,remove:!1},T=function(t,e,n){n=Math.min(Math.max(n,0),t.length);var i,r=Array(t.length-n),s=e.length;for(i=0;i<r.length;i++)r[i]=t[i+n];for(i=0;i<s;i++)t[i+n]=e[i];for(i=0;i<r.length;i++)t[i+s+n]=r[i]};n.extend(w.prototype,u,{model:_,initialize:function(){},toJSON:function(t){return this.map(function(e){return e.toJSON(t)})},sync:function(){return e.sync.apply(this,arguments)},add:function(t,e){return this.set(t,n.extend({merge:!1},e,E))},remove:function(t,e){e=n.extend({},e);var i=!n.isArray(t);t=i?[t]:t.slice();var r=this._removeModels(t,e);return!e.silent&&r.length&&(e.changes={added:[],merged:[],removed:r},this.trigger("update",this,e)),i?r[0]:r},set:function(t,e){if(null!=t){e=n.extend({},b,e),e.parse&&!this._isModel(t)&&(t=this.parse(t,e)||[]);var i=!n.isArray(t);t=i?[t]:t.slice();var r=e.at;null!=r&&(r=+r),r>this.length&&(r=this.length),r<0&&(r+=this.length+1);var s,a,o=[],l=[],u=[],c=[],f={},h=e.add,d=e.merge,p=e.remove,g=!1,m=this.comparator&&null==r&&e.sort!==!1,v=n.isString(this.comparator)?this.comparator:null;for(a=0;a<t.length;a++){s=t[a];var _=this.get(s);if(_){if(d&&s!==_){var y=this._isModel(s)?s.attributes:s;e.parse&&(y=_.parse(y,e)),_.set(y,e),u.push(_),m&&!g&&(g=_.hasChanged(v))}f[_.cid]||(f[_.cid]=!0,o.push(_)),t[a]=_}else h&&(s=t[a]=this._prepareModel(s,e),s&&(l.push(s),this._addReference(s,e),f[s.cid]=!0,o.push(s)))}if(p){for(a=0;a<this.length;a++)s=this.models[a],f[s.cid]||c.push(s);c.length&&this._removeModels(c,e)}var w=!1,E=!m&&h&&p;if(o.length&&E?(w=this.length!==o.length||n.some(this.models,function(t,e){return t!==o[e]}),this.models.length=0,T(this.models,o,0),this.length=this.models.length):l.length&&(m&&(g=!0),T(this.models,l,null==r?this.length:r),this.length=this.models.length),g&&this.sort({silent:!0}),!e.silent){for(a=0;a<l.length;a++)null!=r&&(e.index=r+a),s=l[a],s.trigger("add",s,this,e);(g||w)&&this.trigger("sort",this,e),(l.length||c.length||u.length)&&(e.changes={added:l,removed:c,merged:u},this.trigger("update",this,e))}return i?t[0]:t}},reset:function(t,e){e=e?n.clone(e):{};for(var i=0;i<this.models.length;i++)this._removeReference(this.models[i],e);return e.previousModels=this.models,this._reset(),t=this.add(t,n.extend({silent:!0},e)),e.silent||this.trigger("reset",this,e),t},push:function(t,e){return this.add(t,n.extend({at:this.length},e))},pop:function(t){var e=this.at(this.length-1);return this.remove(e,t)},unshift:function(t,e){return this.add(t,n.extend({at:0},e))},shift:function(t){var e=this.at(0);return this.remove(e,t)},slice:function(){return r.apply(this.models,arguments)},get:function(t){if(null!=t)return this._byId[t]||this._byId[this.modelId(t.attributes||t)]||t.cid&&this._byId[t.cid]},has:function(t){return null!=this.get(t)},at:function(t){return t<0&&(t+=this.length),this.models[t]},where:function(t,e){return this[e?"find":"filter"](t)},findWhere:function(t){return this.where(t,!0)},sort:function(t){var e=this.comparator;if(!e)throw new Error("Cannot sort a set without a comparator");t||(t={});var i=e.length;return n.isFunction(e)&&(e=n.bind(e,this)),1===i||n.isString(e)?this.models=this.sortBy(e):this.models.sort(e),t.silent||this.trigger("sort",this,t),this},pluck:function(t){return this.map(t+"")},fetch:function(t){t=n.extend({parse:!0},t);var e=t.success,i=this;return t.success=function(n){var r=t.reset?"reset":"set";i[r](n,t),e&&e.call(t.context,i,n,t),i.trigger("sync",i,n,t)},B(this,t),this.sync("read",this,t)},create:function(t,e){e=e?n.clone(e):{};var i=e.wait;if(t=this._prepareModel(t,e),!t)return!1;i||this.add(t,e);var r=this,s=e.success;return e.success=function(t,e,n){i&&r.add(t,n),s&&s.call(n.context,t,e,n)},t.save(null,e),t},parse:function(t,e){return t},clone:function(){return new this.constructor(this.models,{model:this.model,comparator:this.comparator})},modelId:function(t){return t[this.model.prototype.idAttribute||"id"]},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(t,e){if(this._isModel(t))return t.collection||(t.collection=this),t;e=e?n.clone(e):{},e.collection=this;var i=new this.model(t,e);return i.validationError?(this.trigger("invalid",this,i.validationError,e),!1):i},_removeModels:function(t,e){for(var n=[],i=0;i<t.length;i++){var r=this.get(t[i]);if(r){var s=this.indexOf(r);this.models.splice(s,1),this.length--,delete this._byId[r.cid];var a=this.modelId(r.attributes);null!=a&&delete this._byId[a],e.silent||(e.index=s,r.trigger("remove",r,this,e)),n.push(r),this._removeReference(r,e)}}return n},_isModel:function(t){return t instanceof _},_addReference:function(t,e){this._byId[t.cid]=t;var n=this.modelId(t.attributes);null!=n&&(this._byId[n]=t),t.on("all",this._onModelEvent,this)},_removeReference:function(t,e){delete this._byId[t.cid];var n=this.modelId(t.attributes);null!=n&&delete this._byId[n],this===t.collection&&delete t.collection,t.off("all",this._onModelEvent,this)},_onModelEvent:function(t,e,n,i){if(e){if(("add"===t||"remove"===t)&&n!==this)return;if("destroy"===t&&this.remove(e,i),"change"===t){var r=this.modelId(e.previousAttributes()),s=this.modelId(e.attributes);r!==s&&(null!=r&&delete this._byId[r],null!=s&&(this._byId[s]=e))}}this.trigger.apply(this,arguments)}});var x={forEach:3,each:3,map:3,collect:3,reduce:0,foldl:0,inject:0,reduceRight:0,foldr:0,find:3,detect:3,filter:3,select:3,reject:3,every:3,all:3,some:3,any:3,include:3,includes:3,contains:3,invoke:0,max:3,min:3,toArray:1,size:1,first:3,head:3,take:3,initial:3,rest:3,tail:3,drop:3,last:3,without:0,difference:0,indexOf:3,shuffle:1,lastIndexOf:3,isEmpty:1,chain:1,sample:3,partition:3,groupBy:3,countBy:3,sortBy:3,indexBy:3,findIndex:3,findLastIndex:3};a(w,x,"models");var S=e.View=function(t){this.cid=n.uniqueId("view"),n.extend(this,n.pick(t,P)),this._ensureElement(),this.initialize.apply(this,arguments)},C=/^(\S+)\s*(.*)$/,P=["model","collection","el","id","attributes","className","tagName","events"];n.extend(S.prototype,u,{tagName:"div",$:function(t){return this.$el.find(t)},initialize:function(){},render:function(){return this},remove:function(){return this._removeElement(),this.stopListening(),this},_removeElement:function(){this.$el.remove()},setElement:function(t){return this.undelegateEvents(),this._setElement(t),this.delegateEvents(),this},_setElement:function(t){this.$el=t instanceof e.$?t:e.$(t),this.el=this.$el[0]},delegateEvents:function(t){if(t||(t=n.result(this,"events")),!t)return this;this.undelegateEvents();for(var e in t){var i=t[e];if(n.isFunction(i)||(i=this[i]),i){var r=e.match(C);this.delegate(r[1],r[2],n.bind(i,this))}}return this},delegate:function(t,e,n){return this.$el.on(t+".delegateEvents"+this.cid,e,n),this},undelegateEvents:function(){return this.$el&&this.$el.off(".delegateEvents"+this.cid),this},undelegate:function(t,e,n){return this.$el.off(t+".delegateEvents"+this.cid,e,n),this},_createElement:function(t){return document.createElement(t)},_ensureElement:function(){if(this.el)this.setElement(n.result(this,"el"));else{var t=n.extend({},n.result(this,"attributes"));this.id&&(t.id=n.result(this,"id")),this.className&&(t.class=n.result(this,"className")),this.setElement(this._createElement(n.result(this,"tagName"))),this._setAttributes(t)}},_setAttributes:function(t){this.$el.attr(t)}}),e.sync=function(t,i,r){var s=O[t];n.defaults(r||(r={}),{emulateHTTP:e.emulateHTTP,emulateJSON:e.emulateJSON});var a={type:s,dataType:"json"};if(r.url||(a.url=n.result(i,"url")||H()),null!=r.data||!i||"create"!==t&&"update"!==t&&"patch"!==t||(a.contentType="application/json",a.data=JSON.stringify(r.attrs||i.toJSON(r))),r.emulateJSON&&(a.contentType="application/x-www-form-urlencoded",a.data=a.data?{model:a.data}:{}),r.emulateHTTP&&("PUT"===s||"DELETE"===s||"PATCH"===s)){a.type="POST",r.emulateJSON&&(a.data._method=s);var o=r.beforeSend;r.beforeSend=function(t){if(t.setRequestHeader("X-HTTP-Method-Override",s),o)return o.apply(this,arguments)}}"GET"===a.type||r.emulateJSON||(a.processData=!1);var l=r.error;r.error=function(t,e,n){r.textStatus=e,r.errorThrown=n,l&&l.call(r.context,t,e,n)};var u=r.xhr=e.ajax(n.extend(a,r));return i.trigger("request",i,u,r),u};var O={create:"POST",update:"PUT",patch:"PATCH",delete:"DELETE",read:"GET"};e.ajax=function(){return e.$.ajax.apply(e.$,arguments)};var M=e.Router=function(t){t||(t={}),t.routes&&(this.routes=t.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},A=/\((.*?)\)/g,N=/(\(\?)?:\w+/g,I=/\*\w+/g,R=/[\-{}\[\]+?.,\\\^$|#\s]/g;n.extend(M.prototype,u,{initialize:function(){},route:function(t,i,r){n.isRegExp(t)||(t=this._routeToRegExp(t)),n.isFunction(i)&&(r=i,i=""),r||(r=this[i]);var s=this;return e.history.route(t,function(n){var a=s._extractParameters(t,n);s.execute(r,a,i)!==!1&&(s.trigger.apply(s,["route:"+i].concat(a)),s.trigger("route",i,a),e.history.trigger("route",s,i,a))}),this},execute:function(t,e,n){t&&t.apply(this,e)},navigate:function(t,n){return e.history.navigate(t,n),this},_bindRoutes:function(){if(this.routes){this.routes=n.result(this,"routes");for(var t,e=n.keys(this.routes);null!=(t=e.pop());)this.route(t,this.routes[t])}},_routeToRegExp:function(t){return t=t.replace(R,"\\$&").replace(A,"(?:$1)?").replace(N,function(t,e){return e?t:"([^/?]+)"}).replace(I,"([^?]*?)"),new RegExp("^"+t+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(t,e){var i=t.exec(e).slice(1);return n.map(i,function(t,e){return e===i.length-1?t||null:t?decodeURIComponent(t):null})}});var L=e.History=function(){this.handlers=[],this.checkUrl=n.bind(this.checkUrl,this),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},k=/^[#\/]|\s+$/g,F=/^\/+|\/+$/g,j=/#.*$/;L.started=!1,n.extend(L.prototype,u,{interval:50,atRoot:function(){var t=this.location.pathname.replace(/[^\/]$/,"$&/");return t===this.root&&!this.getSearch()},matchRoot:function(){var t=this.decodeFragment(this.location.pathname),e=t.slice(0,this.root.length-1)+"/";return e===this.root},decodeFragment:function(t){return decodeURI(t.replace(/%25/g,"%2525"))},getSearch:function(){var t=this.location.href.replace(/#.*/,"").match(/\?.+/);return t?t[0]:""},getHash:function(t){var e=(t||this).location.href.match(/#(.*)$/);return e?e[1]:""},getPath:function(){var t=this.decodeFragment(this.location.pathname+this.getSearch()).slice(this.root.length-1);return"/"===t.charAt(0)?t.slice(1):t},getFragment:function(t){return null==t&&(t=this._usePushState||!this._wantsHashChange?this.getPath():this.getHash()),t.replace(k,"")},start:function(t){if(L.started)throw new Error("Backbone.history has already been started");if(L.started=!0,this.options=n.extend({root:"/"},this.options,t),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._hasHashChange="onhashchange"in window&&(void 0===document.documentMode||document.documentMode>7),this._useHashChange=this._wantsHashChange&&this._hasHashChange,this._wantsPushState=!!this.options.pushState,this._hasPushState=!(!this.history||!this.history.pushState),this._usePushState=this._wantsPushState&&this._hasPushState,this.fragment=this.getFragment(),this.root=("/"+this.root+"/").replace(F,"/"),this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot()){var e=this.root.slice(0,-1)||"/";return this.location.replace(e+"#"+this.getPath()),!0}this._hasPushState&&this.atRoot()&&this.navigate(this.getHash(),{replace:!0})}if(!this._hasHashChange&&this._wantsHashChange&&!this._usePushState){this.iframe=document.createElement("iframe"),this.iframe.src="javascript:0",this.iframe.style.display="none",this.iframe.tabIndex=-1;var i=document.body,r=i.insertBefore(this.iframe,i.firstChild).contentWindow;r.document.open(),r.document.close(),r.location.hash="#"+this.fragment}var s=window.addEventListener||function(t,e){return attachEvent("on"+t,e)};if(this._usePushState?s("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe?s("hashchange",this.checkUrl,!1):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),!this.options.silent)return this.loadUrl()},stop:function(){var t=window.removeEventListener||function(t,e){return detachEvent("on"+t,e)};this._usePushState?t("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe&&t("hashchange",this.checkUrl,!1),this.iframe&&(document.body.removeChild(this.iframe),this.iframe=null),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),L.started=!1},route:function(t,e){this.handlers.unshift({route:t,callback:e})},checkUrl:function(t){var e=this.getFragment();return e===this.fragment&&this.iframe&&(e=this.getHash(this.iframe.contentWindow)),e!==this.fragment&&(this.iframe&&this.navigate(e),void this.loadUrl())},loadUrl:function(t){return!!this.matchRoot()&&(t=this.fragment=this.getFragment(t),n.some(this.handlers,function(e){if(e.route.test(t))return e.callback(t),!0}))},navigate:function(t,e){if(!L.started)return!1;e&&e!==!0||(e={trigger:!!e}),t=this.getFragment(t||"");var n=this.root;""!==t&&"?"!==t.charAt(0)||(n=n.slice(0,-1)||"/");var i=n+t;if(t=this.decodeFragment(t.replace(j,"")),this.fragment!==t){if(this.fragment=t,this._usePushState)this.history[e.replace?"replaceState":"pushState"]({},document.title,i);else{if(!this._wantsHashChange)return this.location.assign(i);if(this._updateHash(this.location,t,e.replace),this.iframe&&t!==this.getHash(this.iframe.contentWindow)){var r=this.iframe.contentWindow;e.replace||(r.document.open(),r.document.close()),this._updateHash(r.location,t,e.replace)}}return e.trigger?this.loadUrl(t):void 0}},_updateHash:function(t,e,n){if(n){var i=t.href.replace(/(javascript:|#).*$/,"");t.replace(i+"#"+e)}else t.hash="#"+e}}),e.history=new L;var D=function(t,e){var i,r=this;return i=t&&n.has(t,"constructor")?t.constructor:function(){return r.apply(this,arguments)},n.extend(i,r,e),i.prototype=n.create(r.prototype,t),i.prototype.constructor=i,i.__super__=r.prototype,i};_.extend=w.extend=M.extend=S.extend=L.extend=D;var H=function(){throw new Error('A "url" property or function must be specified')},B=function(t,e){var n=e.error;e.error=function(i){n&&n.call(e.context,t,i,e),t.trigger("error",t,i,e)}};return e})}).call(exports,function(){return this}())},function(t,exports,e){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(exports,"__esModule",{value:!0});var i=e(10),r=n(i),s=function(){this.initialize.apply(this,arguments)};s.prototype={initialize:function(){}},s.extend=r.default.Model.extend,exports.default=s},function(t,exports,e){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(exports,"__esModule",{value:!0});var i=e(10),r=n(i),s=e(13),a=n(s),o=e(14),l=n(o);exports.default=r.default.View.extend({startX:0,startY:0,startScale:1,rotation:0,getSignature:function(){return this.signature||this.lockSignature(),this.signature},lockSignature:function(){this.signature=(0,l.default)(this.el.outerHTML),this.innerSignature=(0,l.default)(this.el.innerHTML)},matchesSignature:function(t){return t===this.signature},matchesInnerSignature:function(t){return t===this.innerSignature},matchesAnySignature:function(t){return this.matchesSignature(t)||this.matchesInnerSignature(t)},disable:function(){this.isDisabled=!0,this.$el.addClass(a.default.IS_DISABLED)},enable:function(){this.isDisabled=!1,this.$el.removeClass(a.default.IS_DISABLED)},isInDOM:function(){return null!==this.el.parentNode},startTransform:function(t){t.preventDefault(),t.stopPropagation(),this.startX=t.pageX,this.startY=t.pageY,this.startScale=t.scale,this.startRotation=t.rotation,t.currentTarget.classList.add("alf-is-moving")},transformEventTarget:function(t){this.transformElByEvent(t.currentTarget,t)},transformEl:function(t){this.transformElByEvent(this.el,t)},transformElByEvent:function(t,e){e.preventDefault(),e.stopPropagation(),e=e.originalEvent||e;var n=e.pageX-this.startX,i=e.pageY-this.startY,r=e.scale,s=e.rotation-this.startRotation;this.doTransform(t,{x:n,y:i,scale:r,rotation:s})},doTransform:function(t,e){var n="";n+="translate3d("+e.x+"px, "+e.y+"px, 1px)",e.rotation&&(n+="rotate("+e.rotation+"deg) "),n+="scale("+e.scale+") ",t.style.webkitTransition="none",t.style.webkitTransform=n},enableScrolling:function(t){t=t||{x:!0,y:!0};var e=[];t.x&&e.push("alf-is-scrollable-x"),t.y&&e.push("alf-is-scrollable-y"),this.$el.addClass(e.join(" "))},preventDefault:function(t){t.preventDefault()}})},function(t,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default={ALLOW_MULTIPLE:"alf-allow-multiple",ALLOW_OVERFLOW:"alf-allow-overflow",ASSET_STYLESHEET:"alf-asset-stylesheet",BREAK_BEFORE:"alf-break-before",BTN_GROUP:"alf-btn-group",CONTAINER:"alf-container",CONTAINER_FULLSCREEN:"alf-container-fullscreen",CONTAINER_INLINE:"alf-container-inline",CONTAINER_IS_UNLOADED:"alf-container-is-unloaded",CONTROLS_OFF:"alf-controls-off",FULLSCREEN_CONTENT:"alf-fullscreen-content",FULLSCREEN_EXIT:"alf-fullscreen-exit",FULLSCREEN_TOOLBAR:"alf-fullscreen-toolbar",MULTI_CHOICE:"alf-multiple-choices",IMAGE:"alf-image",IS_BREAKABLE:"alf-is-breakable",IS_DISABLED:"alf-is-disabled",IS_DRAGGABLE:"alf-is-draggable",IS_DRAGGABLE_X:"alf-is-draggable-x",IS_DRAGGABLE_Y:"alf-is-draggable-y",IS_EDITABLE:"alf-is-editable",IS_HIDDEN:"alf-is-hidden",IS_FIRST_BLOCK:"alf-block-is-first",IS_LAST_BLOCK:"alf-block-is-last",IS_NON_BREAKABLE:"alf-is-non-breakable",IS_NON_REARRANGEABLE:"alf-is-non-rearrangeable",IS_NON_SPLITTABLE:"alf-is-non-splittable",IS_OPTIONAL:"alf-is-optional",IS_PLAYING:"alf-is-playing",IS_REARRANGEABLE:"alf-is-rearrangeable",IS_REMOVABLE:"alf-is-removable",IS_REMOVED:"alf-is-removed",IS_RESPONSIVE:"alf-is-responsive",IS_RESIZABLE:"alf-is-resizable",IS_SPLITTABLE:"alf-is-splittable",IS_VISIBLE:"alf-is-visible",NO_SCORE:"alf-no-score",PAGENUM_X:function(t){return"alf-pagenum-"+t},PAGENUM_TOTAL_X:function(t){return"alf-pagenum-total-"+t},REVISION:function(t){return"alf-rev-"+t},REGION:"alf-region",REGION_FLEXIBLE:"alf-region-flexible",SIZE_DETECTOR:"alf-size-detector",STICK_TO_NEXT:"alf-stick-to-next",STRETCH_TO_FIT:"alf-stretch-to-fit",SUPPORTS_FULLSCREEN:"alf-supports-fullscreen",WIDGET:"alf-widget"}},function(t,exports){"use strict";function e(t,e){var n=t[0],o=t[1],l=t[2],u=t[3];n=i(n,o,l,u,e[0],7,-680876936),u=i(u,n,o,l,e[1],12,-389564586),l=i(l,u,n,o,e[2],17,606105819),o=i(o,l,u,n,e[3],22,-1044525330),n=i(n,o,l,u,e[4],7,-176418897),u=i(u,n,o,l,e[5],12,1200080426),l=i(l,u,n,o,e[6],17,-1473231341),o=i(o,l,u,n,e[7],22,-45705983),n=i(n,o,l,u,e[8],7,1770035416),u=i(u,n,o,l,e[9],12,-1958414417),l=i(l,u,n,o,e[10],17,-42063),o=i(o,l,u,n,e[11],22,-1990404162),n=i(n,o,l,u,e[12],7,1804603682),u=i(u,n,o,l,e[13],12,-40341101),l=i(l,u,n,o,e[14],17,-1502002290),o=i(o,l,u,n,e[15],22,1236535329),n=r(n,o,l,u,e[1],5,-165796510),u=r(u,n,o,l,e[6],9,-1069501632),l=r(l,u,n,o,e[11],14,643717713),o=r(o,l,u,n,e[0],20,-373897302),n=r(n,o,l,u,e[5],5,-701558691),u=r(u,n,o,l,e[10],9,38016083),l=r(l,u,n,o,e[15],14,-660478335),o=r(o,l,u,n,e[4],20,-405537848),n=r(n,o,l,u,e[9],5,568446438),u=r(u,n,o,l,e[14],9,-1019803690),l=r(l,u,n,o,e[3],14,-187363961),o=r(o,l,u,n,e[8],20,1163531501),n=r(n,o,l,u,e[13],5,-1444681467),u=r(u,n,o,l,e[2],9,-51403784),l=r(l,u,n,o,e[7],14,1735328473),o=r(o,l,u,n,e[12],20,-1926607734),n=s(n,o,l,u,e[5],4,-378558),u=s(u,n,o,l,e[8],11,-2022574463),l=s(l,u,n,o,e[11],16,1839030562),o=s(o,l,u,n,e[14],23,-35309556),n=s(n,o,l,u,e[1],4,-1530992060),u=s(u,n,o,l,e[4],11,1272893353),l=s(l,u,n,o,e[7],16,-155497632),o=s(o,l,u,n,e[10],23,-1094730640),n=s(n,o,l,u,e[13],4,681279174),u=s(u,n,o,l,e[0],11,-358537222),l=s(l,u,n,o,e[3],16,-722521979),o=s(o,l,u,n,e[6],23,76029189),n=s(n,o,l,u,e[9],4,-640364487),u=s(u,n,o,l,e[12],11,-421815835),l=s(l,u,n,o,e[15],16,530742520),o=s(o,l,u,n,e[2],23,-995338651),n=a(n,o,l,u,e[0],6,-198630844),u=a(u,n,o,l,e[7],10,1126891415),l=a(l,u,n,o,e[14],15,-1416354905),o=a(o,l,u,n,e[5],21,-57434055),n=a(n,o,l,u,e[12],6,1700485571),u=a(u,n,o,l,e[3],10,-1894986606),l=a(l,u,n,o,e[10],15,-1051523),o=a(o,l,u,n,e[1],21,-2054922799),n=a(n,o,l,u,e[8],6,1873313359),u=a(u,n,o,l,e[15],10,-30611744),l=a(l,u,n,o,e[6],15,-1560198380),o=a(o,l,u,n,e[13],21,1309151649),n=a(n,o,l,u,e[4],6,-145523070),u=a(u,n,o,l,e[11],10,-1120210379),l=a(l,u,n,o,e[2],15,718787259),o=a(o,l,u,n,e[9],21,-343485551),t[0]=h(n,t[0]),t[1]=h(o,t[1]),t[2]=h(l,t[2]),t[3]=h(u,t[3])}function n(t,e,n,i,r,s){return e=h(h(e,t),h(i,s)),h(e<<r|e>>>32-r,n)}function i(t,e,i,r,s,a,o){return n(e&i|~e&r,t,e,s,a,o)}function r(t,e,i,r,s,a,o){return n(e&r|i&~r,t,e,s,a,o)}function s(t,e,i,r,s,a,o){return n(e^i^r,t,e,s,a,o)}function a(t,e,i,r,s,a,o){return n(i^(e|~r),t,e,s,a,o)}function o(t){var n,i=t.length,r=[1732584193,-271733879,-1732584194,271733878];for(n=64;n<=t.length;n+=64)e(r,l(t.substring(n-64,n)));t=t.substring(n-64);var s=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(n=0;n<t.length;n++)s[n>>2]|=t.charCodeAt(n)<<(n%4<<3);if(s[n>>2]|=128<<(n%4<<3),n>55)for(e(r,s),n=0;n<16;n++)s[n]=0;return s[14]=8*i,e(r,s),r}function l(t){var e,n=[];for(e=0;e<64;e+=4)n[e>>2]=t.charCodeAt(e)+(t.charCodeAt(e+1)<<8)+(t.charCodeAt(e+2)<<16)+(t.charCodeAt(e+3)<<24);return n}function u(t){for(var e="",n=0;n<4;n++)e+=d[t>>8*n+4&15]+d[t>>8*n&15];return e}function c(t){for(var e=0;e<t.length;e++)t[e]=u(t[e]);return t.join("")}function f(t){return c(o(t))}function h(t,e){return t+e&4294967295}Object.defineProperty(exports,"__esModule",{value:!0});var d="0123456789abcdef".split("");exports.default=f},function(t,exports,e){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(exports,"__esModule",{value:!0});var i=e(16),r=n(i),s=e(18),a=n(s),o=e(19),l=n(o),u=e(20),c=n(u),f=e(21),h=n(f);exports.default={Dispatcher:r.default,Appear:a.default,Clip:l.default,Fade:c.default,Scale:h.default}},function(t,exports,e){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(exports,"__esModule",{value:!0});var i=e(11),r=n(i),s=e(10),a=n(s),o=e(1),l=n(o),u=e(3),c=n(u),f=e(17),h=n(f),d=Math,p=r.default.extend();l.default.extend(p.prototype,a.default.Events,{initialize:function(t){t=this.options=l.default.extend({},t||{}),l.default.bindAll(this,"stopRunning"),this.isReset=!1,this._isRunning=!1,this._isReversible=!1,t.target&&this.setTarget(t.target),t.to&&this.setTo(t.to)},setTarget:function(t){this.target=l.default.defaults(t,{el:null,width:null,height:null,top:null,left:null}),this.calcMetrics()},setTargetEl:function(t){this.setTarget({el:t})},setTo:function(t){this.to=l.default.defaults(t,{el:null,width:null,height:null})},isRunning:function(){return this._isRunning},stopRunning:function(){this._isRunning=!1},calcMetrics:function(){var t,e;t=this.target,e=this.to,t=l.default.extend(t,t.el.getBoundingClientRect()),e=l.default.extend(e,{width:e.el.clientWidth,height:e.el.clientHeight}),e.scaleX=t.width/e.width,e.scaleY=t.height/e.height,e.scale=d.max(e.scaleX,e.scaleY),t.scaleX=e.width/t.width,t.scaleY=e.height/t.height,t.scale=d.min(t.scaleX,t.scaleY),this.offsetX=d.round(t.left+(t.width-e.width)/2),this.offsetY=d.round(t.top+(t.height-e.height)/2),e.maskHeight=d.round(t.height/e.scale),
e.maskWidth=d.round(t.width/e.scale),e.clipHeight=e.height-e.maskHeight,e.clipWidth=e.width-e.maskWidth},reset:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e=this.to,n=this.options.effect.animateFromProps.call(this);if(e.el.style.webkitTransitionDuration="0ms",e.el.style.mozTransitionDuration="0ms",e.el.style.msTransitionDuration="0ms",e.el.style.oTransitionDuration="0ms",e.el.style.transitionDuration="0ms",t)for(var i in n)i.toLowerCase().indexOf("transition")===-1&&(e.el.style[i]=n[i])},run:function(t){var e=this;if(this._isRunning)return!1;this._isRunning=!0,this._isReversible=!0;var n=this.target;if(!this.options.upscaleTarget||!n||!n.el)return void this.trigger("willAppear",this,function(){e._animate(t)});n.el.classList.add("alf-is-moving");var i="",r=this.to.width/2-n.width/2-n.left,s=this.to.height/2-n.height/2-n.top;i+="translate3d("+r+"px, "+s+"px, 1px) ",i+="scale("+n.scale+") ";var a=l.default.bind(this._onScaleEnd,this,t);(0,c.default)(n.el).one("webkitTransitionEnd",a).one("transitionend",a),n.el.style.msTransition="-ms-transform ease-out 300ms",n.el.style.webkitTransition="-webkit-transform ease-out 300ms",n.el.style.transition="transform ease-out 300ms",n.el.style.msTransform=i,n.el.style.webkitTransform=i,n.el.style.transform=i},reverse:function(t){var e=this.options.effect;if(this._isRunning||!this._isReversible)return!1;if(this._isRunning=!0,!h.default.supportsTransitionEnd)return this._onReverseEnd(t);var n=l.default.bind(this._onReverseEnd,this,t);(0,c.default)(this.to.el).one("webkitTransitionEnd",n).one("transitionend",n);var i=(e.reverseProps||e.animateFromProps).call(this);for(var r in i)this.to.el.style[r]=i[r]},reverseTo:function(t,e){this.to={el:t},this.calcMetrics(),this.reverse(e)},_animate:function(t){var e=this,n=h.default.supportsTransitionEnd;if(this.reset(n),this.trigger("ready",this),!n)return this._onAnimateEnd(t);var i=l.default.bind(this._onAnimateEnd,this,t);(0,c.default)(this.to.el).one("webkitTransitionEnd",i).one("transitionend",i);var r=this.options.effect.animateToProps.call(this);l.default.each(r,function(t,n){e.to.el.style[n]=t})},_onAnimateEnd:function(t){var e;this.to&&this.to.el&&(this.to.el.style.removeProperty("-ms-transition"),this.to.el.style.removeProperty("-webkit-transition"),this.to.el.style.removeProperty("transition")),this.target&&this.target.el&&(e=this.target.el.style,e.removeProperty("-ms-transform"),e.removeProperty("-webkit-transform"),e.removeProperty("-webkit-transition"),e.removeProperty("transform"),e.removeProperty("transition"),(0,c.default)(this.target.el).removeClass("alf-is-moving")),t&&t.call(this,this),this.trigger("didAppear",this),setTimeout(this.stopRunning,100)},_onReverseEnd:function(t){this._isReversible=!1,this.to.el.style.webkitTransition="none",this.to.el.style.webkitTransform="none",this.to.el.style.mozTransition="none",this.to.el.style.mozTransform="none",this.to.el.style.msTransition="none",this.to.el.style.msTransform="none",this.to.el.style.oTransition="none",this.to.el.style.oTransform="none",this.to.el.style.transition="none",this.to.el.style.transform="none",t&&t.call(this,this),this.trigger("didDisappear",this),setTimeout(this.stopRunning,100)},_onScaleEnd:function(t){var e=this,n=function(){e._animate(t)};this.trigger("willAppear",this,n)}}),exports.default=p},function(t,exports,e){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t){return function(){console[t].apply(console,[].slice.call(arguments))}}Object.defineProperty(exports,"__esModule",{value:!0});var r=e(1),s=n(r),a="undefined"!=typeof window,o=!1;if(a){var l={transition:"transitionend",WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"otransitionend"},u=document.createElement("div");for(var c in l)if("undefined"!=typeof u.style[c]){o=!0;break}}var f={touchScreen:a&&"ontouchstart"in window,supportsTransitionEnd:o,getRandomInt:function(t,e){return Math.floor(Math.random()*(e-t+1))+t},getVendorPrefix:s.default.memoize(function(t){var e=["","webkit","moz","ms"];return t=f.camelize(t),s.default.find(e,function(e){return void 0!==document.body.style[e+t]})}),prefixStyle:function(t,e){var n=f.getVendorPrefix(t);return e?n+f.camelize(t):"-"+n+"-"+t},camelize:function(t){return t.charAt(0).toUpperCase()+t.slice(1)},matchMedia:"undefined"!=typeof window&&window.matchMedia&&s.default.bind(window.matchMedia,window)};f.dom={getFieldMap:function(t){var e=t.getAttribute("data-map");return e?e.split(" "):[]},getMediaQuery:function(t){return t.getAttribute("data-media")}},a&&!window.console&&(window.console={}),a&&!window.console.log&&s.default.each(["log","warning","error","info"],function(t){window.console[t]=function(){return{}}}),f.console={log:i("log"),warn:i("warn"),error:i("error"),info:i("info"),debug:i("debug"),groupCollapsed:i("groupCollapsed"),group:i("group"),groupEnd:i("groupEnd")},exports.default=f},function(t,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e={reverseProps:function(){return{webkitTransition:"-webkit-transform ease-out 300ms",webkitTransform:"translate3d(-1500px, -1500px, 0) scale(0.4)"}},animateFromProps:function(){var t="";return t+="scaleX(0.8) scaleY(0.8) ",{webkitTransition:"-webkit-transform ease-out 300ms, opacity ease-out 300ms",webkitTransform:t,opacity:0}},animateToProps:function(){return{webkitTransition:"-webkit-transform ease-out 300ms, opacity ease-out 300ms",webkitTransform:"translate3d(0, 0, 0) scaleX(1) scaleY(1)",opacity:1}}};exports.default=e},function(t,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=Math;exports.default={animateFromProps:function(){var t="",n=this.to,i=e.round(this.clipHeight/2),r=n.height-i,s=e.round(this.clipWidth/2),a=n.width-s;return t+="translate3d("+this.offsetX+"px, "+this.offsetY+"px, 0px) ",t+="scale("+this.to.scale+") ",{webkitTransition:"-webkit-transform ease-out 300ms, clip ease-out 300ms",webkitTransform:t,clip:"rect("+i+"px, "+a+"px, "+r+"px, "+s+"px) "}},animateToProps:function(){var t=this.to;return{webkitTransition:"-webkit-transform ease-out 300ms, clip ease-out 300ms",webkitTransform:"translate3d(0, 0, 0) scaleX(1) scaleY(1)",clip:"rect(0px, "+t.width+"px, "+t.height+"px, 0px)"}}}},function(t,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e={animateFromProps:function(){return{webkitTransition:"opacity ease-out 300ms",mozTransition:"opacity ease-out 300ms",msTransition:"opacity ease-out 300ms",oTransition:"opacity ease-out 300ms",transition:"opacity ease-out 300ms",opacity:0}},animateToProps:function(){return{webkitTransition:"opacity ease-out 300ms",mozTransition:"opacity ease-out 300ms",msTransition:"opacity ease-out 300ms",oTransition:"opacity ease-out 300ms",transition:"opacity ease-out 300ms",opacity:1}}};exports.default=e},function(t,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e={animateFromProps:function(){var t="";return t+="translate3d("+this.offsetX+"px, "+this.offsetY+"px, 0px) ",t+="scaleX("+this.scaleX+") scaleY("+this.scaleY+") ",{webkitTransition:"-webkit-transform ease-out 300ms, opacity ease-out 200ms",webkitTransform:t,opacity:0}},animateToProps:function(){return{webkitTransition:"-webkit-transform ease-out 300ms, opacity ease-out 200ms",webkitTransform:"translate3d(0, 0, 0) scaleX(1) scaleY(1)",opacity:1}}};exports.default=e},function(t,exports,e){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(exports,"__esModule",{value:!0});var i=e(23),r=n(i),s=e(24),a=n(s),o=e(25),l=n(o),u=e(26),c=n(u);exports.default={Manager:r.default,View:a.default,Page:l.default,Fullscreen:c.default}},function(t,exports,e){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(exports,"__esModule",{value:!0});var i=e(11),r=n(i);exports.default=r.default.extend({initialize:function(){this.layers=[],this.length=0},add:function(t){return this.layers.push(t),this.length=this.layers.length,this},remove:function(t){var e=this.layers;return e.splice(e.indexOf(t),1),this.length=this.layers.length,this},at:function(t){return this.layers[t]},getPos:function(t){return this.layers.indexOf(t)},getLayerAbove:function(t){return this.at(this.getPos(t)+1)},getLayerBelow:function(t){return this.at(this.getPos(t)-1)}})},function(t,exports,e){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(exports,"__esModule",{value:!0});var i=e(1),r=n(i),s=e(12),a=n(s),o=e(15),l=n(o),u=e(13),c=n(u),f=a.default.extend();r.default.extend(f.prototype,{initialize:function(t){t&&t.manager&&(this.manager=t.manager,this.manager.add(this))},tearDown:function(){this.stopListening()},show:function(){return this.$el.removeClass(c.default.IS_HIDDEN),this},hide:function(){return this.$el.addClass(c.default.IS_HIDDEN),this},above:function(){return this.manager.getLayerAbove(this)},below:function(){return this.manager.getLayerBelow(this)},minimize:function(){var t=this,e=this.below();return e.show(),e.transition.reverse(function(){t.hide()}),this},transitionTo:function(t,e,n){return this._createTransition({layer:t,target:n,effect:e,upscaleTarget:!1})},scaleTo:function(t,e,n){return this._createTransition({layer:t,target:n,effect:e,upscaleTarget:!0})},transitionToLayerAbove:function(t,e){return this.transitionTo(this.above(),t,e)},transitionToLayerBelow:function(t,e){return this.transitionTo(this.below(),e,t)},_createTransition:function(t){t.to={el:t.layer.el};var e=new l.default.Dispatcher(t);return this.listenTo(e,"didDisappear",function(e){t.layer.$el.addClass(c.default.IS_HIDDEN)}),this.listenTo(e,"ready",function(){t.layer.$el.removeClass(c.default.IS_HIDDEN)}),e}});var h=f.prototype;h.getLayerBelow=h.below,h.getLayerAbove=h.above,exports.default=f},function(t,exports,e){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(exports,"__esModule",{value:!0});var i=e(1),r=n(i),s=e(24),a=n(s),o=a.default.extend();r.default.extend(o.prototype,{render:function(){return this}}),exports.default=o},function(t,exports,e){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(exports,"__esModule",{value:!0});var i=e(1),r=n(i),s=e(3),a=n(s),o=e(24),l=n(o),u=e(13),c=n(u),f=e(17),h=n(f),d=e(9),p=n(d),g=l.default.extend();r.default.extend(g.prototype,{fullscreenEvents:{touch:{touchstart:"_onTouchStart",singleTap:"toggleControls","tap .alf-fullscreen-exit":"exitFullscreen",doubleTap:"exitFullscreen",touchend:"preventDefault"},pointer:{mouseover:"showControls",mouseout:"hideControls","click .alf-fullscreen-exit":"exitFullscreen",dblclick:"exitFullscreen"}},initialize:function(t){t=this.options=r.default.extend({},t||{}),r.default.bindAll(this,"_onScroll"),g.__super__.initialize.apply(this,r.default.toArray(arguments)),this.position=this.$el.css("position"),this.listenTo(p.default,"fullscreenWillAppear",this._fullscreenWillAppear),t.resizeToWindow=void 0===t.resizeToWindow||t.resizeToWindow,this.delegateEvents(h.default.touchScreen?this.fullscreenEvents.touch:this.fullscreenEvents.pointer)},tearDown:function(){this.stopListening(),this.$el.empty()},render:function(){return this},renderFullscreenContainer:function(t){var e,n,i=new RegExp("\\s?"+c.default.REVISION("")+"[^\\s]*");return this.el.className=this.el.className.replace(i,""),n=(0,a.default)("<div>").addClass(c.default.BTN_GROUP),n.append((0,a.default)("<button>").addClass(c.default.FULLSCREEN_EXIT)),this.$toolbar=(0,a.default)("<div>").addClass(c.default.FULLSCREEN_TOOLBAR),this.$toolbar.append(n),this.$content=(0,a.default)("<div>").addClass(c.default.FULLSCREEN_CONTENT),this.$content.append(t.el),e=document.createDocumentFragment(),e.appendChild(this.$toolbar[0]),e.appendChild(this.$content[0]),this.$el.empty().removeClass(c.default.CONTROLS_OFF).addClass(c.default.REVISION(t.options.revision)).append(e),this.options.resizeToWindow||this.metrics||this._calculateMetrics(),this},toggleControls:function(){this.$el.toggleClass(c.default.CONTROLS_OFF)},showControls:function(){this.$el.removeClass(c.default.CONTROLS_OFF)},hideControls:function(){this.$el.addClass(c.default.CONTROLS_OFF)},exitFullscreen:function(t){t&&(t.stopPropagation(),t.preventDefault());var e=this.below();return!this.gestureStarted&&!e.transition.isRunning()&&((0,a.default)(window).off("mousewheel",this._onMouseWheelScroll).off("scroll touchmove touchend",this._onScroll),document.body.style.removeProperty("overflow"),e.transition.reverse(),void p.default.trigger("fullscreenWillDisappear"))},_calculateMetrics:function(){this._windowHeight=window.innerHeight,this._windowWidth=window.innerWidth,this.metrics=this.$el.metrics()},_onTouchStart:function(t){var e,n=(0,a.default)(t.target);e=n.css("overflow"),"scroll"!==e&&"auto"!==e&&t.preventDefault()},_onGestureStart:function(t){return!this.gestureStarted&&!this.below().transition.isRunning()&&(this.gestureStarted=!0,void this.startTransform(t))},_onGestureChange:function(t){return!this.below().transition.isRunning()&&void this.transformEventTarget(t)},_onGestureEnd:function(t){var e=this.below();return!e.transition.isRunning()&&(e.transition.reverse(),void(this.gestureStarted=!1))},_fullscreenWillAppear:function(t){var e;if(e={},this.options.resizeToWindow&&(e.width=window.innerWidth+"px",e.height=window.innerHeight+"px"),"fixed"!==this.position){this.x=window.pageXOffset,this.y=window.pageYOffset;var n="translate("+this.x+"px, "+this.y+"px)";e[h.default.prefixStyle("transform")]=n,e.transform=n}this.$el.css(e),document.body.style.overflow="hidden",(0,a.default)(window).on("mousewheel",this._onMouseWheelScroll).on("scroll touchmove touchend",this._onScroll)},_onMouseWheelScroll:function(t){t.preventDefault()},_onScroll:function(t){if("fixed"!==this.position&&(this.y!==window.pageYOffset||this.x!==window.pageXOffset)){this.y=window.pageYOffset,this.x=window.pageXOffset;var e="translate("+this.x+"px, "+this.y+"px)",n={transform:e};n[h.default.prefixStyle("transform")]=e,this.$el.css(n)}}}),exports.default=g},function(t,exports,e){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(exports,"__esModule",{value:!0});var i=e(28),r=n(i),s=e(36),a=n(s),o=e(53),l=n(o),u=e(52),c=n(u),f=e(56),h=n(f),d=e(37),p=n(d);exports.default={Article:r.default,Page:a.default,Template:l.default,TemplateManager:c.default,Content:h.default,Format:p.default}},function(t,exports,e){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(exports,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r=e(3),s=n(r),a=e(1),o=n(a),l=e(17),u=n(l),c=e(12),f=n(c),h=e(29),d=n(h),p=e(34),g=n(p),m=e(35),v=n(m),_=e(37),y=n(_),w=e(13),b=n(w),E=e(52),T=n(E),x=e(36),S=n(x),C=e(56),P=n(C),O=f.default.extend();o.default.extend(O.prototype,g.default,d.default,{initialize:function(t){t=this.options=o.default.extend({revision:"no-rev"},t||{}),o.default.bindAll(this,"render"),this.templates=null,this.overrideTemplates={},this.layer=t.layer||null,this.fullscreenLayer=t.fullscreenLayer||this.layer&&this.layer.above()||null,this.pages={},this.numberOfPages=0,this.format=t.format||null,this.defaultMetrics(t.metrics),t.content&&this.setContent(t.content),this.setupWidgets(t),t.templates&&this.setTemplates(t.templates)},tearDown:function(){o.default.invoke(this.pages,"tearDown")},render:function(){return this},discard:function(){o.default.invoke(this.pages,"tearDown"),this.pages={},this.overrideTemplates={},this.numberOfPages=0},compile:function(){var t=new v.default(this);return t.compile()},decompile:function(t){var e=new v.default(this);return e.decompile(t),this},setTemplates:function(t){var e=this.templates||[];return t=T.default.getEligibleTemplatesForArticle(this,t),e&&e.length?void(this.templates=o.default.map(t,function(t){var n=o.default.find(e,function(e){return e.name===t.name});return n&&(n.setElement(t.el),this._reloadPagesUsingTemplate(n)),n||t},this)):void(this.templates=t)},_reloadPagesUsingTemplate:function(t){o.default.each(this.pages,function(e){e.template===t&&(e.template=null,e.setTemplateIfUsable(t))})},setTemplateForPageNum:function(t,e){this.overrideTemplates[e]=t,this.pages[e]&&(this.pages[e].hasOverrideTemplate=!0)},revert:function(t){for(var e in this.pages)e<t||!this.pages[e]||this.pages[e].revert()},reflow:function(t){o.default.each(["prepareToReflow","reflow"],function(e){for(var n in this.pages)n<t||!this.pages[n]||this.pages[n][e]()},this)},renderPage:function(t,e){var n,i;return this._calcContentMetrics(t),n=o.default.isObject(e)?e:this._getOrCreatePageForPageNum(e),i=this.overrideTemplates[n.pageNum],n.prepareToRender(),t.innerHTML="",(0,s.default)(t).append(n.el),n.render(),n.hasOverrideTemplate=!(!i||i!==n.template),n},renderPages:function(t,e){var n;for(e=e||0,this._calcContentMetrics(t);!this.content.isEmpty()&&(n=this._doRenderPage(t,e));)this.pages[e]=n,e+=1;return this.numberOfPages=this.getNumberOfPagesInUse(),o.default.invoke(this.pages,"allPagesDidRender",this.numberOfPages),this},getNumberOfPagesInUse:function(){var t=0;for(var e in this.pages)this.pages[e].pageTemplate.didRetainElements()?t+=1:(this.pages[e].tearDown(),delete this.pages[e]);return t},setContent:function(t){if(t instanceof P.default)this.content=t;else{if(!o.default.isPlainObject(t))throw new Error("Unsupported data in setContent: "+("undefined"==typeof t?"undefined":i(t)));this.content=new P.default(t)}},findContainerInElement:function(t){var e,n;return n=(0,s.default)(t),n=n.is("."+b.default.CONTAINER)?n:n.find("."+b.default.CONTAINER),!!n.length&&(o.default.each(this.pages,function(t){if(e=o.default.find(t.pageTemplate.containers,function(t){return t.el===n[0]}))return!1}),e)},_getOrCreatePageForPageNum:function(t){var e=this.pages[t],n=this.overrideTemplates[t];return e||(e=this.createPage(t)),e.rendered?e:(e.scoredTemplates=T.default.getScoredTemplatesForPage(e,this.templates.slice(0)),e.templates=o.default.pluck(e.scoredTemplates,"template"),!!(n&&e.setTemplateIfUsable(n)||e.setupBestTemplate())&&e)},createPage:function(t){var e=this.metrics;return new S.default({className:this.content.className,content:this.content,layer:this.layer,fullscreenLayer:this.fullscreenLayer,widgets:this.widgets,fullscreenWidgets:this.fullscreenWidgets,pageNum:t,format:this.format,revision:this.options.revision,metrics:{height:e.height,width:e.width,lineHeight:e.lineHeight}})},_doRenderPage:function(t,e){for(var n,i=0;;){if(n=this._getOrCreatePageForPageNum(e),!n)return!1;if(this.renderPage(t,n),n.pageTemplate.didRetainElements())return n;if(u.default.console.warn("Page "+e+" did not retain any elements on attempt "+i,"left:",this.content.elementsLeft),i+=1,i>1||!this.overrideTemplates[e])return u.default.console.warn("stopped trying after "+i+" attempts"),!1;this.overrideTemplates[e]=null}},_getSampleTemplate:function(){var t=0;return o.default.find(this.templates,function(e){return e.regions&&e.regions.length>t})},_calcContentMetrics:function(t){if(!this.hasCalculatedMetrics){this.setMetrics((0,s.default)(t).metrics()),this.format&&this.format instanceof y.default&&(this.metrics.height=this.format.get("height"),this.metrics.width=this.format.get("width"));var e,n=this._getSampleTemplate();if(!n)return void u.default.console.warn("No sample template found. Failed to precalculate metrics for ",this);n=T.default.getPageTemplateFromTemplate(n),e=n.regions,n.$el.css("visibility","hidden"),n.$el.addClass(b.default.REVISION(this.options.revision)),t.appendChild(n.el),this._calcBlockMetrics(e[0].el),t.removeChild(n.el),e[0].$el.empty(),this.hasCalculatedMetrics=!0}},_calcBlockMetrics:function(t){var e=this.content.getBlocks(),n=document.createDocumentFragment();o.default.each(e,function(t){n.appendChild(t.render().el)}),t.appendChild(n),o.default.each(e,function(t){t.calculateMetrics()})}}),exports.default=O},function(t,exports,e){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(exports,"__esModule",{value:!0});var i=e(1),r=n(i),s=e(30),a=n(s),o=e(31),l=n(o);exports.default={setupWidgets:function(t){var e;this.widgets=t.widgets,t.widgets instanceof a.default||(this.widgets=new a.default(l.default),e=r.default.isArray(t.widgets),r.default.each(t.widgets,function(t,n){this.widgets.add(t,e?void 0:n)},this))}}},function(t,exports,e){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(exports,"__esModule",{value:!0});var i=e(11),r=n(i),s=e(1),a=n(s),o=r.default.extend({initialize:function(t){this.widgets=[],a.default.isPlainObject(t)&&a.default.each(t,function(t,e){this.add(t,e)},this)},add:function(t,e){this.widgets.push(this.normalize(t,e))},normalize:function(t,e){if("function"==typeof t&&(t={run:t}),a.default.defaults(t,{compile:!1,render:function(){},run:function(t){t()},fullscreen:function(t,e){e()},selector:e}),!t.selector)throw new Error("Failed to normalize widget. No selector found!");return t},getMatchesForContainer:function(t){var e=[];return this.each(function(n){var i=t.$el.is(n.selector)?t.$el:t.$el.find(n.selector);i.length&&e.push({container:t,widget:n,$el:i,el:i[0]})},this),e}});a.default.each(["each","map","isEmpty","filter"],function(t){o.prototype[t]=function(){var e=Array.prototype.slice.call(arguments);return e.unshift(this.widgets),a.default[t].apply(a.default,e)}}),exports.default=o},function(t,exports,e){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){var n=(0,s.default)('<div class="alf-slideshow-nav">'),i=(0,s.default)('<a class="alf-slideshow-nav-next"></a>'),r=(0,s.default)('<a class="alf-slideshow-nav-prev"></a>');n.append(r).append(i),t.append(n),r.on("dblclick",!1),i.on("dblclick",!1),r.on("click",function(){return e.gotoPrevPage(),!1}),i.on("click",function(){return e.gotoNextPage(),!1});var a=e.options.numberOfPages;r.addClass("alf-is-hidden"),e.on("pageWillAppear",function(t,e){0===e?r.addClass("alf-is-hidden"):e>0&&e<a-1?(r.removeClass("alf-is-hidden"),i.removeClass("alf-is-hidden")):e===a-1&&i.addClass("alf-is-hidden")})}Object.defineProperty(exports,"__esModule",{value:!0});var r=e(3),s=n(r),a=e(17),o=n(a),l=e(32),u=n(l);exports.default={".alf-slideshow":{compile:!0,render:function(){var t,e,n;t=(0,s.default)("<div>").css({position:"relative",top:0,left:0}),e=(0,s.default)("<div>").addClass("alf-slideshow-toggle alf-fullscreen-toggle alf-is-draggable"),this.$el.children(":not(:first-child)").remove(),t.append(e).append(this.$el),n=(0,s.default)("<div>").addClass("alf-slideshow-stack"),this.$el.addClass("alf-slideshow-inline").prepend(n.clone().addClass("alf-slideshow-stack-1")).prepend(n.clone().addClass("alf-slideshow-stack-2")),this.container.$el.append(t)},run:function(t){var e=this.container.$el.find(".alf-slideshow-toggle");e.length&&"none"!==e.css("display")&&this.container.preventDefaultEvents(),this.container.$el.on(o.default.touchScreen?"tap":"click",".alf-fullscreen-toggle",this.container.enterFullscreen).on("touchend",".alf-fullscreen-toggle",function(t){t.preventDefault()}),t()},fullscreen:function(t,e){var n,r,a,l;a=t.$el.find(".alf-slideshow").children().clone(),l=a.length,r=(0,s.default)('<button class="alf-slideshow-progress"></button>'),r.text("1/"+l),t.layer.$toolbar.append(r),n=(0,s.default)('<div class="alf-slideshow"><div class="alf-pages"><div class="alf-page alf-page-1"><section class="alf-page-loader swiper-page-is-loading"></section><section class="alf-page-content"></section></div><div class="alf-page alf-page-2"><section class="alf-page-loader swiper-page-is-loading"></section><section class="alf-page-content"></section></div><div class="alf-page alf-page-3"><section class="alf-page-loader swiper-page-is-loading"></section><section class="alf-page-content"></section></div></div></div>'),t.$el.empty().append(n);var c=new u.default(n[0],{numberOfPages:a.length,enableKeyNavigation:!0});c.on("pageWillRender",function(t,e){(0,s.default)(t).empty().append(a[e])}),c.on("pageWillAppear",function(t,e){r.text(e+1+"/"+l)}),c.start(),o.default.touchScreen||i(t.layer.$content,c),e()}},".alf-stretch-to-fit h1":{compile:!0,render:function(){this.$el.textFit()}}}},function(t,exports,e){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(exports,"__esModule",{value:!0});var i=e(33),r=n(i);exports.default=r.default},function(t,exports){"use strict";function e(t,e){if(t.classList)return t.classList.remove(e);var n=t.className,i=n.replace(e,"").trim();i!==t.oldClassName&&(t.className=i)}function n(t,e){if(t.classList)return t.classList.add(e);var n=t.className.trim(),i=new RegExp("\b"+e+"\b");n.match(i)||(t.className=n+" "+e)}Object.defineProperty(exports,"__esModule",{value:!0});var i=5,r=["_onMove","_onMoveStart","_onMoveEnd","_onMoveStartCapture","_onMoveCapture","_onMoveEndCapture","_onTransitionEnd","_onKeyPress","_refresh","_renderPages"],s=Array.prototype.slice,a=function(t,e,n){return s.call(t).forEach(e,n)},o=function(t,e){var n=this,i=t.children[0];r.forEach(function(t){n[t]=n[t].bind(n)}),this.el=t,this.elements={pageContainer:i,pages:[],scrollablePages:[]},a(i.children,function(t,e){this.elements.pages.push({el:t,offset:100*e,pageNum:e}),t.className.match(/\bis-scrollable\b/)&&this.elements.scrollablePages.push(t)},this),this.concurrentPages=this.elements.pages.length,e=e||{},e.overflowScrolling=e.overflowScrolling||!1,e.renderDeferTime=e.renderDeferTime||200,e.scrollDuration=e.scrollDuration||320,e.tapToFlip=e.tapToFlip||!1,e.loadingClass=e.loadingClass||"swiper-page-is-loading",e.enableKeyNavigation=void 0===e.enableKeyNavigation||e.enableKeyNavigation,this.options=e,this.events={},this.renderTimeout=null,this.pageFlipWidth=50,this.x=0,this.currentPage=0};o.prototype={start:function(){this.pageWidth=this.elements.pages[0].el.clientWidth,this.windowWidth=window.innerWidth,this._renderPages(),this.enable()},gotoPage:function(t,e,n){var i,r,s=this,a=this.x||0;e=void 0!==e?e:this.options.scrollDuration,n=0!==e&&n,t=parseInt(t,10),clearTimeout(this.renderTimeout),t<0||isNaN(t)||0===this.options.numberOfPages?t=0:t>this.options.numberOfPages-1&&(t=this.options.numberOfPages-1),this.prevPage=this.currentPage,this.currentPage=t,t>0&&t<this.options.numberOfPages-1&&this._positionPages(),this.x=t*this.pageWidth*-1,this._moveX(this.elements.pageContainer,this.x+"px",e),n&&a!==this.x||this._onPageChange(!0),this.prevPage!==this.currentPage&&(i=this.elements.pages[t%this.concurrentPages],s.trigger("pageWillAppear",i.el.children[1],t),r=this.elements.pages[this.prevPage%this.concurrentPages],s.trigger("pageWillDisappear",r.el.children[1],this.prevPage))},on:function(t,e,n){var i=this.events[t]||(this.events[t]=[]);i.push({callback:e,context:n||this})},trigger:function(t){var e,n=this.events[t];if(n){e=s.call(arguments,1);for(var i in n)n[i].callback.apply(n[i].context,e)}},enable:function(){var t=this.elements.pageContainer;this._disableOverflowScrolling(),t.addEventListener("touchstart",this._onMoveStartCapture,!0),t.addEventListener("webkitTransitionEnd",this._onTransitionEnd,!0),t.addEventListener("transitionend",this._onTransitionEnd,!0),window.addEventListener("keydown",this._onKeyPress,!1),window.addEventListener("resize",this._refresh,!0)},disable:function(){this._enableOverflowScrolling(),this.elements.pageContainer.addEventListener("touchstart",this._onMoveStartCapture,!0),window.removeEventListener("keydown",this._onKeyPress,!1),window.removeEventListener("resize",this._refresh,!0)},gotoCurrentPage:function(t){this.gotoPage(this.currentPage,t)},gotoPrevPage:function(){this.gotoPage(this.currentPage-1,this.options.scrollDuration)},gotoNextPage:function(){this.gotoPage(this.currentPage+1,this.options.scrollDuration)},refresh:function(t){a(this.elements.pages,function(t){t.prevPage=void 0}),t=t||{};for(var e in t)this.options[e]=t[e];this.trigger("refresh"),this.gotoPage(this.currentPage,void 0,!1)},reset:function(t){this.prevPage=void 0,a(this.elements.pages,function(t){t.prevPage=void 0===t.prevPage?void 0:null,t.pageNum=null}),t=t||{};for(var e in t)this.options[e]=t[e];this.trigger("refresh"),this.gotoPage(0,0,!1)},_positionPages:function(){var t=this,e=this.currentPage,i=(this.concurrentPages-1)/2,r=e-i,s=e+i;r=r<0?0:r,s=s<this.options.numberOfPages?s:this.options.numberOfPages-1;for(var a=r;a<=s;a++){var o=this.elements.pages[a%this.concurrentPages],l=100*a,u=o.el.children[0];o.prevOffset=void 0===o.offset?l:o.offset,o.offset=l,o.prevOffset!==o.offset&&(n(u,t.options.loadingClass),this._moveX(o.el,o.offset+"%"))}},_renderPage:function(t,n){var i=t.el.children[1],r=void 0===t.prevPage;t.prevPage=t.pageNum,t.pageNum=n,(r||t.prevPage!==t.pageNum)&&(i.scrollTop=0,i.scrollLeft=0,r||this.trigger("pageWillDestruct",i,t.prevPage),this.trigger("pageWillRender",i,n)),e(t.el.children[0],this.options.loadingClass)},_renderPages:function(){for(var t,e,n=this,i=this.currentPage,r=i,s=this.options,a=this.elements.pages,o=i<=this.prevPage?1:-1,l=0;l<this.concurrentPages;l++)r+=l*o,o*=-1,t=a[r%this.concurrentPages],!t||r>s.numberOfPages-1||n._renderPage(t,r);n.trigger("pageDidAppear",a[i%this.concurrentPages].el.children[1],i),e=a[this.prevPage%this.concurrentPages],e&&n.trigger("pageDidDisappear",e.el.children[1],this.prevPage)},_refresh:function(t){this.pageWidth=this.elements.pages[0].el.clientWidth,this.windowWidth=window.innerWidth,this.gotoCurrentPage()},_onKeyPress:function(t){if(this.options.enableKeyNavigation)switch(t.keyCode){case 37:this.gotoPrevPage();break;case 39:this.gotoNextPage()}},_onMoveStartCapture:function(t){var e=this.elements.pageContainer;this.moved=!1,this.pointX=t.touches[0].pageX,this.pointY=t.touches[0].pageY,this.deltaX=0,this.deltaY=0,this.distX=0,this.distY=0,this.directionCalc=!1,this.multitouch=t.touches.length>1,this.multitouch?(this._disableOverflowScrolling(),e.removeEventListener("touchmove",this._onMoveCapture,!0),e.removeEventListener("touchend",this._onMoveEndCapture,!0)):(e.addEventListener("touchmove",this._onMoveCapture,!0),e.addEventListener("touchend",this._onMoveEndCapture,!0)),e.addEventListener("touchstart",this._onMoveStart,!1)},_onMoveCapture:function(t){var e=this.elements.pageContainer,n=t.touches[0].pageX,i=t.touches[0].pageY;this.multitouch||(this.deltaX=n-this.pointX,this.deltaY=i-this.pointY,this.pointX=n,this.pointY=i,this.directionCalc||(this.distX<4&&this.distY<4&&(this.distX+=Math.abs(this.deltaX),this.distY+=Math.abs(this.deltaY),this.directionCalc=!0),this.distY<2||this.distX>this.distY+5?(this._disableOverflowScrolling(),e.addEventListener("touchmove",this._onMove,!1),e.addEventListener("touchend",this._onMoveEnd,!1)):(this.distX<2||this.distY>this.distX+5)&&this._enableOverflowScrolling()))},_onMoveEndCapture:function(t){if(this.elements.pageContainer.removeEventListener("touchstart",this._onMoveStart,!1),this._disableOverflowScrolling(),this.options.tapToFlip&&!this.moved){if(this.pointX<this.pageFlipWidth)return void this.gotoPrevPage();if(this.pointX>this.windowWidth-this.pageFlipWidth)return void this.gotoNextPage()}},_onMoveStart:function(t){this.startX=t.touches[0].pageX,this.startY=t.touches[0].pageY},_onMove:function(t){t.preventDefault(),clearTimeout(this.renderTimeout),this.moved=!0,(this.x>0||this.currentPage===this.options.numberOfPages-1&&this.x<0)&&(this.deltaX*=.5),this.x+=this.deltaX,this._moveX(this.elements.pageContainer,Math.round(this.x)+"px",0)},_onMoveEnd:function(){var t=this.elements.pageContainer,e=this.startX-this.pointX,n=Math.abs(e),r=Math.abs(this.deltaX),s=this.pageWidth/2,a=this.options.scrollDuration;this.elements.pageContainer.style.webkitTransitionDuration=a+"ms",this.elements.pageContainer.style.MozTransitionDuration=a+"ms",this.elements.pageContainer.style.msTransitionDuration=a+"ms",t.removeEventListener("touchmove",this._onMove,!1),
t.removeEventListener("touchend",this._onMoveEnd,!1),this._disableOverflowScrolling(),n<s&&r<i?this.gotoCurrentPage():e>0?this.gotoNextPage():this.gotoPrevPage()},_moveX:function(t,e,n){void 0!==n&&(t.style.webkitTransitionDuration=n+"ms",t.style.MozTransitionDuration=n+"ms",t.style.msTransitionDuration=n+"ms"),t.style.webkitTransform="translate3d("+e+", 0, 0)",t.style.MozTransform="translate("+e+", 0)",t.style.msTransform="translate("+e+", 0)"},_onPageChange:function(t){t?this._renderPages():this.renderTimeout=setTimeout(this._renderPages,this.options.renderDeferTime)},_onTransitionEnd:function(t){t.propertyName.indexOf("transform")!==-1&&this._onPageChange()},_preventDefaultEvent:function(t){t.preventDefault()},_disableOverflowScrolling:function(){if(this.options.overflowScrolling){var t=this;a(this.elements.scrollablePages,function(e){e.addEventListener("touchmove",t._preventDefaultEvent,!0)})}},_enableOverflowScrolling:function(){if(this.options.overflowScrolling){var t=this;a(this.elements.scrollablePages,function(e){e.removeEventListener("touchmove",t._preventDefaultEvent,!0)})}}},o.prototype.destroy=o.prototype.disable,exports.default=o,Function.prototype.bind||(Function.prototype.bind=function(t){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var e=Array.prototype.slice.call(arguments,1),n=this,i=function(){},r=function(){return n.apply(this instanceof i?this:t||window,e.concat(Array.prototype.slice.call(arguments)))};return i.prototype=this.prototype,r.prototype=new i,r})},function(t,exports,e){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(exports,"__esModule",{value:!0});var i=e(1),r=n(i),s=e(13),a=n(s);e(3),exports.default={isInline:!1,defaultMetrics:function(t){this.metrics=r.default.extend({height:0,width:0,outerHeight:0,lineHeight:24,marginTop:0,marginRight:0,marginBottom:0,marginLeft:0,marginHeight:0,marginWidth:0},this.metrics||{},t||{})},setMetrics:function(t){this.metrics=r.default.extend(this.metrics||{},t)},calculateMetrics:function(){if(!this.el.children.length)return void(this.metrics=this.$el.metrics());var t=parseInt(window.getComputedStyle(this.el).getPropertyValue("border-bottom-width"),10);return t?void(this.metrics=this.$el.metrics()):(this.isInline||(this.el.style.borderBottom="1px solid transparent"),this.metrics=this.$el.metrics(),void(this.isInline||(this.el.style.removeProperty("border-bottom"),this.metrics.outerHeight-=1)))},lockSize:function(){var t=this.metrics;this.$el.css({height:t.height+"px",width:t.width+"px"})},isTextElement:function(){return["P","H1","H2","H3","H4","H5","H6","HEADER","SPAN"].indexOf(this.el.tagName)!==-1},normalize:function(t,e){if(!this._isNormalized){var n={},i=this.$el.hasClass(a.default.CONTAINER),s=this.metrics,o=0;this._normalizeTopMargin(n),e=e||0;var l=Math.min(e,s.marginTop);t=t||s.lineHeight,o=(s.outerHeight-l)%t,0===o||i||(o=t-o,s.marginBottom+=o,s.marginHeight+=o,s.outerHeight+=o,n["margin-bottom"]=s.marginBottom+"px"),this._isNormalized=!0,r.default.isEmpty(n)||this.$el.css(n)}},_normalizeTopMargin:function(t){var e=this.metrics;e.marginTop>0&&this.isTextElement()&&(e.outerHeight-=e.marginTop,e.marginHeight-=e.marginTop,e.marginTop=0,t["margin-top"]=0)}}},function(t,exports,e){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(exports,"__esModule",{value:!0});var i=e(1),r=n(i),s=e(3),a=n(s),o=e(11),l=n(o),u=e(36),c=n(u),f=e(13),h=n(f),d=l.default.extend({initialize:function(t){this.article=t,this.compiled={}},compile:function(){var t,e=this.article.content.toJSON();return e.meta.articleId=e.meta.articleId||e.meta.id,delete e.meta.id,t=r.default.map((0,a.default)("."+h.default.ASSET_STYLESHEET),function(t){return t.href}),e.compiled={},e.compiled.pages=r.default.map(this.article.pages,function(t){return t.compile()}),e.compiled.assets={stylesheets:t,revision:this.article.options.revision},e},decompile:function(t){var e=r.default.isObject(t)?t:JSON.parse(t),n=e.compiled.assets.revision;n&&(this.article.options.revision=n),this.article.pages=r.default.map(e.compiled.pages,function(t){var i=new c.default({revision:n,assetsBaseUrl:e.service.assetsBaseUrl});return i.decompile(t),i})}});exports.default=d},function(t,exports,e){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(exports,"__esModule",{value:!0});var i=e(3),r=n(i),s=e(1),a=n(s),o=e(12),l=n(o),u=e(37),c=n(u),f=e(39),h=n(f),d=e(40),p=n(d),g=e(52),m=n(g),v=e(34),_=n(v),y=e(29),w=n(y),b=e(13),E=n(b),T=e(17),x=n(T),S=l.default.extend();a.default.extend(S.prototype,_.default,w.default,{className:"page",initialize:function(t){t=this.options=a.default.extend({revision:"no-rev"},t||{}),a.default.bindAll(this,"render"),this.decompiled=!1,this.pageNum="number"==typeof t.pageNum?t.pageNum:null,this.className=t.className||"",this.content=t.content||null,this.layer=t.layer||null,this.fullscreenLayer=t.fullscreenLayer||this.layer&&this.layer.above()||null,this.templateManager=t.templateManager||m.default,this.format=t.format||null,t.pixelRatio=parseInt(t.pixelRatio||window.devicePixelRatio||1,10),this.defaultMetrics(t.metrics),this.setupWidgets(t)},tearDown:function(){this.el=null,this.pageTemplate&&this.pageTemplate.tearDown(),this.pageTemplate=null,this.content=null,this.fullscreenLayer&&this.fullscreenLayer.hide()},revert:function(){this.rendered=!1,this.pageTemplate.revert()},restoreFromHtml:function(t){this.setElement((0,r.default)(t)),this.setPageTemplate(new p.default({el:this.el.children[0]})),this.rendered=!0},getBestTemplate:function(){var t;return t=this.templateManager.getBestTemplateForPage(this,this.templates),t.template?t:(x.default.console.warn("No template found for page "+this.pageNum+"! Remaining elements: "+this.content.elementsLeft),!1)},setupBestTemplate:function(){var t=this.getBestTemplate();return!!t&&(this.setTemplate(t.template,t.containerMap,t.score),!0)},setTemplate:function(t,e){return this.rendered=!1,this.score=e||0,this.template===t?(this.pageTemplate.reload(),this):(this.template=t,this.setPageTemplate(this.templateManager.getPageTemplateFromTemplate(t,{page:this})),this)},setTemplateIfUsable:function(t){var e,n=t.getContainerMap(this.content);return e=!t.containers||!t.containers.length,(e=e||a.default.all(n.positions,function(t){return t.isOptional||t.match}))?(this.setTemplate(t,n),!0):(x.default.console.warn("Page ",this.pageNum,": Template ",t.name,"is no longer usable"),!1)},setPageTemplate:function(t){this.pageTemplate=t,this.$el.empty(),this.$el.append(this.pageTemplate.el),this.containers=this.pageTemplate.containers,this.regions=this.pageTemplate.regions},prepareToRender:function(){var t=[];return this.rendered||!this.template?this:(this.className&&t.push(this.className),t.push(E.default.REVISION(this.options.revision)),t.push(E.default.PAGENUM_X(this.pageNum+1)),this.$el.addClass(t.join(" ")),void this.pageTemplate.prepareToRender())},render:function(t){return!this.rendered&&this.decompiled?this._renderCompiled(t):this._pendingReflow?(this._pendingReflow=!1,this.reflow(),this):this.template?this.rendered?(this.pageTemplate.loadContainers(),this):(this._setupMetrics(),this.pageTemplate.render(),this.rendered=!0,t&&this._appendToEl(t),this):this},allPagesDidRender:function(t){var e,n=E.default.PAGENUM_X("last"),i=E.default.PAGENUM_TOTAL_X(""),r=[E.default.PAGENUM_TOTAL_X(t)];e=new RegExp(" ?("+n+"|"+i+"[\\d]*)","g"),t===this.pageNum+1&&r.push(n),this.el.className=this.el.className.replace(e,""),this.$el.addClass(r.join(" "))},play:function(){this.$el.addClass(E.default.IS_PLAYING)},stop:function(){this.$el.removeClass(E.default.IS_PLAYING)},prepareToReflow:function(){this.pageTemplate.prepareToReflow()},reflow:function(){return this.isInDOM()?void this.pageTemplate.reflow():void(this._pendingReflow=!0)},lockSize:function(){this.pageTemplate.isResponsive||this.$el.css({width:this.metrics.width+"px",height:this.metrics.height+"px",overflow:"hidden",position:"relative"})},compile:function(){var t=new h.default(this);return t.compile()},decompile:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=new h.default(this);return i.decompile(t,e,n),this},_renderCompiled:function(t){return t&&this._appendToEl(t),this._setupMetrics(),this.pageTemplate.decompile(),this.rendered=!0,this},_appendToEl:function(t){var e=this.el;setTimeout(function(){(0,r.default)(t).empty().append(e)},0)},_setupMetrics:function(){var t=this.$el.metrics();this.format&&this.format instanceof c.default&&(t.height=this.format.get("height"),t.width=this.format.get("width")),!t.height&&this.metrics.height&&(t.height=this.metrics.height,t.outerHeight=this.metrics.outerHeight),this.metrics=t,this.pageTemplate.metrics=t,t.contentHeight=t.height-t.marginHeight-t.paddingTop-t.paddingBottom,t.contentWidth=t.width-t.marginWidth-t.paddingRight-t.paddingLeft}}),exports.default=S},function(t,exports,e){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(exports,"__esModule",{value:!0});var i=e(38),r=n(i),s=r.default.extend({defaults:{title:"",name:"",width:0,height:0},initializeFromWindow:function(){return this.set({width:window.innerWidth,height:window.innerHeight,name:"window",title:"Window"}),this}});exports.default=s},function(t,exports,e){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(exports,"__esModule",{value:!0});var i=e(10),r=n(i);exports.default=r.default.Model.extend({})},function(t,exports,e){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(exports,"__esModule",{value:!0});var i=e(1),r=n(i),s=e(3),a=n(s),o=e(11),l=n(o),u=e(40),c=n(u),f=e(13),h=n(f),d=e(51),p=n(d),g=e(41),m=n(g),v={classNames:[h.default.IS_DRAGGABLE,h.default.IS_DRAGGABLE_X,h.default.IS_DRAGGABLE_Y,h.default.IS_EDITABLE,h.default.IS_OPTIONAL,h.default.IS_REMOVABLE,h.default.IS_RESIZABLE,h.default.MULTI_CHOICE],attributes:["data-filter-format-name","data-filter-page-pos","data-map","data-media","data-name","data-score"],elements:["."+h.default.SIZE_DETECTOR]},_=l.default.extend({initialize:function(t){r.default.bindAll(this,"_doDecompile"),this.page=t,this.compiled={v:1,elements:{},assets:{images:[]}}},compile:function(){return this.page.lockSize(),this.compiled.html=this._getCompiledHtml(),this._compileImages(),this._compileStylesheets(),this.compiled.assets.revision=this.page.options.revision,this.compiled},decompile:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this.page.decompiled=!0,this.compiledObject=r.default.isObject(t)?t:JSON.parse(t),this.compiledObject.assets.revision&&(this.page.options.revision=this.compiledObject.assets.revision),n||(n=(0,a.default)(this.compiledObject.html).get(0)),this.page.pageTemplate=new c.default({el:n.children[0],page:this.page}),this.page.setElement(n),this.promises=this.loadStylesheets(this.compiledObject.assets.stylesheets),m.default.all(this.promises).then(this._doDecompile).then(e)},strip:function(t){var e,n=(0,a.default)(t);e="."+v.classNames.join(", ."),n.find("."+h.default.IS_DISABLED+", ."+h.default.IS_REMOVED).remove(),n.find(e).removeClass(v.classNames.join(" ")),r.default.each(v.attributes,function(t){n.find("["+t+"]").removeAttr(t)}),r.default.each(v.elements,function(t){n.find(t).remove()})},_doDecompile:function(){this.page.containers=this.page.pageTemplate.containers,this.page.regions=this.page.pageTemplate.regions,r.default.each(this.page.pageTemplate._getAllContainers(),function(t){this.page.layer&&t.setLayer(this.page.layer),this._decompileContainer(t,this.compiledObject.elements[t.el.id])},this)},_decompileContainer:function(t,e){new p.default(t).decompile(e)},_getCompiledHtml:function(){var t,e,n,i;return t=(0,a.default)(this.page.el.outerHTML),e=this.compiled,n=this.page.pageTemplate._getAllContainers(),r.default.each(n,function(n){var s=new p.default(n).compile();n.isDisabled||n.isRemoved||(e.elements[n.id]=s,n.fullscreenEl&&(i=(0,a.default)(n.fullscreenEl).find("img[data-src]"),i.length>0&&(e.assets.images=e.assets.images.concat(r.default.toArray(i)))),t.find("#"+n.id).replaceWith(s.html),delete s.html)}),this.strip(t),t[0].outerHTML},_compileImages:function(){var t,e=this.compiled;t=this.page.$("img[data-src]"),t.length>0&&(e.assets.images=e.assets.images.concat(r.default.toArray(t))),e.assets.images=r.default.map(e.assets.images,this._compileImageAsset,this)},_compileImageAsset:function(t){var e=(0,a.default)(t),n={},i=e.attr("data-src-2x");return n["1x"]=e.attr("data-src"),i&&(n["2x"]=i),{height:parseInt(e.attr("height"),10),width:parseInt(e.attr("width"),10),urls:n}},_compileStylesheets:function(){this.compiled.assets.stylesheets=r.default.map((0,a.default)("."+h.default.ASSET_STYLESHEET),function(t){return t.href})},loadStylesheets:function(t){t=r.default.map(t,function(t){return t.indexOf("://")===-1?this.page.options.assetsBaseUrl+t:t},this);var e,n=r.default.filter((0,a.default)("."+h.default.ASSET_STYLESHEET),function(t){return this.page.options.revision===t.getAttribute("data-revision")},this),i=[];return r.default.each(n,function(n){var i=(0,a.default)(n),r=t.indexOf(i.attr("href"));return r!==-1?void t.splice(r,1):void(t.length?(e=t.shift(),i.attr("href",e),this._trackStylesheetProgress(e)):i.remove())},this),r.default.each(t,function(t){var e=(0,a.default)('<link rel="stylesheet" type="text/css">');e.attr({class:h.default.ASSET_STYLESHEET,"data-revision":this.page.options.revision}),(0,a.default)("head").append(e.attr("href",t)),i.push(this._trackStylesheetProgress(t))},this),i},_trackStylesheetProgress:function(t){var e,n;return e=m.default.defer(),n=document.createElement("img"),this.page.pageTemplate.addDeferred(e),n.onerror=function(){e.resolve()},n.src=t,e}});exports.default=_},function(t,exports,e){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(exports,"__esModule",{value:!0});var i=e(3),r=n(i),s=e(1),a=n(s),o=e(41),l=n(o),u=e(12),c=n(u),f=e(34),h=n(f),d=e(42),p=n(d),g=e(44),m=n(g),v=e(48),_=n(v),y=e(49),w=n(y),b=e(13),E=n(b),T=e(9),x=n(T);e(50);var S=c.default.extend();a.default.extend(S.prototype,h.default,{initialize:function(t){this.options=t,t.page&&this.setPage(t.page),this.template=t.template||null,this.deferreds=[],this.fullscreenContainer=this._getFullscreenContainer()},tearDown:function(){this.stopListening(),a.default.invoke(this.containers,"tearDown"),a.default.invoke(this.regions,"tearDown"),this.template=null,this.containers=null,this.regions=null,this.fullscreenContainer&&this.fullscreenContainer.tearDown()},setElement:function(t){S.__super__.setElement.call(this,t),this.isPositionedGrid=!!this.el.className.match(/cols\-([0-9])+/),this.isResponsive=this.$el.hasClass(E.default.IS_RESPONSIVE),this.reload()},setPage:function(t){this.page=t,this.content=t.content},prepareToRender:function(){this._setupContainers(),this._renderContainers()},render:function(){return this.loadContainers(),this._fit(),this._fillRegions(),this.trackProgress(),this},reload:function(){this._findContainers(),this._findRegions()},prepareToReflow:function(){a.default.invoke(this.regions,"tearDown"),this._findRegions()},reflow:function(){this._fit(),this._fillRegions()},revert:function(){this._sizeListener=!1,this.stopListening(),a.default.invoke(this.regions,"revert"),a.default.invoke(this.containers,"revert")},decompile:function(){this.decompiled=!0,this.loadContainers(!0,this._getAllContainers()),this.trackProgress()},addDeferred:function(t){this.deferreds.push(t)},didRetainElements:function(){return a.default.some(this.containers.concat(this.regions),function(t){return t.didRetainElements()})},loadContainers:function(t,e){var n=this.deferreds;return this._setupSizeDetector(),e=e||this.containers,a.default.each(e,function(e){this._prepareContainerForLoad(e,t),e.load(),n=n.concat(e.deferreds)},this),this.deferreds=n,this},trackProgress:function(){var t=this.page,e=function(){t.trigger("loadComplete",t),x.default.trigger("loadComplete",t)};this.deferreds.length?l.default.all(this.deferreds,e):e()},_findContainers:function(){var t=this,e=this.containers;this.containers=a.default.map(this.$el.find("."+E.default.CONTAINER),function(n){var i;return i=a.default.find(e,function(t){return t.el===n}),i||(i=new m.default({el:n}),i.isResponsive=t.isResponsive),i})},_findRegions:function(){var t=this.regions,e=this.isPositionedGrid;this.regions=a.default.map(this.$el.find("."+E.default.REGION),function(n){return a.default.find(t,function(t){return t.el===n})||new p.default({el:n,isPositionedGrid:e||(0,r.default)(n).closest(".alf-grid",this.$el).length>=1})},this)},_getAllContainers:function(){var t=a.default.flatten(a.default.pluck(this.regions,"containers"));return t.concat(this.containers)},_setupSizeDetector:function(){return this.sizeDetector?void this.sizeDetector.start():void(this.sizeDetector=new w.default({target:this.el,watch:this.isResponsive}).render())},_setupContainers:function(){function t(t,e){if(!(t.isRemoved||t.isDisabled||t.rendered)){var n=a.default.filter(i,function(n){return e.call(this,t,n)});if(!n.length)return void(t.isOptional&&t.disable());t.content=this.content,t.matchingFigureElements=a.default.flatten(a.default.pluck(n,"mappedElements")),t.useBestMatchingFigureEl(),t.ref&&(t.figure.ref=t.ref)}}function e(t,e){if(e.retained)return!1;var n=e.getElementsMappedToField(t.fieldMap,t.match);return!!n.length&&(e.mappedElements=n,e)}function n(t,e){return!(!t.ref||t.ref!==e.ref)&&e}var i=this.page.content.getFigures();a.default.each(this.containers,function(n){n.fieldMap.length&&t.call(this,n,e)},this),a.default.each(this.containers,function(e){e.fieldMap.length||t.call(this,e,n)},this)},_getFullscreenContainer:function(){var t=this.$el.find("."+E.default.CONTAINER_FULLSCREEN)[0];return!!t&&new _.default({el:t.cloneNode(!0),page:this,layer:!!this.page&&this.page.fullscreenLayer,revision:this.page&&this.page.options.revision})},_fit:function(){var t=this.page.metrics,e={lineHeight:t.lineHeight,prefix:"alf-"},n=this.$el.find(".alf-grid");this.isPositionedGrid&&this.$el.grid(e),a.default.each(n,function(t){(0,r.default)(t).grid(e)}),a.default.each(this.regions,function(e){e.metrics=e.$el.metrics(),e.metrics.contentHeight=0,e.metrics.lineHeight=t.lineHeight},this)},_renderContainers:function(){return a.default.invoke(this.containers,"render"),this},_prepareContainerForLoad:function(t,e){var n,i;n=this.page.widgets,i=this.fullscreenContainer,t.page=this.page,t.setLayer(this.page.layer),t.matchingWidgets=n.getMatchesForContainer(t),t.options.pixelRatio=this.page.options.pixelRatio,t.renderWidgets(),t.unload(),e||(t.metrics=t.$el.metrics(),this.isResponsive||t.normalize()),i&&i.subscribeToContainer(t)},_fillRegions:function(){for(var t=this.page.content,e=[],n=0,i=this.regions[n];i&&(i.setContent(t),i.containers.length&&(e=e.concat(i.containers)),t.hasBlocksLeft());)i=this.regions[++n]||!1;this.loadContainers(!0,e)}}),exports.default=S},function(t,exports){/** @license MIT License (c) copyright B Cavalier & J Hann */
"use strict";function e(t,e,i,r){return n(t).then(e,i,r)}function n(t){var e,n;return t instanceof r?e=t:l(t)?(n=o(),t.then(function(t){n.resolve(t)},function(t){n.reject(t)},function(t){n.progress(t)}),e=n.promise):e=s(t),e}function i(t){return e(t,a)}function r(t){this.then=t}function s(t){var e=new r(function(e){try{return n(e?e(t):t)}catch(t){return a(t)}});return e}function a(t){var e=new r(function(e,i){try{return i?n(i(t)):a(t)}catch(t){return a(t)}});return e}function o(){function t(t,e,n){return h(t,e,n)}function e(t){return p(t)}function i(t){return p(a(t))}function s(t){return d(t)}var l,u,c,f,h,d,p;return u=new r(t),l={then:t,resolve:e,reject:i,progress:s,promise:u,resolver:{resolve:e,reject:i,progress:s}},c=[],f=[],h=function(t,e,n){var i,r;return i=o(),r="function"==typeof n?function(t){try{i.progress(n(t))}catch(t){i.progress(t)}}:function(t){i.progress(t)},c.push(function(n){n.then(t,e).then(i.resolve,i.reject,r)}),f.push(r),i.promise},d=function(t){return m(f,t),t},p=function(t){return t=n(t),h=t.then,p=n,d=_,m(c,t),f=c=E,t},l}function l(t){return t&&"function"==typeof t.then}function u(t,n,i,r,s){return v(2,arguments),e(t,function(t){function a(t){g(t)}function l(t){p(t)}var u,c,f,h,d,p,g,m,v,y;if(v=t.length>>>0,u=Math.max(0,Math.min(n,v)),f=[],c=v-u+1,h=[],d=o(),u)for(m=d.progress,g=function(t){h.push(t),--c||(p=g=_,d.reject(h))},p=function(t){f.push(t),--u||(p=g=_,d.resolve(f))},y=0;y<v;++y)y in t&&e(t[y],l,a,m);else d.resolve(f);return d.then(i,r,s)})}function c(t,e,n,i){function r(t){return e?e(t[0]):t[0]}return u(t,1,r,n,i)}function f(t,e,n,i){return v(1,arguments),d(t,y).then(e,n,i)}function h(){return d(arguments,y)}function d(t,n){return e(t,function(t){var i,r,s,a,l,u;if(s=r=t.length>>>0,i=[],u=o(),s)for(a=function(t,r){e(t,n).then(function(t){i[r]=t,--s||u.resolve(i)},u.reject)},l=0;l<r;l++)l in t?a(t[l],l):--s;else u.resolve(i);return u.promise})}function p(t,n){var i=b.call(arguments,1);return e(t,function(t){var r;return r=t.length,i[0]=function(t,i,s){return e(t,function(t){return e(i,function(e){return n(t,e,s,r)})})},w.apply(t,i)})}function g(t,n,i){var r=arguments.length>2;return e(t,function(t){return t=r?i:t,n.resolve(t),t},function(t){return n.reject(t),a(t)},n.progress)}function m(t,e){for(var n,i=0;n=t[i++];)n(e)}function v(t,e){for(var n,i=e.length;i>t;)if(n=e[--i],null!=n&&"function"!=typeof n)throw new Error("arg "+i+" must be a function")}function _(){}function y(t){return t}Object.defineProperty(exports,"__esModule",{value:!0});var w,b,E;e.defer=o,e.resolve=n,e.reject=i,e.join=h,e.all=f,e.map=d,e.reduce=p,e.any=c,e.some=u,e.chain=g,e.isPromise=l,r.prototype={always:function(t,e){return this.then(t,t,e)},otherwise:function(t){return this.then(E,t)},yield:function(t){return this.then(function(){return t})},spread:function(t){return this.then(function(e){return f(e,function(e){return t.apply(E,e)})})}},b=[].slice,w=[].reduce||function(t){var e,n,i,r,s;if(s=0,e=Object(this),r=e.length>>>0,n=arguments,n.length<=1)for(;;){if(s in e){i=e[s++];break}if(++s>=r)throw new TypeError}else i=n[1];for(;s<r;++s)s in e&&(i=t(i,e[s],s,e));return i},exports.default=e},function(t,exports,e){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(exports,"__esModule",{value:!0});var i=e(1),r=n(i),s=e(12),a=n(s),o=e(34),l=n(o),u=e(43),c=n(u),f=e(44),h=n(f),d=e(45),p=n(d),g=e(47),m=n(g),v=e(17),_=n(v),y=e(13),w=n(y),b=a.default.extend();r.default.extend(b.prototype,l.default,c.default,{className:w.default.REGION,initialize:function(t){this.options=t||{},this.defaultMetrics(this.options.metrics),this.metrics.contentHeight=0,this.fragment=null,this._contentContainers=[],this.options.elements&&this.addElements(this.options.elements)},tearDown:function(){this.stopListening(),this.fragment=null,this.revert(),this.el=null,this.$el=null},clone:function(){var t=new b({el:this.el.cloneNode(!0)});return t.content=this.content,t},setElement:function(t){b.__super__.setElement.call(this,t),this._originalHtml=this.$el.html(),this.isFlexible=this.$el.hasClass(w.default.REGION_FLEXIBLE),this._originalContainers=this._getInlineContainers(),this.containers=this._originalContainers.slice(0)},setContent:function(t){this.content=t,this.addElements(t.getElements())},addElements:function(t){return this.$el.empty(),this.fragment=document.createDocumentFragment(),r.default.forEach(t,this._addElement,this),this.el.appendChild(this.fragment),this.containers=this._contentContainers,this._contentContainers=[],this},getOverflow:function(t){t=t||{};var e=t.outerHeight||0,n=0;return this.lastUsedElement&&(n=Math.min(this.lastUsedElement.metrics.marginBottom,t.marginTop)),this.metrics.contentHeight-this.metrics.height+e-n},hasSpaceLeft:function(){return this.getOverflow()<0},revert:function(t){r.default.invoke(this.elements,"revert"),t=t?t:this._originalHtml||"",this.metrics.contentHeight=0,this.lastUsedElement=null,this.releaseAll(),this.el.innerHTML=t,this._originalHtml=t},_addElement:function(t){var e;return t=this._verifyElementIsUsable(t),!t||!this.isFlexible&&0===this.metrics.height||(0===this.metrics.contentHeight||!t.el||!t.$el.hasClass(w.default.BREAK_BEFORE))&&(this._verifyElementMetrics(t),e=this.getOverflow(t.metrics),this.isFlexible||e*-1>=this.metrics.lineHeight?(this._useElement(t),!0):e>-this.metrics.lineHeight&&e<=t.metrics.marginBottom?(t.shouldStickToNext()||this._useElement(t),!1):this._overflowElementIfSupported(t))},_useElement:function(t){var e=0;this.lastUsedElement&&(e=Math.min(this.lastUsedElement.metrics.marginBottom,t.metrics.marginTop));var n=t.metrics.outerHeight-e;this.metrics.contentHeight+=n,this.fragment.appendChild(t.render().el),this.retain(t.figure||t),this.lastUsedElement=t,t instanceof h.default&&this._contentContainers.push(t)},_overflowElementIfSupported:function(t){var e,n,i=t.isRearrangeable();return!(!i&&!t.isSplittable())&&(i?(this.anchoredBlock=t,!0):(e=this.metrics.height-this.metrics.contentHeight,this._useElement(t),n=t.getOverflowBlock(e).render(),this.content.addAfter(n,this.anchoredBlock||this.lastUsedElement),this.anchoredBlock=null,!1))},_verifyElementIsUsable:function(t){if(t instanceof m.default)return t;if(t instanceof p.default&&!this._originalContainers)return!1;var e,n;return r.default.each(this._originalContainers,function(i){var r=t.getElementsMappedToField(i.fieldMap,i.match);if(r.length)return e=r[0],n=i,!1}),!!e&&(n=n.clone(),n.isInline=!0,n.content=this.content,n.setFigure(t,e),this.$el.append(n.render().el),n.calculateMetrics(),n.metrics.lineHeight=this.metrics.lineHeight,this.options.isPositionedGrid&&n.normalize(this.metrics.lineHeight,this.lastUsedElement&&this.lastUsedElement.metrics.marginBottom),n.releaseAll(),n.$el.remove(),n)},_verifyElementMetrics:function(t){t.metrics.lineHeight!==this.metrics.lineHeight&&_.default.console.warn("lineHeight mismatch between page and content.","lineHeight on ",this.el,": ",this.metrics.lineHeight,"lineHeight on ",t.el,": ",t.metrics.lineHeight,"The page might not look good!"),this.options.isPositionedGrid&&t.normalize(this.metrics.lineHeight,this.lastUsedElement&&this.lastUsedElement.metrics.marginBottom)},_getInlineContainers:function(){return r.default.map(this.$el.find("."+w.default.CONTAINER_INLINE),function(t){return new h.default({el:t})})}}),exports.default=b},function(t,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default={retain:function(t){this.content.retain(t),this.retained=this.retained||[],this.retained.push(t)},releaseAll:function(){this.retained&&this.retained.length&&(this.content.release(this.retained),this.retained=[])},didRetainElements:function(){return!!this.retained&&this.retained.length>0}}},function(t,exports,e){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(exports,"__esModule",{value:!0});var i=e(1),r=n(i),s=e(3),a=n(s),o=e(12),l=n(o),u=e(15),c=n(u),f=e(34),h=n(f),d=e(43),p=n(d),g=e(13),m=n(g),v=e(9),_=n(v),y=e(17),w=n(y),b=e(41),E=n(b),T=l.default.extend();T.loadedAssets=[],r.default.extend(T.prototype,h.default,p.default,{fullscreenEvents:{touch:{"touchstart img, .alf-image":"onTouchStart","touchmove img, .alf-image":"onTouchMove","touchend img, .alf-image":"onTouchEnd","tap img, .alf-image":"onTap"},pointer:{"click img, .alf-image":"onClick","mousedown img, .alf-image":"onMouseDown"}},className:m.default.CONTAINER,initialize:function(t){t=this.options=r.default.extend({},t||{}),r.default.bindAll(this,"load","_doLoad","_loadComplete","_loadReady","enterFullscreen"),this.defaultMetrics(),this.deferreds=[],this.loaded=null,this.isDirty=!1,this.isResponsive=!1,this.mouseDownX=0,this.mouseDownY=0,this.mouseDownTime=0,this.matchingFigureElements=[],this._lastState={},t.pixelRatio=parseInt(t.pixelRatio||window.devicePixelRatio||1,10)},tearDown:function(){this.releaseAll(),this.stopListening(),this.undelegateEvents(),this.el=null,this.figureEl=null,this.fullscreenEl&&(0,a.default)(this.fullscreenEl).remove(),this.fullscreenEl=null,this.$el.find("img").each(function(){this.style.removeProperty("max-width"),this.style.removeProperty("max-height"),this.style.removeProperty("width"),this.style.removeProperty("height")})},remove:function(){this.$el.addClass(m.default.IS_REMOVED),this.isRemoved=!0,this.releaseAll(),this.figure=null,this.figureEl=null,this.$el.empty()},clone:function(){var t;return t=new T({el:this.el.cloneNode(!0)}),t._setUniqueId(),t},setElement:function(t){T.__super__.setElement.call(this,t),this.fieldMap=w.default.dom.getFieldMap(this.el),this.match=this.$el.attr("data-match"),this.ref=this.$el.attr("data-ref"),this.isOptional=this.$el.hasClass(m.default.IS_OPTIONAL),this.isRemoved=this.$el.hasClass(m.default.IS_REMOVED),this.type=this.$el.attr("data-type")},setFigure:function(t,e){return this.figureElSignature&&this.figureElSignature!==e.signature&&this.revert(),this.figure=t,this.figureEl=e,this.figureElSignature=e.signature,this.retain(t),this},setFigureEl:function(t){this.setFigure(t.figure,t)},lockFigureEl:function(){this.preferFigureElSignature=this.figureElSignature},useBestMatchingFigureEl:function(){var t=this;if(!this.matchingFigureElements.length)return!1;var e;return this.preferFigureElSignature&&(e=r.default.find(this.matchingFigureElements,function(e){return e.matchesAnySignature(t.preferFigureElSignature)})),this.setFigureEl(e||this.matchingFigureElements[0]),!0},useNextFigureEl:function(){var t=this.matchingFigureElements.length;if(!t)return!1;var e=this.matchingFigureElements.indexOf(this.figureEl)+1;return this.setFigureEl(this.matchingFigureElements[e%t]),this.lockFigureEl(),!0},setLayer:function(t){this.layer=t,this.fullscreenLayer||(this.fullscreenLayer=t.above()),this._setupFullscreen()},setFullscreenEl:function(t){this.fullscreenEl=t,this._setupFullscreen()},preventDefaultEvents:function(){this.undelegateEvents(this.fullscreenEvents)},isSplittable:function(){return!1},isRearrangeable:function(){return!!this.$el.hasClass(m.default.IS_REARRANGEABLE)},render:function(){return this.isReadyForRender()?(this.id=this.el.id||this._setUniqueId(),this.rendered=!0,this.isUsingSameFigureEl()?(this.$el.append(this._lastState.html),this.renderedWidgets=this._lastState.renderedWidgets||!1):(this.renderProcessedContainerContent(),this.renderBgImages(),this._originalHtml=this.el.outerHTML),this.matchingFigureElements&&this.matchingFigureElements.length>1&&this.$el.addClass(m.default.MULTI_CHOICE),this):this},isReadyForRender:function(){return this.figureEl&&!this.rendered&&!this.isDisabled&&!this.isRemoved},renderProcessedContainerContent:function(){var t=this.figureEl.el.outerHTML,e=this.$el.attr("data-select")||this.$el.attr("data-select-inner"),n=e?this.$el:(0,a.default)(this.el).find("[data-select], [data-select-inner]");return 0===n.length?this.$el.append(t):void n.each(function(e,n){var i,r=(0,a.default)(n).attr("data-select"),s=!1;r||(r=(0,a.default)(n).attr("data-select-inner"),s=!0);try{i=(0,a.default)(t).find(r)[0]}catch(t){}i?n.innerHTML=s?i.innerHTML:i.outerHTML:n.parentNode.removeChild(n)})},renderBgImages:function(){var t=this;if("image"===this.type){var e=this.$el.find("img");e.length&&e.each(function(e,n){var i=n.getAttribute("data-src")||n.getAttribute("src"),r=n.getAttribute("data-src-2x"),s=parseInt(n.getAttribute("width"),10),o=parseInt(n.getAttribute("height"),10),l=o/s,u={width:"100%","padding-bottom":100*l+"%","background-image":"url("+i+")","background-repeat":"no-repeat","background-size":"cover","background-position":"50% 50%"},c={"data-ratio":l,"data-width":s,"data-height":o,"data-src":n.getAttribute("data-src")};r&&(c["data-src-2x"]=r);var f=(0,a.default)("<div>").attr(c).addClass(m.default.IMAGE).css(u);(0,a.default)(n).replaceWith(f),t._trackAssetProgress(i)})}},discard:function(){this.rendered=!1,this._lastState={},this.$el.empty(),this.render(),this.renderedWidgets=!1,this.renderWidgets(),this.unload(),this.load()},revertToOriginal:function(){this.$el.html(this._originalHtml)},revert:function(){this.rendered&&this.saveState(),this._originalHtml=!1,this.rendered=!1,this.renderedWidgets=!1,this.figure=null,this.figureEl=null,this.fullscreenEl=null,this.fullscreenLoaded=!1,this.releaseAll(),this.$el.empty(),this.enable()},isUsingSameFigureEl:function(){var t=this.figureEl.matchesAnySignature(this._lastState.figureElSignature);return t||this.isUsingSimilarFigureEl()},isUsingSimilarFigureEl:function(){if(!this._lastState.html||1!==this.matchingFigureElements.length)return!1;var t=(0,a.default)(this._lastState.html);return!t.find("img").length&&t[0].tagName===this.figureEl.el.tagName},saveState:function(t){this._lastState=r.default.extend({html:this.el.innerHTML,figureElSignature:this.figureElSignature,preferFigureElSignature:this.preferFigureElSignature,renderedWidgets:this.renderedWidgets},t||{})},load:function(){E.default.all(this._runWidgets(),this._doLoad)},unload:function(){this.loaded!==!1&&(this.loaded=!1,this.unloadElement(this.el))},unloadElement:function(t){var e=(0,a.default)(t);e.addClass(m.default.CONTAINER_IS_UNLOADED),e.find("img[data-src]").each(function(){this.setAttribute("src","data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==")})},addDeferred:function(t){this.deferreds.push(t)},shouldStickToNext:function(){return!1},enterFullscreen:function(t){if(!this._supportsFullscreen)return w.default.console.warn("This container does not support fullscreen"),this.layer||w.default.console.warn("  Missing layer"),void(this.fullscreenEl||w.default.console.warn("  Missing fullscreenEl"));var e=this.transition;return!this.gestureStarted&&!e.isRunning()&&(this.layer.transition=e,t&&t instanceof HTMLElement&&e.setTargetEl(t),void e.run())},_setupFullscreen:function(){!this._supportsFullscreen&&this.fullscreenEl&&this.layer&&this.fullscreenLayer&&(this.transition=this.transition||this.layer.transitionTo(this.fullscreenLayer,c.default.Fade),this.$el.addClass(m.default.SUPPORTS_FULLSCREEN),this.listenTo(this.transition,{willAppear:this._fullscreenWillAppear,didAppear:this._fullscreenDidAppear,didDisappear:this._fullscreenDidDisappear}),this.layer.transition=this.transition,this.delegateEvents(w.default.touchScreen?this.fullscreenEvents.touch:this.fullscreenEvents.pointer),this._supportsFullscreen=!0)},_setUniqueId:function(t){return t||(t=r.default.uniqueId("c")),this.id=t,this.el.id=t,t},renderWidgetMatch:function(t){t.widget.render.call(t,this,t.el),t.widget.compile||(this.isDirty=!0)},renderWidgets:function(){return!this.renderedWidgets&&(r.default.each(this.matchingWidgets,function(t){(!this.decompiled||this.decompiled&&!t.widget.compile)&&this.renderWidgetMatch(t)},this),void(this.renderedWidgets=!0))},_runWidgets:function(){var t,e=[];return r.default.each(this.matchingWidgets,function(n){t=E.default.defer(),n.widget.compile||(this.isDirty=!0),n.widget.run.call(n,t.resolve),e.push(t)},this),e},_doLoad:function(){var t,e=this,n=Math.min(this.options.pixelRatio,2);if(!this.loaded)return this.$el.hasClass(m.default.ALLOW_OVERFLOW)||this._fitBoundaries(),this.$assets=this.$el.find("img[data-src]"),t="data-src"+(n>1?"-"+n+"x":""),r.default.each(this.$assets,function(n){var i=n.getAttribute(t)||n.getAttribute("data-src");e._trackAssetProgress(i||n.getAttribute("src"),n),i&&(n.src=i)}),E.default.any(this.deferreds,this._loadReady),E.default.all(this.deferreds,this._loadComplete),this.loaded=!0,this},_fullscreenWillAppear:function(t,e){this.trigger("fullscreenWillAppear",t,e)},_fullscreenDidAppear:function(t){this.trigger("fullscreenDidAppear",t)},_fullscreenDidDisappear:function(t){this.trigger("fullscreenDidDisappear",this),_.default.trigger("fullscreenDidDisappear",this)},_loadReady:function(){this.$el.removeClass(m.default.CONTAINER_IS_UNLOADED)},_loadComplete:function(){this.trigger("loadComplete")},_trackAssetProgress:function(t,e){var n=this,i=E.default.defer();this.addDeferred(i),T.loadedAssets.indexOf(t)!==-1?i.resolve({},e):(e||(e=new Image,e.src=t),e.addEventListener("load",function(e){T.loadedAssets.push(t),i.resolve(e,e.currentTarget)}),e.addEventListener("error",function(e){i.resolve(e,e.currentTarget),_.default.trigger("assetLoadError",n,t)}))},_fitBoundaries:function(){var t=[],e=this;this.decompiled||this.isResponsive||(this.$el.find("img").each(function(){var n,i=this.clientWidth,r=this.clientHeight;i>e.metrics.width&&(n=e.metrics.width/i,t.push({el:this,css:{height:r*n+"px",width:e.metrics.width+"px"}}))}),r.default.each(t,function(t){(0,a.default)(t.el).css(t.css)}))},onTouchStart:function(t){t=t.originalEvent||t;var e=t.touches[0];this._touchStartX=e.pageX,this._touchStartY=e.pageY,this._touchMoveX=e.pageX,this._touchMoveY=e.pageY},onTouchMove:function(t){t=t.originalEvent||t;var e=t.touches[0];this._touchMoveX=e.pageX,this._touchMoveY=e.pageY},onTouchEnd:function(t){var e,n;e=Math.abs(this._touchStartX-this._touchMoveX),n=Math.abs(this._touchStartY-this._touchMoveY),e<7&&n<7&&t.preventDefault()},onMouseDown:function(t){this.mouseDownX=t.pageX,this.mouseDownY=t.pageY,this.mouseDownTime=Date.now()},onTap:function(t){this.enterFullscreen(t.currentTarget)},onClick:function(t){var e=Math.abs(t.pageX-this.mouseDownX),n=Math.abs(t.pageY-this.mouseDownY),i=Date.now()-this.mouseDownTime;e>5||n>5||i>1500||this.enterFullscreen(t.currentTarget)},onGestureStart:function(t){var e=this.transition;return!this.gestureStarted&&!e.isRunning()&&(this.gestureStarted=!0,e.setTargetEl(t.currentTarget),void this.startTransform(t))},onGestureChange:function(t){var e=this.transition;return!e.isRunning()&&void this.transformEventTarget(t)},onGestureEnd:function(t){var e=this.transition;return!e.isRunning()&&(e.run(),void(this.gestureStarted=!1))}}),exports.default=T},function(t,exports,e){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t){return o.default.map(t,p)}function r(t){if(t.indexOf("*")===-1)return new RegExp("^"+t+"$");var e=t.replace(/([\-\:])/g,"\\$1");return e=e.replace(/(^|[^\\W\*])\*(\\|$)/g,"$1[^\\W]+$2"),e=e.replace(/(^|[^\\W])\*\*(\\|$)/g,"$1(.*)?$2"),new RegExp("^"+e+"$")}function s(t,e){return o.default.find(e,function(e){return e.match(t)})}Object.defineProperty(exports,"__esModule",{value:!0});var a=e(1),o=n(a),l=e(12),u=n(l),c=e(13),f=n(c),h=e(46),d=n(h),p=o.default.memoize(r),g=o.default.memoize(s,function(t,e){return[t,e]}),m=u.default.extend({initialize:function(){var t=this;this.elements=o.default.map(this.$el.children("[data-map]"),function(e,n){var i=new d.default({el:e,figure:t});return i.lockSignature(),i})},setElement:function(t){m.__super__.setElement.call(this,t),this.isOptional=this.$el.hasClass(f.default.IS_OPTIONAL)},getElementMappedToField:function(t){var e=!1,n=!1;return o.default.each(i(t),function(t){if(e=o.default.find(this.elements,function(e){return g(t,e.fieldMap)}))return!!e.noScore&&(n=n||e,void(e=!1))},this),e||n},getElementsMappedToField:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=o.default.map(i(t),function(t){return o.default.filter(e.elements,function(e){var i=g(t,e.fieldMap);return n&&i&&(i=e.$el.is(n)||e.$el.find(n).length),i})}),s=o.default.flatten(r);return s=s.sort(function(t,e){return t.noScore===e.noScore?0:e.noScore?-1:1})}});exports.default=m},function(t,exports,e){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(exports,"__esModule",{value:!0});var i=e(12),r=n(i),s=e(13),a=n(s),o=e(17),l=n(o),u=r.default.extend({initialize:function(t){this.figure=t.figure},setElement:function(t){u.__super__.setElement.call(this,t),this.noScore=this.$el.hasClass(a.default.NO_SCORE),this.fieldMap=l.default.dom.getFieldMap(this.el)}});exports.default=u},function(t,exports,e){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(exports,"__esModule",{value:!0});var i=e(1),r=n(i),s=e(3),a=n(s),o=e(12),l=n(o),u=e(34),c=n(u),f=e(13),h=n(f),d=l.default.extend();r.default.extend(d.prototype,c.default,{tagName:"p",isInline:!0,initialize:function(t){t=t||{},this.isOverflow=!1,this.isDirty=!1,this.originalMetrics=null,t.metrics||this.defaultMetrics()},render:function(){if(this.isRendered)return this;if(this.isFirst&&this.$el.addClass(h.default.IS_FIRST_BLOCK),this.isLast&&this.$el.addClass(h.default.IS_LAST_BLOCK),this.isOverflow){var t=(0,a.default)('<div style="overflow:hidden;padding:0;"></div>');t.css("margin-bottom",this.metrics.marginBottom+"px").addClass(h.default.IS_SPLITTABLE).addClass(h.default.IS_NON_REARRANGEABLE).append(this.el),this.$el.css("margin-bottom","0px"),this.setElement(t[0]),this.isDirty=!0}return this.isRendered=!0,this},clone:function(){var t=new d({el:this.el.cloneNode(!0)});return t.clonedFrom=this,t.metrics=r.default.extend({},this.metrics),t.isLast=this.isLast,this.isDirty&&t.$el.removeAttr("style"),t},revert:function(){this.isDirty&&(this.isOverflow||this.el.style.removeProperty("overflow"),this.el.style.removeProperty("height"),this.isDirty=!1)},isSplittable:function(){return!this.$el.hasClass(h.default.IS_NON_SPLITTABLE)&&(this.$el.hasClass(h.default.IS_SPLITTABLE)||["P","UL","OL","TABLE"].indexOf(this.el.tagName)!==-1)},isRearrangeable:function(){return!this.$el.hasClass(h.default.IS_NON_REARRANGEABLE)&&(this.$el.hasClass(h.default.IS_REARRANGEABLE)||["DIV"].indexOf(this.el.tagName)!==-1)},shouldStickToNext:function(){return this.$el.hasClass(h.default.STICK_TO_NEXT)||["H1","H2","H3"].indexOf(this.el.tagName)!==-1},getOverflowBlock:function(t){var e,n,i=0;n=this.clone(),this.isOverflow&&n.setElement(n.$el.children().first()),n._isNormalized=!1,n.isOverflow=!0,n.overflowMarginTop=this.isOverflow?this.metrics.overflowMarginTop:0,e=t%this.metrics.lineHeight,i=t-e,this.$el.css({overflow:"hidden",height:i+"px"}),this.isDirty=!0;var r=n.overflowMarginTop;return n.$el.css("margin-top",r-i+"px"),n.metrics.height-=i,n.metrics.outerHeight-=i,n.metrics.overflowMarginTop=r-i,n}}),exports.default=d},function(t,exports,e){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(exports,"__esModule",{value:!0});var i=e(1),r=n(i),s=e(12),a=n(s),o=e(34),l=n(o),u=e(17),c=n(u),f=e(13),h=n(f),d=e(9),p=n(d),g=e(41),m=n(g),v=a.default.extend();r.default.extend(v.prototype,l.default,{initialize:function(t){t=this.options=r.default.extend({},t||{}),this.layer=this.options.layer||null},tearDown:function(){this.stopListening(),this.$el.remove()},subscribeToContainer:function(t){var e;!t.fullscreenEl&&t.figure&&(e=this.getFullscreenElement(t.figure),e&&t.setFullscreenEl(e)),this.listenTo(t,{fullscreenWillAppear:function(e,n){this._loadMathchingWidgetsForContainer(t,n)}})},getFullscreenElement:function(t){var e=c.default.dom.getFieldMap(this.el),n=t.getElementMappedToField(e);return n?n.el.cloneNode(!0):null},loadContainer:function(t,e){if(!this.layer)return void c.default.console.warn("No fullscreen layer found");if(this.$el.empty().addClass(h.default.IS_VISIBLE).append(t.fullscreenEl),this.layer.renderFullscreenContainer(this),t.fullscreenLoaded)return e();var n=this.layer.$el.find("img[data-src]");n.each(function(){this.src=this.getAttribute("data-src")}),t.fullscreenLoaded=!0,e()},exitFullscreen:function(){this.layer.exitFullscreen()},_loadMathchingWidgetsForContainer:function(t,e){var n,i=[];return n=function(){p.default.trigger("fullscreenWillAppear",t),e()},t.matchingWidgets&&t.matchingWidgets.length?(i.push(m.default.defer()),this.loadContainer(t,i[0].resolve),r.default.each(t.matchingWidgets,function(t){var e=m.default.defer();i.push(e),t.widget.fullscreen.call(t,this,e.resolve)},this),void m.default.all(i,n)):this.loadContainer(t,n)}}),exports.default=v},function(t,exports,e){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(exports,"__esModule",{value:!0});var i=e(1),r=n(i),s=e(3),a=n(s),o=e(13),l=n(o),u=e(41),c=n(u),f=e(12),h=n(f),d=r.default.memoize(function(t){if(!t)return{};var e=t.replace(/\s+/g,"").split(";"),n={};return r.default.each(e,function(t){var e=t.split(":"),i=e[0],r=parseInt(e[1],10);isNaN(r)&&(r="false"!==e[1]),n[i]=r}),n}),p=h.default.extend();r.default.extend(p.prototype,{tagName:"object",className:l.default.SIZE_DETECTOR,initialize:function(t){t=this.options=r.default.extend({start:300,end:1200,interval:50,refreshRate:50,watch:!0,target:null},t||{}),this.$target=(0,a.default)(this.options.target),r.default.extend(this.options,d(this.$target.attr("data-respond"))),r.default.bindAll(this,"_onResize","_setupListenerForView"),this._onResize=r.default.throttle(this._onResize,t.refreshRate),this._deferred=c.default.defer(),this.isReady=this._deferred.promise},start:function(){this._applyClassNamesForWidth(this.$target.width()),this._setupListenerForView()},tearDown:function(){var t=this.el.contentDocument;t&&t.defaultView&&t.defaultView.removeEventListener("resize",this._onResize),this.$el.remove()},render:function(){if(!this.options.watch)return this._applyClassNamesForWidth(this.$target.width()),this._deferred.resolve(),this;var t=this.$target.find("."+l.default.SIZE_DETECTOR);return t.length?(this.setElement(t),this.start(),this):(this.$el.css({display:"block",position:"absolute",top:0,right:0,bottom:0,left:0,width:"100%","pointer-events":"none","z-index":-2147483648}),this.el.type="text/html",this.el.data="about:blank",this.start(),this.$target.append(this.$el),this)},getClassNamesForWidth:function(t){for(var e=this.options,n=e.start,i=e.end,r=e.interval,s=[],a=n;a<=i;a+=r)a<t?s.push("alf-gt"+a):s.push("alf-lt"+a);return s},_onResize:function(t){var e=t.target.innerWidth;this._applyClassNamesForWidth(e)},_setupListenerForViewOnLoad:function(){this.$el.on("load",r.default.bind(function(){setTimeout(this._setupListenerForView,0),this.$el.off("load")},this))},_setupListenerForView:function(){if(!this.el.contentDocument)return void this._setupListenerForViewOnLoad();var t=this.el.contentDocument.defaultView;t.addEventListener("resize",this._onResize),this._deferred.resolve()},_applyClassNamesForWidth:function(t){var e=this.getClassNamesForWidth(t);if(this.options.target){var n=(0,a.default)(this.options.target).get(0),i=n.className;i=a.default.trim(i.replace(/alf\-(g|l)t(\d+)\s?/g,"")),i+=" "+e.join(" "),n.className=i}this.trigger("resize",t)}}),exports.default=p},function(t,exports,e){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(exports,"__esModule",{value:!0});var i=e(6),r=n(i),s=function(t){var e;this.options=r.default.extend({prefix:""},t),this.el=t.el,this.height=t.height||(0,r.default)(this.el).height(),this.lineHeight=t.lineHeight||0,e=window.getComputedStyle(this.el,null),this.paddingTop=parseInt(e.getPropertyValue("padding-top"),10),this.paddingBottom=parseInt(e.getPropertyValue("padding-bottom"),10),this.height-=this.paddingTop+this.paddingBottom,this._position()};s.prototype._position=function(){var t=this,e=[],n=this.el.className.match(/cols\-([0-9]+)/);if(!n)throw new Error("Failed to find number of columns");n=parseInt(n[1],10);for(var i=0;i<n;i++)e[i]={remainingHeight:this.height,cells:[]};(0,r.default)(this.el).find('[class*="col-"]').each(function(){var n=parseInt(this.className.match(/col\-([0-9]+)/)[1],10)-1,i=this.className.match(/colspan\-([0-9]+)/),s=t._createCellFromEl(this);if(i=i?parseInt(i[1],10):1,"none"!==(0,r.default)(this).css("display"))for(var a=n;a<n+i;a++)e[a].cells.push(s)}),this._calcMetrics(e),r.default.each(e,function(e,n){t._positionColumn(e,n)})},s.prototype._createCellFromEl=function(t){var e=(0,r.default)(t).hasClass(this._class("flex"));return{el:t,flex:e,height:0,innerHeight:0,top:0}},s.prototype._calcMetrics=function(t){var e,n,i,s,a,o,l,u,c,f;for(e=this._class("col-top"),n=this._class("col-bottom"),i=t.length,l=0;l<i;l++)for(s=t[l].cells.length,u=0;u<s;u++)a=t[l].cells[u],o=(0,r.default)(a.el),o.removeClass(e+" "+n),0===u&&(a.isTop=!0,o.addClass(e)),u===s-1&&(a.isBottom=!0,o.addClass(n));for(l=0;l<i;l++)for(s=t[l].cells.length,u=0;u<s;u++)a=t[l].cells[u],o=(0,r.default)(a.el),a.height=a.flex?0:o.outerHeight(),a.isTop&&(c=window.getComputedStyle(a.el,null),t[l].marginTop=parseInt(c.getPropertyValue("margin-top"),10),t[l].marginTopOffset=t[l].marginTop%this.lineHeight,a.flex||(a.innerHeight=o.height(),0===a.innerHeight&&(f=parseInt(c.getPropertyValue("margin-bottom"),10),a.height-=f))),t[l].remainingHeight-=a.height},s.prototype._positionColumn=function(t,e){var n=this,i=this.paddingTop;r.default.each(e.cells,function(t,s){var a=(0,r.default)(s.el),o={},l=0;if(!n.lineHeight||s.isTop||s.isBottom&&!s.flex||(l=(i-e.marginTopOffset-n.paddingTop)%n.lineHeight,0!==l&&(l=n.lineHeight-l,e.remainingHeight-=l,i+=l)),(!s.isTop||s.top<i)&&(s.top=i),o.top=s.top+"px",s.flex){var u=parseInt(a.css("margin-bottom"),10)+parseInt(a.css("margin-top"),10);s.height=e.remainingHeight,o.height=(s.height>u?s.height-u:0)+"px"}a.css(o),i+=s.height})},s.prototype._class=function(t){return this.options.prefix+t},"undefined"!=typeof window&&(r.default.fn.grid=function(t){return t=t||{},t.el=this[0],new s(t)}),exports.default=s},function(t,exports,e){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(exports,"__esModule",{value:!0});var i=e(1),r=n(i),s=e(3),a=n(s),o=e(11),l=n(o),u=l.default.extend({initialize:function(t){this.container=t,this.compiled={}},compile:function(){var t=this.container,e=(0,a.default)(t.el.outerHTML);return t.isDirty&&t.revertToOriginal(),t.unloadElement(e),this.compiled={loaded:!1,metrics:t.metrics,html:e[0].outerHTML},t.fullscreenEl&&(this.compiled.fullscreenEl=t.fullscreenEl.outerHTML),this.compiled},decompile:function(t){var e=this.container;e.decompiled=!0,r.default.extend(e,t),e.fullscreenEl&&e.setFullscreenEl((0,a.default)(e.fullscreenEl).get(0))}});exports.default=u},function(t,exports,e){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){return{callback:t,name:e}}Object.defineProperty(exports,"__esModule",{value:!0});var r=e(1),s=n(r),a=e(53),o=n(a),l=e(54),u=n(l),c=e(55),f=n(c),h=e(17),d=n(h),p=e(40),g=n(p),m={filters:{article:s.default.map(u.default,i),page:s.default.map(f.default,i)},addArticleFilter:function(t,e){this.filters.article.push({callback:t,name:e||"articlefilter"})},addPageFilter:function(t,e){this.filters.page.push({callback:t,name:e||"pagefilter"})},getBestTemplateForPage:function(t,e){var n,i,r={score:-(1/0),template:null,containerMap:null};return s.default.each(e,function(e){n=e.getContainerMap(t.content),i=e.score(t,n),(i>r.score||i===r.score&&Math.random()>.5)&&(r.score=i,r.template=e,r.containerMap=n)}),r},getEligibleTemplatesForArticle:function(t,e){return this._filterTemplates("article",t,e)},getEligibleTemplatesForPage:function(t,e){return this._filterTemplates("page",t,e)},getScoredTemplatesForPage:function(t,e){return s.default.map(this.getEligibleTemplatesForPage(t,e),function(e){return{template:e,score:e.score(t)}})},getPageTemplateFromTemplate:function(t,e){return new g.default(s.default.extend(e||{},{el:t.el.cloneNode(!0)}))},getTemplateFromPageTemplate:function(t,e){
var n=new o.default(s.default.extend(e||{},{el:t.el.cloneNode(!0)}));return s.default.each(n.regions,function(e,n){e.revert(t.regions[n]._originalHtml)}),s.default.invoke(n.containers,"revert"),n},_filterTemplates:function(t,e,n){return e.pages?d.default.console.groupCollapsed("** Filtering templates for article"):d.default.console.groupCollapsed("** Filtering templates for page",e.pageNum+1),s.default.each(this.filters[t],function(t){var i=n.slice(0);n=t.callback.call(this,e,n),d.default.console.groupCollapsed("Filter `"+t.name+"` on",i.length,"templates (removed",i.length-n.length,"templates)"),i.length-n.length&&s.default.each(i,function(t){n.indexOf(t)===-1&&d.default.console.debug("-",t.name)}),d.default.console.groupEnd()},this),d.default.console.debug("Remaining templates:",n.length),d.default.console.groupEnd(),n}};exports.default=m},function(t,exports,e){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(exports,"__esModule",{value:!0});var i=e(1),r=n(i),s=e(12),a=n(s),o=e(42),l=n(o),u=e(44),c=n(u),f=e(45),h=n(f),d=e(13),p=n(d),g=-500,m=100,v=0,_=-500,y=100,w=5,b=a.default.extend();r.default.extend(b.prototype,{setElement:function(t){b.__super__.setElement.call(this,t),this.name=this.$el.attr("data-name"),this.signature=void 0,this.lockSignature(),this.containers=this.$el.find("."+p.default.CONTAINER).map(function(){return new c.default({el:this})}),this.regions=this.$el.find("."+p.default.REGION).map(function(){return new l.default({el:this})}),this.baseScore=parseInt(this.$el.attr("data-score")||0,10)},score:function t(e,n){var t=this.baseScore,i=e.content.getBlocks();return n=n||this.getContainerMap(e.content),t+=n.score||0,r.default.each(n.positions,function(e){t+=e.match?e.noScore?0:m:e.isOptional?v:g}),this.regions.length&&(t+=i.length?y:_),this.lastScore=t,t},getContainerMap:function(t){var e,n,i,s=[],a={matches:0,positions:{},score:0,template:this};return e=t.getElements(),n=t.getFigures(),i=e.length,r.default.each(this.containers,function(t,r){var o,l,u;for(u=a.positions[r]={match:!1,fieldMap:t.fieldMap,isOptional:t.isOptional||!t.fieldMap.length&&t.ref},o=0;o<i;o++)if(e[o]instanceof h.default&&s.indexOf(e[o])===-1&&(l=e[o].getElementMappedToField(t.fieldMap)))return a.score-=o*w,a.matches+=1,s.push(e[o]),u.match=!0,u.index=n.indexOf(e[o]),void(u.noScore=l.noScore)}),a}}),exports.default=b},function(t,exports,e){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(exports,"__esModule",{value:!0});var i=e(1),r=n(i),s=e(17),a=n(s),o=!!a.default.matchMedia;exports.default={mediaQuery:function(t,e){return o?r.default.filter(e,function(t){var e=a.default.dom.getMediaQuery(t.el);return!e||a.default.matchMedia(e).matches}):e},fieldMap:function(t,e){var n,i=t.content.fieldMap;return i&&i.length?r.default.filter(e,function(t){return n=a.default.dom.getFieldMap(t.el),!!n.length&&r.default.intersection(i,n).length>0}):e},emptyContainers:function(t,e){var n;return n=function(t){return t.match===!0||t.match===!1&&t.isOptional},r.default.filter(e,function(e){var i=e.getContainerMap(t.content);return r.default.every(i.positions,n)})},formatName:function(t,e){var n;return t.format&&(n=t.format.get("name"))?r.default.filter(e,function(t){var e=t.$el.attr("data-filter-format-name");return!e||e.split(" ").indexOf(n)!==-1}):e}}},function(t,exports,e){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(exports,"__esModule",{value:!0});var i=e(1),r=n(i);exports.default={emptyBlocks:function(t,e){var n=t.content.getBlocks(),i=t.content.getFigures();return n.length?e:r.default.filter(e,function(t){var e=t.regions;return e.length?r.default.any(e,function(t){return!!t.containers.length&&r.default.any(t.containers,function(t){return r.default.any(i,function(e){return e.getElementMappedToField(t.fieldMap)})})}):t})},emptyContainers:function(t,e){var n;return n=function(t){return t.match===!0||t.match===!1&&t.isOptional},r.default.filter(e,function(e){var i=e.getContainerMap(t.content);return r.default.every(i.positions,n)})},pagePosition:function(t,e){return r.default.filter(e,function(e){var n=e.$el.attr("data-filter-page-pos"),i=t.pageNum+1,s=!1;return!n||(n=n.split(" "),r.default.each(n,function(t){var e=!1,n=parseInt(t,10);if("!"===t[0]&&(e=!0,n=parseInt(t.substr(1),10)),e&&n!==i||!e&&n===i)return s=!0,!1}),s)})}}},function(t,exports,e){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(exports,"__esModule",{value:!0});var i=e(1),r=n(i),s=e(3),a=n(s),o=e(17),l=n(o),u=e(38),c=n(u),f=e(47),h=n(f),d=e(45),p=n(d),g=c.default.extend({defaults:{contents:{},meta:{}},initialize:function(t){t&&t.contents&&this._changeContents(),this.on("change:contents",this._changeContents),this.__defineGetter__("elementsLeft",this._getElementsLeft)},setElements:function(t){t=r.default.filter(t,function(t){return!("P"===t.tagName&&t.innerHTML.length<15&&!t.innerHTML.replace(/(\s+)?(<br(\s+)?\/?>)?(&nbsp;)?/gim,""))&&t}),this.elements=r.default.map(t,function(t){var e={el:t};if("FIGURE"===t.tagName){var n=new p.default(e);if(n.elements.length)return n}return new h.default(e)});var e=this.getBlocks();e.length&&(e[0].isFirst=!0,e[e.length-1].isLast=!0)},addAfter:function(t,e){var n=this.elements;n.splice(n.indexOf(e)+1,0,t)},each:function(t,e){r.default.each(this.elements,t,e||this)},release:function(t){t=r.default.isArray(t)?t:[t],r.default.each(t,function(t,e){t.retained=!1,t.clonedFrom&&!t.clonedFrom.retained?this.elements.splice(this.elements.indexOf(t),1):t.revert&&t.revert()},this)},releaseAll:function(){this.release(this.elements)},retain:function(t){var e=r.default.isArray(t)?t:[t];r.default.each(e,function(t){t.retained=!0})},retainAll:function(){r.default.each(this.elements,function(t){t.retained=!0})},getElements:function(){return r.default.filter(this.elements,function(t){return!t.retained})},getBlocks:function(){return r.default.filter(this.elements,function(t){return!t.retained&&t instanceof h.default})},getFigures:function(){return r.default.filter(this.elements,function(t,e){return!t.retained&&t instanceof p.default})},hasBlocksLeft:function(){return this.getBlocks().length>0},isEmpty:function(){return 0===this.elementsLeft},_changeContents:function(){var t,e;t=(0,a.default)(this.get("contents").source),e=t.children(),this.className=t.attr("class"),this.fieldMap=l.default.dom.getFieldMap(t[0]),this.setElements(e)},_getElementsLeft:function(){return r.default.reduce(this.elements,function(t,e){return e.retained?t:t+1},0)}});exports.default=g},function(t,exports,e){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(exports,"__esModule",{value:!0});var i=e(58),r=n(i);exports.default={Article:r.default}},function(t,exports,e){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(exports,"__esModule",{value:!0});var i=e(1),r=n(i),s=e(11),a=n(s),o=e(59),l=n(o),u=a.default.extend({initialize:function(t){this.article=t},serialize:function(){return{pages:r.default.map(this.article.pages,this._serializePage,this)}},unserialize:function(t){var e=[],n=new l.default(null,this.article);return t="string"==typeof t?JSON.parse(t):t,r.default.each(t.pages,function(t,i){t&&(t.pageNum=i,e.push(n.unserialize(t)))}),r.default.each(e,function(t){this.article.pages[t.pageNum]=t,this.article.setTemplateForPageNum(t.template,t.pageNum)},this),this.article.revert(),this.article},_serializePage:function(t){var e=new l.default(t,this.article);return e.serialize()}});exports.default=u},function(t,exports,e){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(exports,"__esModule",{value:!0});var i=e(1),r=n(i),s=e(3),a=n(s),o=e(11),l=n(o),u=e(53),c=n(u),f=e(52),h=n(f),d=l.default.extend({initialize:function(t,e){this.page=t,this.article=e},serialize:function(){var t=[],e=this.page;return!!this.article.overrideTemplates[e.pageNum]&&(t=r.default.map(e.pageTemplate.containers,function(t){return t.figureEl?{figureElementSignature:t.figureEl.signature,preferFigureElSignature:t.preferFigureElSignature,html:t.el.innerHTML}:null}),{template:{signature:e.template.signature,html:h.default.getTemplateFromPageTemplate(e.pageTemplate).el.outerHTML},containers:t})},unserialize:function(t){var e=t.template.signature,n=t.template.html,i=new c.default({el:(0,a.default)(n)}),r=this._findOriginalTemplate(e);this.page=this.article.createPage(t.pageNum),this.page.setTemplate(r||i);var s=h.default.getPageTemplateFromTemplate(i,{page:this.page});return this.page.setPageTemplate(s),this._restoreContainers(t),this.page},_findOriginalTemplate:function(t){return r.default.find(this.article.templates,function(e){return e.matchesAnySignature(t)})},_restoreContainers:function(t){r.default.each(this.page.pageTemplate.containers,function(e,n){var i=t.containers[n],r=i&&i.figureElementSignature;r&&(e.figureElSignature=r,e.preferFigureElSignature=i.preferFigureElSignature,e.saveState({html:i.html,renderedWidgets:!0}))})}});exports.default=d},function(t,exports,e){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(exports,"__esModule",{value:!0});var i=e(35),r=n(i);exports.default={Article:r.default}},function(t,exports,e){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(exports,"__esModule",{value:!0});var i=e(32),r=n(i);exports.default={ScrollView:r.default}}])});